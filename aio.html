<!DOCTYPE html>
<!-- START: inst/pkgdown/templates/layout.html --><!-- Generated by pkgdown: do not edit by hand --><html lang="en" data-bs-theme="auto">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<title>Data Empowerment for Election Workers: All in One View</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="assets/themetoggle.js"></script><link rel="stylesheet" type="text/css" href="assets/styles.css">
<script src="assets/scripts.js" type="text/javascript"></script><!-- mathjax --><script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      config: ["MMLorHTML.js"],
      jax: ["input/TeX","input/MathML","output/HTML-CSS","output/NativeMML", "output/PreviewHTML"],
      extensions: ["tex2jax.js","mml2jax.js","MathMenu.js","MathZoom.js", "fast-preview.js", "AssistiveMML.js", "a11y/accessibility-menu.js"],
      TeX: {
        extensions: ["AMSmath.js","AMSsymbols.js","noErrors.js","noUndefined.js"]
      },
      tex2jax: {
        inlineMath: [['\\(', '\\)']],
        displayMath: [ ['$$','$$'], ['\\[', '\\]'] ],
        processEscapes: true
      }
    });
    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><!-- Responsive Favicon for The Carpentries --><link rel="apple-touch-icon" sizes="180x180" href="favicons/edi-plej/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="favicons/edi-plej/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="favicons/edi-plej/favicon-16x16.png">
<link rel="manifest" href="favicons/edi-plej/site.webmanifest">
<link rel="mask-icon" href="favicons/edi-plej/safari-pinned-tab.svg" color="#5bbad5">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="theme-color" media="(prefers-color-scheme: light)" content="white">
<meta name="theme-color" media="(prefers-color-scheme: dark)" content="black">
</head>
<body>
    <header id="top" class="navbar navbar-expand-md top-nav edi-plej"><svg xmlns="http://www.w3.org/2000/svg" class="d-none"><symbol id="check2" viewbox="0 0 16 16"><path d="M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z"></path></symbol><symbol id="circle-half" viewbox="0 0 16 16"><path d="M8 15A7 7 0 1 0 8 1v14zm0 1A8 8 0 1 1 8 0a8 8 0 0 1 0 16z"></path></symbol><symbol id="moon-stars-fill" viewbox="0 0 16 16"><path d="M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278z"></path><path d="M10.794 3.148a.217.217 0 0 1 .412 0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217 0 0 1 0 .412l-1.162.387a1.734 1.734 0 0 0-1.097 1.097l-.387 1.162a.217.217 0 0 1-.412 0l-.387-1.162A1.734 1.734 0 0 0 9.31 6.593l-1.162-.387a.217.217 0 0 1 0-.412l1.162-.387a1.734 1.734 0 0 0 1.097-1.097l.387-1.162zM13.863.099a.145.145 0 0 1 .274 0l.258.774c.115.346.386.617.732.732l.774.258a.145.145 0 0 1 0 .274l-.774.258a1.156 1.156 0 0 0-.732.732l-.258.774a.145.145 0 0 1-.274 0l-.258-.774a1.156 1.156 0 0 0-.732-.732l-.774-.258a.145.145 0 0 1 0-.274l.774-.258c.346-.115.617-.386.732-.732L13.863.1z"></path></symbol><symbol id="sun-fill" viewbox="0 0 16 16"><path d="M8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0zm0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13zm8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zM3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8zm10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0zm-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707zM4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z"></path></symbol></svg><a class="visually-hidden-focusable skip-link" href="#main-content">Skip to main content</a>
  <div class="container-fluid top-nav-container">
    <div class="col-md-8">
      <div class="large-logo">
        <img id="edi-plej-logo" alt="Engineering For Democracy and Partnership for Large Election Jurisdictions" src="assets/images/edi-plej-logo.svg"><span class="badge text-bg-danger">
          <abbr title="This lesson is in the pre-alpha phase, which means that it is in early development, but has not yet been taught.">
            <a href="https://docs.carpentries.org/resources/curriculum/lesson-life-cycle.html" class="external-link alert-link">
              <i aria-hidden="true" class="icon" data-feather="alert-octagon" style="border-radius: 5px"></i>
              Pre-Alpha
            </a>
            <span class="visually-hidden">This lesson is in the pre-alpha phase, which means that it is in early development, but has not yet been taught.</span>
          </abbr>
        </span>

      </div>
    </div>
    <div class="selector-container">
      <div id="theme-selector">
        <li class="nav-item dropdown" id="theme-button-list">
          <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
            <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="bd-theme-text">
<li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                Light
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                Dark
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                Auto
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
          </ul>
</li>
      </div>

      <div class="dropdown" id="instructor-dropdown">
        <button class="btn btn-secondary dropdown-toggle bordered-button" type="button" id="dropdownMenu1" data-bs-toggle="dropdown" aria-expanded="false">
          <i aria-hidden="true" class="icon" data-feather="eye"></i> Learner View <i data-feather="chevron-down"></i>
        </button>
        <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
<li><button class="dropdown-item" type="button" onclick="window.location.href='instructor/aio.html';">Instructor View</button></li>
        </ul>
</div>
    </div>
  </div>
  <hr></header><nav class="navbar navbar-expand-xl bottom-nav edi-plej" aria-label="Main Navigation"><div class="container-fluid nav-container">
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle Navigation">
      <span class="navbar-toggler-icon"></span>
      <span class="menu-title">Menu</span>
    </button>
    <div class="nav-logo">
      <img class="small-logo" alt="Engineering For Democracy and Partnership for Large Election Jurisdictions" src="assets/images/edi-plej-logo-sm.svg">
</div>
    <div class="lesson-title-md">
      Data Empowerment for Election Workers
    </div>
    <div class="search-icon-sm">
      <!-- TODO: do not show until we have search
        <i role="img" aria-label="Search the All In One page" data-feather="search"></i>
      -->
    </div>
    <div class="desktop-nav">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0">
<li class="nav-item">
          <span class="lesson-title">
            Data Empowerment for Election Workers
          </span>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="key-points.html">Key Points</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="reference.html#glossary">Glossary</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="profiles.html">Learner Profiles</a>
        </li>
        <li class="nav-item dropdown">
          <button class="nav-link dropdown-toggle" id="navbarDropdown" data-bs-toggle="dropdown" aria-expanded="false">
            More <i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
<li><a class="dropdown-item" href="reference.html"></a></li>
          </ul>
</li>
      </ul>
</div>
    <!--
    <form class="d-flex col-md-2 search-form">
      <fieldset disabled>
      <input class="form-control me-2 searchbox" type="search" placeholder="" aria-label="">
        <button class="btn btn-outline-success tablet-search-button"  type="submit">
          <i class="search-icon" data-feather="search" role="img" aria-label="Search the All In One page"></i>
        </button>
      </fieldset>
    </form>
    -->
    <a id="search-button" class="btn btn-primary" href="aio.html" role="button" aria-label="Search the All In One page">Search the All In One page</a>
  </div>
<!--/div.container-fluid -->
</nav><div class="col-md-12 mobile-title">
  Data Empowerment for Election Workers
</div>

<aside class="col-md-12 lesson-progress"><div style="width: %" class="percentage">
    %
  </div>
  <div class="progress edi-plej">
    <div class="progress-bar edi-plej" role="progressbar" style="width: %" aria-valuenow="" aria-label="Lesson Progress" aria-valuemin="0" aria-valuemax="100">
    </div>
  </div>
</aside><div class="container">
      <div class="row">
        <!-- START: inst/pkgdown/templates/navbar.html -->
<div id="sidebar-col" class="col-lg-4">
  <div id="sidebar" class="sidebar">
      <nav aria-labelledby="flush-headingEleven"><button role="button" aria-label="close menu" alt="close menu" aria-expanded="true" aria-controls="sidebar" class="collapse-toggle" data-collapse="Collapse " data-episodes="Episodes ">
          <i class="search-icon" data-feather="x" role="img"></i>
        </button>
        <div class="sidebar-inner">
          <div class="row mobile-row" id="theme-row-mobile">
            <div class="col" id="theme-selector">
              <li class="nav-item dropdown" id="theme-button-list">
                <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
                  <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><span class="d-lg-none ms-1" id="bd-theme-text">Toggle Theme</span>
                </button>
                <ul class="dropdown-menu dropdown-menu-right" aria-labelledby="bd-theme-text">
<li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                      Light
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                      Dark
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                      <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                      Auto
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                </ul>
</li>
            </div>
          </div>
          <div class="row mobile-row">
            <div class="col">
              <div class="sidenav-view-selector">
                <div class="accordion accordion-flush" id="accordionFlush9">
                  <div class="accordion-item">
                    <h2 class="accordion-header" id="flush-headingNine">
                      <button class="accordion-button collapsed" id="instructor" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseNine" aria-expanded="false" aria-controls="flush-collapseNine">
                        <i id="eye" aria-hidden="true" class="icon" data-feather="eye"></i> Learner View
                      </button>
                    </h2>
                    <div id="flush-collapseNine" class="accordion-collapse collapse" aria-labelledby="flush-headingNine" data-bs-parent="#accordionFlush2">
                      <div class="accordion-body">
                        <a href="instructor/aio.html">Instructor View</a>
                      </div>
                    </div>
                  </div>
<!--/div.accordion-item-->
                </div>
<!--/div.accordion-flush-->
              </div>
<!--div.sidenav-view-selector -->
            </div>
<!--/div.col -->

            <hr>
</div>
<!--/div.mobile-row -->

          <div class="accordion accordion-flush" id="accordionFlush11">
            <div class="accordion-item">

              <button id="chapters" class="accordion-button show" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseEleven" aria-expanded="false" aria-controls="flush-collapseEleven">
                <h2 class="accordion-header chapters" id="flush-headingEleven">
                  EPISODES
                </h2>
              </button>
              <div id="flush-collapseEleven" class="accordion-collapse show collapse" aria-labelledby="flush-headingEleven" data-bs-parent="#accordionFlush11">

                <div class="accordion-body">
                  <div class="accordion accordion-flush" id="accordionFlush1">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading1">
        <a href="index.html">Summary and Setup</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush2">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading2">
        <a href="00-intro.html">1. Before we Start</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush3">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading3">
        <a href="01-intro-to-r.html">2. Introduction to R</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush4">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading4">
        <a href="02-starting-with-data.html">3. Starting with Data</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush5">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading5">
        <a href="03-dplyr.html">4. Data Wrangling with dplyr</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush6">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading6">
        <a href="04-tidyr.html">5. Data Wrangling with tidyr</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush7">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading7">
        <a href="05-ggplot2.html">6. Data Visualisation with ggplot2</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush8">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading8">
        <a href="06-rmarkdown.html">7. Getting Started with R Markdown (optional)</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

                </div>
              </div>
            </div>

            <hr class="half-width">
<div class="accordion accordion-flush lesson-resources" id="accordionFlush12">
              <div class="accordion-item">
                <h2 class="accordion-header" id="flush-headingTwelve">
                  <button class="accordion-button collapsed" id="lesson-resources" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseTwelve" aria-expanded="false" aria-controls="flush-collapseTwelve">
                    RESOURCES
                  </button>
                </h2>
                <div id="flush-collapseTwelve" class="accordion-collapse collapse" aria-labelledby="flush-headingTwelve" data-bs-parent="#accordionFlush12">
                  <div class="accordion-body">
                    <ul>
<li>
                        <a href="key-points.html">Key Points</a>
                      </li>
                      <li>
                        <a href="reference.html#glossary">Glossary</a>
                      </li>
                      <li>
                        <a href="profiles.html">Learner Profiles</a>
                      </li>
                      <li><a href="reference.html"></a></li>
                    </ul>
</div>
                </div>
              </div>
            </div>
            <hr class="half-width lesson-resources">
<a href="aio.html">See all in one page</a>


            <hr class="d-none d-sm-block d-md-none">
<div class="d-grid gap-1">

            </div>
          </div>
<!-- /div.accordion -->
        </div>
<!-- /div.sidebar-inner -->
      </nav>
</div>
<!-- /div.sidebar -->
  </div>
<!-- /div.sidebar-col -->
<!-- END:   inst/pkgdown/templates/navbar.html-->

        <!-- START: inst/pkgdown/templates/content-extra.html -->
  <div class="col-xl-8 col-lg-12 primary-content">
    <main id="main-content" class="main-content"><div class="container lesson-content">
        
        
<section id="aio-00-intro"><p>Content from <a href="00-intro.html">Before we Start</a></p>
<hr>
<p>Last updated on 2025-11-11 |

        <a href="https://github.com/EngineeringForDemocracy/r-election-workers/edit/main/episodes/00-intro.Rmd" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How to find your way around RStudio?</li>
<li>How to interact with R?</li>
<li>How to manage your environment?</li>
<li>How to install packages?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Install latest version of R.</li>
<li>Install latest version of RStudio.</li>
<li>Navigate the RStudio GUI.</li>
<li>Install additional packages using the packages tab.</li>
<li>Install additional packages using R code.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="what-is-r-what-is-rstudio">What is R? What is RStudio?<a class="anchor" aria-label="anchor" href="#what-is-r-what-is-rstudio"></a>
</h2>
<hr class="half-width">
<p>The term “<code>R</code>” is used to refer to both the programming
language and the software that interprets the scripts written using
it.</p>
<p><a href="https://rstudio.com" class="external-link">RStudio</a> is currently a very popular
way to not only write your R scripts but also to interact with the R
software. To function correctly, RStudio needs R and therefore both need
to be installed on your computer.</p>
<p>To make it easier to interact with R, we will use RStudio. RStudio is
the most popular IDE (Integrated Development Environment) for R. An IDE
is a piece of software that provides tools to make programming
easier.</p>
<p>You can also use the R Presentations feature to present your work in
an HTML5 presentation mixing Markdown and R code. You can display these
within R Studio or your browser. There are many options for customizing
your presentation slides, including an option for showing La-TeX
equations. This can help you collaborate with others and also has an
application in teaching and classroom use.</p>
</section><section><h2 class="section-heading" id="why-learn-r">Why learn R?<a class="anchor" aria-label="anchor" href="#why-learn-r"></a>
</h2>
<hr class="half-width">
<div class="section level3">
<h3 id="r-does-not-involve-lots-of-pointing-and-clicking-and-thats-a-good-thing">R does not involve lots of pointing and clicking, and that’s a good
thing<a class="anchor" aria-label="anchor" href="#r-does-not-involve-lots-of-pointing-and-clicking-and-thats-a-good-thing"></a>
</h3>
<p>The learning curve might be steeper than with other software but with
R, the results of your analysis do not rely on remembering a succession
of pointing and clicking, but instead on a series of written commands,
and that’s a good thing! So, if you want to redo your analysis because
you collected more data, you don’t have to remember which button you
clicked in which order to obtain your results; you just have to run your
script again.</p>
<p>Working with scripts makes the steps you used in your analysis clear,
and the code you write can be inspected by someone else who can give you
feedback and spot mistakes.</p>
<p>Working with scripts forces you to have a deeper understanding of
what you are doing, and facilitates your learning and comprehension of
the methods you use.</p>
</div>
<div class="section level3">
<h3 id="r-code-is-great-for-reproducibility">R code is great for reproducibility<a class="anchor" aria-label="anchor" href="#r-code-is-great-for-reproducibility"></a>
</h3>
<p>Reproducibility is when someone else (including your future self) can
obtain the same results from the same dataset when using the same
analysis.</p>
<p>R integrates with other tools to generate manuscripts from your code.
If you collect more data, or fix a mistake in your dataset, the figures
and the statistical tests in your manuscript are updated
automatically.</p>
<p>An increasing number of journals and funding agencies expect analyses
to be reproducible, so knowing R will give you an edge with these
requirements.</p>
<p>To further support reproducibility and transparency, there are also
packages that help you with dependency management: keeping track of
which packages we are loading and how they depend on the package version
you are using. This helps you make sure existing workflows work
consistently and continue doing what they did before.</p>
<p>Packages like renv let you “save” and “load” the state of your
project library, also keeping track of the package version you use and
the source it can be retrieved from.</p>
</div>
<div class="section level3">
<h3 id="r-is-interdisciplinary-and-extensible">R is interdisciplinary and extensible<a class="anchor" aria-label="anchor" href="#r-is-interdisciplinary-and-extensible"></a>
</h3>
<p>With 10,000+ packages that can be installed to extend its
capabilities, R provides a framework that allows you to combine
statistical approaches from many scientific disciplines to best suit the
analytical framework you need to analyze your data. For instance, R has
packages for image analysis, GIS, time series, population genetics, and
a lot more.</p>
</div>
<div class="section level3">
<h3 id="r-works-on-data-of-all-shapes-and-sizes">R works on data of all shapes and sizes<a class="anchor" aria-label="anchor" href="#r-works-on-data-of-all-shapes-and-sizes"></a>
</h3>
<p>The skills you learn with R scale easily with the size of your
dataset. Whether your dataset has hundreds or millions of lines, it
won’t make much difference to you.</p>
<p>R is designed for data analysis. It comes with special data
structures and data types that make handling of missing data and
statistical factors convenient.</p>
<p>R can connect to spreadsheets, databases, and many other data
formats, on your computer or on the web.</p>
</div>
<div class="section level3">
<h3 id="r-produces-high-quality-graphics">R produces high-quality graphics<a class="anchor" aria-label="anchor" href="#r-produces-high-quality-graphics"></a>
</h3>
<p>The plotting functionalities in R are endless, and allow you to
adjust any aspect of your graph to convey most effectively the message
from your data.</p>
</div>
<div class="section level3">
<h3 id="r-has-a-large-and-welcoming-community">R has a large and welcoming community<a class="anchor" aria-label="anchor" href="#r-has-a-large-and-welcoming-community"></a>
</h3>
<p>Thousands of people use R daily. Many of them are willing to help you
through mailing lists and websites such as <a href="https://stackoverflow.com/" class="external-link">Stack Overflow</a>, or on the <a href="https://community.rstudio.com/" class="external-link">RStudio community</a>. Questions
which are backed up with <a href="https://www.tidyverse.org/help/" class="external-link">short, reproducible code
snippets</a> are more likely to attract knowledgeable responses.</p>
</div>
<div class="section level3">
<h3 id="not-only-is-r-free-but-it-is-also-open-source-and-cross-platform">Not only is R free, but it is also open-source and
cross-platform<a class="anchor" aria-label="anchor" href="#not-only-is-r-free-but-it-is-also-open-source-and-cross-platform"></a>
</h3>
<p>Anyone can inspect the source code to see how R works. Because of
this transparency, there is less chance for mistakes, and if you (or
someone else) find some, you can report and fix bugs.</p>
<p>Because R is open source and is supported by a large community of
developers and users, there is a very large selection of third-party
add-on packages which are freely available to extend R’s native
capabilities.</p>
<figure><div class="row">
<div class="column">
<figure><img src="fig/r-manual.jpeg" alt="RStudio extends what R can do, and makes it easier to write R code and interact with R." width="100%" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure>
</div>
<div class="column">
<figure><img src="fig/r-automatic.jpeg" alt="automatic car gear shift representing the ease of RStudio" width="100%" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure>
</div>
<p>:::::</p>
<figcaption><p>RStudio extends what R can do, and makes it easier to write R code
and interact with R.
<a href="https://unsplash.com/photos/D19rXKDUPYM" class="external-link">Left photo credit</a>;
<a href="https://unsplash.com/photos/Wec3M4dY_LE" class="external-link">Right photo
credit</a>.</p>
</figcaption>
</div>
</figure>
</div>
<div class="section level2">
<h2 id="a-tour-of-rstudio">A tour of RStudio<a class="anchor" aria-label="anchor" href="#a-tour-of-rstudio"></a>
</h2>
</div>
<div class="section level2">
<h2 id="knowing-your-way-around-rstudio">Knowing your way around RStudio<a class="anchor" aria-label="anchor" href="#knowing-your-way-around-rstudio"></a>
</h2>
<p>Let’s start by learning about <a href="https://www.rstudio.com/" class="external-link">RStudio</a>, which is an Integrated
Development Environment (IDE) for working with R.</p>
<p>The RStudio IDE open-source product is free under the <a href="https://www.gnu.org/licenses/agpl-3.0.en.html" class="external-link">Affero General
Public License (AGPL) v3</a>. The RStudio IDE is also available with a
commercial license and priority email support from RStudio, Inc.</p>
<p>We will use the RStudio IDE to write code, navigate the files on our
computer, inspect the variables we create, and visualize the plots we
generate. RStudio can also be used for other things (e.g., version
control, developing packages, writing Shiny apps) that we will not cover
during the workshop.</p>
<p>One of the advantages of using RStudio is that all the information
you need to write code is available in a single window. Additionally,
RStudio provides many shortcuts, auto completion, and highlighting for
the major file types you use while developing in R. RStudio makes typing
easier and less error-prone.</p>
</div>
<div class="section level2">
<h2 id="getting-set-up">Getting set up<a class="anchor" aria-label="anchor" href="#getting-set-up"></a>
</h2>
<p>It is good practice to keep a set of related data, analyses, and text
self-contained in a single folder called the <strong>working
directory</strong>. All of the scripts within this folder can then use
<em>relative paths</em> to files. Relative paths indicate where inside
the project a file is located (as opposed to absolute paths, which point
to where a file is on a specific computer). Working this way makes it a
lot easier to move your project around on your computer and share it
with others without having to directly modify file paths in the
individual scripts.</p>
<p>RStudio provides a helpful set of tools to do this through its
“Projects” interface, which not only creates a working directory for you
but also remembers its location (allowing you to quickly navigate to
it). The interface also (optionally) preserves custom settings and open
files to make it easier to resume work after a break.</p>
<div class="section level3">
<h3 id="create-a-new-project">Create a new project<a class="anchor" aria-label="anchor" href="#create-a-new-project"></a>
</h3>
<ul>
<li>Under the <code>File</code> menu, click on <code>New project</code>,
choose <code>New directory</code>, then <code>New project</code>
</li>
<li>Enter a name for this new folder (or “directory”) and choose a
convenient location for it. This will be your <strong>working
directory</strong> for the rest of the day (e.g.,
<code>~/data-carpentry</code>)</li>
<li>Click on <code>Create project</code>
</li>
<li>Create a new file where we will type our scripts. Go to File &gt;
New File &gt; R script. Click the save icon on your toolbar and save
your script as “<code>script.R</code>”.</li>
</ul>
<p>The simplest way to open an RStudio project once it has been created
is to navigate through your files to where the project was saved and
double click on the <code>.Rproj</code> (blue cube) file. This will open
RStudio and start your R session in the <strong>same</strong> directory
as the <code>.Rproj</code> file. All your data, plots and scripts will
now be relative to the project directory. RStudio projects have the
added benefit of allowing you to open multiple projects at the same time
each open to its own project directory. This allows you to keep multiple
projects open without them interfering with each other.</p>
</div>
<div class="section level3">
<h3 id="the-rstudio-interface">The RStudio Interface<a class="anchor" aria-label="anchor" href="#the-rstudio-interface"></a>
</h3>
<p>Let’s take a quick tour of RStudio.</p>
<figure><img src="fig/R_00_Rstudio_01.png" alt="Screenshot of the RStudio_startup screen" class="figure mx-auto d-block"></figure><p>RStudio is divided into four “panes”. The placement of these panes
and their content can be customized (see menu, Tools -&gt; Global
Options -&gt; Pane Layout).</p>
<p>The Default Layout is:</p>
<ul>
<li>Top Left - <strong>Source</strong>: your scripts and documents</li>
<li>Bottom Left - <strong>Console</strong>: what R would look and be
like without RStudio</li>
<li>Top Right - <strong>Environment/History</strong>: look here to see
what you have done</li>
<li>Bottom Right - <strong>Files</strong> and more: see the contents of
the project/working directory here, like your Script.R file</li>
</ul>
</div>
<div class="section level3">
<h3 id="organizing-your-working-directory">Organizing your working directory<a class="anchor" aria-label="anchor" href="#organizing-your-working-directory"></a>
</h3>
<p>Using a consistent folder structure across your projects will help
keep things organized and make it easy to find/file things in the
future. This can be especially helpful when you have multiple projects.
In general, you might create directories (folders) for
<strong>scripts</strong>, <strong>data</strong>, and
<strong>documents</strong>. Here are some examples of suggested
directories:</p>
<ul>
<li>
<strong><code>data/</code></strong> Use this folder to store your
raw data and intermediate data sets. For the sake of transparency and <a href="https://en.wikipedia.org/wiki/Provenance" class="external-link">provenance</a>, you
should <em>always</em> keep a copy of your raw data accessible and do as
much of your data cleanup and pre-processing programmatically (i.e.,
with scripts, rather than manually) as possible.</li>
<li>
<strong><code>data_output/</code></strong> When you need to modify
your raw data, it might be useful to store the modified versions of the
data sets in a different folder.</li>
<li>
<strong><code>documents/</code></strong> Used for outlines, drafts,
and other text.</li>
<li>
<strong><code>fig_output/</code></strong> This folder can store the
graphics that are generated by your scripts.</li>
<li>
<strong><code>scripts/</code></strong> A place to keep your R
scripts for different analyses or plotting.</li>
</ul>
<p>You may want additional directories or sub directories depending on
your project needs, but these should form the backbone of your working
directory.</p>
<figure><img src="fig/rstudio_project_files.jpeg" alt="Example of a working directory structure" class="figure mx-auto d-block"></figure>
</div>
<div class="section level3">
<h3 id="the-working-directory">The working directory<a class="anchor" aria-label="anchor" href="#the-working-directory"></a>
</h3>
<p>The working directory is an important concept to understand. It is
the place where R will look for and save files. When you write code for
your project, your scripts should refer to files in relation to the root
of your working directory and only to files within this structure.</p>
<p>Using RStudio projects makes this easy and ensures that your working
directory is set up properly. If you need to check it, you can use
<code>getwd()</code>. If for some reason your working directory is not
the same as the location of your RStudio project, it is likely that you
opened an R script or RMarkdown file <strong>not</strong> your
<code>.Rproj</code> file. You should close out of RStudio and open the
<code>.Rproj</code> file by double clicking on the blue cube! If you
ever need to modify your working directory in a script,
<code>setwd('my/path')</code> changes the working directory. This should
be used with caution since it makes analyses hard to share across
devices and with other users.</p>
</div>
<div class="section level3">
<h3 id="downloading-the-data-and-getting-set-up">Downloading the data and getting set up<a class="anchor" aria-label="anchor" href="#downloading-the-data-and-getting-set-up"></a>
</h3>
<p>For this lesson we will use the following folders in our working
directory: <strong><code>data/</code></strong> and
<strong><code>fig_output/</code></strong>. Let’s write them all in
lowercase to be consistent. We can create them using the RStudio
interface by clicking on the “New Folder” button in the file pane
(bottom right), or directly from R by typing at console:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">dir.create</span><span class="op">(</span><span class="st">"data"</span><span class="op">)</span></span>
<span><span class="fu">dir.create</span><span class="op">(</span><span class="st">"fig_output"</span><span class="op">)</span></span></code></pre>
</div>
<p>You can either download the data used for this lesson from GitHub or
with R.</p>
<div class="section level4">
<h4 id="check-in-dataset">Check-In Dataset:<a class="anchor" aria-label="anchor" href="#check-in-dataset"></a>
</h4>
<p>You can either copy the data from <a href="https://raw.githubusercontent.com/EngineeringForDemocracy/data-empowerment/main/episodes/data/checkin_data.csv" class="external-link">GitHub</a>
and paste it into a file called <code>checkin_data.csv</code> in the
<code>data/</code> directory or copy-paste the below code chunk into
your terminal:</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">download.file</span><span class="op">(</span></span>
<span>  <span class="st">"https://raw.githubusercontent.com/EngineeringForDemocracy/data-empowerment/main/episodes/data/checkin_data.csv"</span>,</span>
<span>  <span class="st">"data/checkin_data.csv"</span>, mode <span class="op">=</span> <span class="st">"wb"</span></span>
<span>  <span class="op">)</span></span></code></pre>
</div>
</div>
<div class="section level4">
<h4 id="check-in-plotting-dataset">Check-In Plotting Dataset:<a class="anchor" aria-label="anchor" href="#check-in-plotting-dataset"></a>
</h4>
<p>You can either copy the data from this <a href="https://raw.githubusercontent.com/EngineeringForDemocracy/data-empowerment/main/episodes/data/checkin_sample_plotting.csv" class="external-link">GitHub</a>
and paste it into a file called <code>checkin_sample_plotting.csv</code>
in the <code>data/</code> directory or copy-paste the below code chunk
into your terminal:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">download.file</span><span class="op">(</span></span>
<span>  <span class="st">"https://raw.githubusercontent.com/EngineeringForDemocracy/data-empowerment/main/episodes/data/checkin_sample_plotting.csv"</span>,</span>
<span>  <span class="st">"data/checkin_sample_plotting.csv"</span>, mode <span class="op">=</span> <span class="st">"wb"</span></span>
<span>  <span class="op">)</span></span></code></pre>
</div>
</div>
<div class="section level4">
<h4 id="messy-dataset">Messy Dataset:<a class="anchor" aria-label="anchor" href="#messy-dataset"></a>
</h4>
<p>You can either copy the data from this <a href="https://raw.githubusercontent.com/EngineeringForDemocracy/data-empowerment/main/episodes/data/messy_data.csv" class="external-link">GitHub
link</a> and paste it into a file called <code>messy_data.csv</code> in
the <code>data/</code> directory or copy-paste the below code chunk into
your terminal:</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">download.file</span><span class="op">(</span></span>
<span>  <span class="st">"https://raw.githubusercontent.com/EngineeringForDemocracy/data-empowerment/main/episodes/data/messy_data.csv"</span>,</span>
<span>  <span class="st">"messy_data.csv"</span>, mode <span class="op">=</span> <span class="st">"wb"</span></span>
<span>  <span class="op">)</span></span></code></pre>
</div>
</div>
<div class="section level4">
<h4 id="game-of-thrones-dataset">Game of Thrones Dataset:<a class="anchor" aria-label="anchor" href="#game-of-thrones-dataset"></a>
</h4>
<p>You can either copy the data from this <a href="https://raw.githubusercontent.com/EngineeringForDemocracy/data-empowerment/main/episodes/data/voting_GoT.csv" class="external-link">GitHub
link</a> and paste it into a file called <code>voting_GoT.csv</code> in
the <code>data/</code> directory or copy-paste the below code chunk into
your terminal:</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">download.file</span><span class="op">(</span></span>
<span>  <span class="st">"https://raw.githubusercontent.com/EngineeringForDemocracy/data-empowerment/main/episodes/data/voting_GoT.csv"</span>,</span>
<span>  <span class="st">"data/voting_GoT.csv"</span>, mode <span class="op">=</span> <span class="st">"wb"</span></span>
<span>  <span class="op">)</span></span></code></pre>
</div>
<p>You can either copy the data from this <a href="https://raw.githubusercontent.com/EngineeringForDemocracy/data-empowerment/main/episodes/data/polygons_GoT.geojson" class="external-link">GitHub
link</a> and paste it into a file called
<code>polygons_GoT.geojson</code> in the <code>data/</code> directory or
copy-paste the below code chunk into your terminal:</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">download.file</span><span class="op">(</span></span>
<span>  <span class="st">"https://raw.githubusercontent.com/EngineeringForDemocracy/data-empowerment/main/episodes/data/polygons_GoT.geojson"</span>,</span>
<span>  <span class="st">"polygons_GoT.geojson"</span>, mode <span class="op">=</span> <span class="st">"wb"</span></span>
<span>  <span class="op">)</span></span></code></pre>
</div>
</div>
<div class="section level4">
<h4 id="json-check-in-dataset">JSON Check-In Dataset:<a class="anchor" aria-label="anchor" href="#json-check-in-dataset"></a>
</h4>
<p>You can either copy the data from this <a href="https://raw.githubusercontent.com/EngineeringForDemocracy/data-empowerment/main/episodes/data/checkin_snippet.json" class="external-link">GitHub
link</a> and paste it into a file called
<code>checkin_snippet.json</code> in the <code>data/</code> directory or
copy-paste the below code chunk into your terminal:</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">download.file</span><span class="op">(</span></span>
<span>  <span class="st">"https://raw.githubusercontent.com/EngineeringForDemocracy/data-empowerment/main/episodes/data/checkin_snippet.json"</span>,</span>
<span>  <span class="st">"data/checkin_snippet.json"</span>, mode <span class="op">=</span> <span class="st">"wb"</span></span>
<span>  <span class="op">)</span></span></code></pre>
</div>
</div>
</div>
</div>
<div class="section level2">
<h2 id="interacting-with-r">Interacting with R<a class="anchor" aria-label="anchor" href="#interacting-with-r"></a>
</h2>
<p>The basis of programming is that we write down instructions for the
computer to follow, and then we tell the computer to follow those
instructions. We write, or <em>code</em>, instructions in R because it
is a common language that both the computer and we can understand. We
call the instructions <em>commands</em> and we tell the computer to
follow the instructions by <em>executing</em> (also called
<em>running</em>) those commands.</p>
<p>There are two main ways of interacting with R: by using the console
or by using script files (plain text files that contain your code). The
console pane (in RStudio, the bottom left panel) is the place where
commands written in the R language can be typed and executed immediately
by the computer. It is also where the results will be shown for commands
that have been executed. You can type commands directly into the console
and press <kbd>Enter</kbd> to execute those commands, but they will be
forgotten when you close the session.</p>
<p>Because we want our code and workflow to be reproducible, it is
better to type the commands we want in the script editor and save the
script. This way, there is a complete record of what we did, and anyone
(including our future selves!) can easily replicate the results on their
computer.</p>
<p>RStudio allows you to execute commands directly from the script
editor by using the <kbd>Ctrl</kbd> + <kbd>Enter</kbd> shortcut (on Mac,
<kbd>Cmd</kbd> + <kbd>Return</kbd> will work). The command on the
current line in the script (indicated by the cursor) or all of the
commands in selected text will be sent to the console and executed when
you press <kbd>Ctrl</kbd> + <kbd>Enter</kbd>. If there is information in
the console you do not need anymore, you can clear it with
<kbd>Ctrl</kbd> + <kbd>L</kbd>. You can find other keyboard shortcuts in
this <a href="https://raw.githubusercontent.com/rstudio/cheatsheets/main/rstudio-ide.pdf" class="external-link">RStudio
cheatsheet about the RStudio IDE</a>.</p>
<p>At some point in your analysis, you may want to check the content of
a variable or the structure of an object without necessarily keeping a
record of it in your script. You can type these commands and execute
them directly in the console. RStudio provides the <kbd>Ctrl</kbd> +
<kbd>1</kbd> and <kbd>Ctrl</kbd> + <kbd>2</kbd> shortcuts allow you to
jump between the script and the console panes.</p>
<p>If R is ready to accept commands, the R console shows a
<code>&gt;</code> prompt. If R receives a command (by typing,
copy-pasting, or sent from the script editor using <kbd>Ctrl</kbd> +
<kbd>Enter</kbd>), R will try to execute it and, when ready, will show
the results and come back with a new <code>&gt;</code> prompt to wait
for new commands.</p>
<p>If R is still waiting for you to enter more text, the console will
show a <code>+</code> prompt. It means that you haven’t finished
entering a complete command. This is likely because you have not
‘closed’ a parenthesis or quotation, i.e. you don’t have the same number
of left-parentheses as right-parentheses or the same number of opening
and closing quotation marks. When this happens, and you thought you
finished typing your command, click inside the console window and press
<kbd>Esc</kbd>; this will cancel the incomplete command and return you
to the <code>&gt;</code> prompt. You can then proofread the command(s)
you entered and correct the error.</p>
</div>
<div class="section level2">
<h2 id="installing-additional-packages-using-the-packages-tab">Installing additional packages using the packages tab<a class="anchor" aria-label="anchor" href="#installing-additional-packages-using-the-packages-tab"></a>
</h2>
<p>In addition to the core R installation, there are in excess of 10,000
additional packages which can be used to extend the functionality of R.
Many of these have been written by R users and have been made available
in central repositories, like the one hosted at CRAN, for anyone to
download and install into their own R environment. You should have
already installed the packages ‘ggplot2’ and ’dplyr. If you have not,
please do so now using these instructions.</p>
<p>You can see if you have a package installed by looking in the
<code>packages</code> tab (on the lower-right by default). You can also
type the command <code>installed.packages()</code> into the console and
examine the output.</p>
<figure><img src="fig/packages_pane.png" alt="Screenshot of Packages pane" class="figure mx-auto d-block"></figure><p>Additional packages can be installed from the ‘packages’ tab. On the
packages tab, click the ‘Install’ icon and start typing the name of the
package you want in the text box. As you type, packages matching your
starting characters will be displayed in a drop-down list so that you
can select them.</p>
<figure><img src="fig/R_00_Rstudio_03.png" alt="Screenshot of Install Packages Window" class="figure mx-auto d-block"></figure><p>At the bottom of the Install Packages window is a check box to
‘Install’ dependencies. This is ticked by default, which is usually what
you want. Packages can (and do) make use of functionality built into
other packages, so for the functionality contained in the package you
are installing to work properly, there may be other packages which have
to be installed with them. The ‘Install dependencies’ option makes sure
that this happens.</p>
<div id="exercise" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="exercise" class="callout-inner">
<h3 class="callout-title">Exercise</h3>
<div class="callout-content">
<p>Use both the Console and the Packages tab to confirm that you have
the tidyverse installed.</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" data-bs-parent="#accordionSolution1" aria-labelledby="headingSolution1">
<div class="accordion-body">
<p>Scroll through packages tab down to ‘tidyverse’. You can also type a
few characters into the searchbox. The ‘tidyverse’ package is really a
package of packages, including ‘ggplot2’ and ‘dplyr’, both of which
require other packages to run correctly. All of these packages will be
installed automatically. Depending on what packages have previously been
installed in your R environment, the install of ‘tidyverse’ could be
very quick or could take several minutes. As the install proceeds,
messages relating to its progress will be written to the console. You
will be able to see all of the packages which are actually being
installed.</p>
</div>
</div>
</div>
</div>
<p>Because the install process accesses the CRAN repository, you will
need an Internet connection to install packages.</p>
<p>It is also possible to install packages from other repositories, as
well as Github or the local file system, but we won’t be looking at
these options in this lesson.</p>
</div>
<div class="section level2">
<h2 id="installing-additional-packages-using-r-code">Installing additional packages using R code<a class="anchor" aria-label="anchor" href="#installing-additional-packages-using-r-code"></a>
</h2>
<p>If you were watching the console window when you started the install
of ‘tidyverse’, you may have noticed that the line</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">install.packages</span><span class="op">(</span><span class="st">"tidyverse"</span><span class="op">)</span></span></code></pre>
</div>
<p>was written to the console before the start of the installation
messages.</p>
<p>You could also have installed the
<strong><code>tidyverse</code></strong> packages by running this command
directly at the R terminal.</p>
<p>We will be using additional packages to manage paths, plots, json
files, and shape files. We will discuss these in more detail in a later
episode, but we will install them now in the console:</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">install.packages</span><span class="op">(</span><span class="st">"here"</span>, <span class="st">"lattice"</span>, <span class="st">"sf"</span>, <span class="st">"jsonlite"</span><span class="op">)</span></span></code></pre>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<span class="callout-header">Key Points</span>
<div class="callout-inner">
<div class="callout-content">
<ul>
<li>Use RStudio to write and run R programs.</li>
<li>Use <code>install.packages()</code> to install packages
(libraries).</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</div></section></section><section id="aio-01-intro-to-r"><p>Content from <a href="01-intro-to-r.html">Introduction to R</a></p>
<hr>
<p>Last updated on 2025-11-11 |

        <a href="https://github.com/EngineeringForDemocracy/r-election-workers/edit/main/episodes/01-intro-to-r.Rmd" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>What data types are available in R?</li>
<li>What is an object?</li>
<li>How can objects of different data types be assigned to names?</li>
<li>What arithmetic and logical operators can be used?</li>
<li>How can subsets be extracted from vectors?</li>
<li>How does R treat missing values?</li>
<li>How can we deal with missing values in R?</li>
<li>How can we work with dates and times in R?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Define the following terms as they relate to R: object, assign,
call, function, arguments, options.</li>
<li>Assign values to names in R.</li>
<li>Learn how to name objects.</li>
<li>Use comments to inform script.</li>
<li>Solve simple arithmetic operations in R.</li>
<li>Call functions and use arguments to change their default
options.</li>
<li>Inspect the content of vectors and manipulate their content.</li>
<li>Subset values from vectors.</li>
<li>Analyze vectors with missing data.</li>
<li>Work with dates and times in R using proper data types.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="creating-objects-in-r">Creating Objects in R<a class="anchor" aria-label="anchor" href="#creating-objects-in-r"></a>
</h2>
<hr class="half-width">
<p>You can get output from R simply by typing math in the console:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fl">3</span> <span class="op">+</span> <span class="fl">5</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 8</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fl">12</span> <span class="op">/</span> <span class="fl">7</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 1.714286</code></pre>
</div>
<p>Everything that exists in <code>R</code> is an objects: from simple
numerical values, to strings, to more complex objects like vectors,
matrices, and lists. Even expressions and functions are objects in
<code>R</code>.</p>
<p>However, to do useful and interesting things, we need to name
objects. To do so, we need to give a <em>name</em> followed by the
assignment operator <code>&lt;-</code>, and the <em>object</em> we want
to be named:</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">num_precincts</span> <span class="op">&lt;-</span> <span class="fl">5</span></span></code></pre>
</div>
<p><code>&lt;-</code> is the assignment operator. It assigns values
(objects) on the right to names (also called <em>symbols</em>) on the
left. So, after executing <code>x &lt;- 3</code>, the value of
<code>x</code> is <code>3</code>. The arrow can be read as 3
<strong>goes into</strong> <code>x</code>. For historical reasons, you
can also use <code>=</code> for assignments, but not in every context.
Because of the <a href="https://blog.revolutionanalytics.com/2008/12/use-equals-or-arrow-for-assignment.html" class="external-link">slight
differences</a> in syntax, it is good practice to always use
<code>&lt;-</code> for assignments. More generally we prefer the
<code>&lt;-</code> syntax over <code>=</code> because it makes it clear
what direction the assignment is operating (left assignment), and it
increases the read-ability of the code.</p>
<p>In RStudio, typing <kbd>Alt</kbd> + <kbd>-</kbd> (push <kbd>Alt</kbd>
at the same time as the <kbd>-</kbd> key) will write <code>&lt;-</code>
in a single keystroke in a PC, while typing <kbd>Option</kbd> +
<kbd>-</kbd> (push <kbd>Option</kbd> at the same time as the
<kbd>-</kbd> key) does the same in a Mac.</p>
<p>Objects can be given any name such as <code>x</code>,
<code>current_temperature</code>, or <code>subject_id</code>. You want
your object names to be explicit and not too long. They cannot start
with a number (<code>2x</code> is not valid, but <code>x2</code> is). R
is case sensitive (e.g., <code>age</code> is different from
<code>Age</code>). There are some names that cannot be used because they
are the names of fundamental objects in R (e.g., <code>if</code>,
<code>else</code>, <code>for</code>, see <a href="https://stat.ethz.ch/R-manual/R-devel/library/base/html/Reserved.html" class="external-link">R’s
reserved words</a> for a complete list). In general, even if it’s
allowed, it’s best to not use them (e.g., <code>c</code>,
<code>T</code>, <code>mean</code>, <code>data</code>, <code>df</code>,
<code>weights</code>). If in doubt, check the help to see if the name is
already in use. It’s also best to avoid dots (<code>.</code>) within an
object name as in <code>my.dataset</code>. There are many objects in R
with dots in their names for historical reasons, but because dots have a
special meaning in R (for methods) and other programming languages, it’s
best to avoid them. The recommended writing style is called snake_case,
which implies using only lowercase letters and numbers and separating
each word with underscores (e.g., animals_weight, average_income). It is
also recommended to use nouns for object names, and verbs for function
names. It’s important to be consistent in the styling of your code
(where you put spaces, how you name objects, etc.). Using a consistent
coding style makes your code clearer to read for your future self and
yourcollaborators. In R, three popular style guides are <a href="https://google.github.io/styleguide/Rguide.xml" class="external-link">Google’s</a>, <a href="https://jef.works/R-style-guide/" class="external-link">Jean Fan’s</a> and the <a href="https://style.tidyverse.org/" class="external-link">tidyverse’s</a>. The tidyverse’s is
very comprehensive and may seem overwhelming at first. You can install
the <a href="https://github.com/jimhester/lintr" class="external-link"><strong><code>lintr</code></strong></a>
package to automatically check for issues in the styling of your
code.</p>
<div id="objects-vs.-variables" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<span class="callout-header">Callout</span>
<div id="objects-vs.-variables" class="callout-inner">
<h3 class="callout-title">Objects vs. Variables</h3>
<div class="callout-content">
<p>The naming of objects in <code>R</code> is somehow related to
<code>variables</code> in many other programming languages. In many
programming languages, a variable has three aspects: a name, a memory
location, and the current value stored in this location. <code>R</code>
abstracts from modifiable memory locations. In <code>R</code> we only
have objects which can be named. Depending on the context,
<code>name (of an object)</code> and <code>variable</code> can have
drastically different meanings. However, in this lesson, the two words
are used synonymously. For more information see: <a href="https://cran.r-project.org/doc/manuals/r-release/R-lang.html#Objects" class="external-link">https://cran.r-project.org/doc/manuals/r-release/R-lang.html#Objects</a></p>
</div>
</div>
</div>
<p>When assigning an value to a name, R does not print anything. You can
force R to print the value by using parentheses or by typing the object
name:</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">num_precincts</span> <span class="op">&lt;-</span> <span class="fl">5</span>    <span class="co"># doesn't print anything</span></span>
<span><span class="op">(</span><span class="va">num_precincts</span> <span class="op">&lt;-</span> <span class="fl">5</span><span class="op">)</span>  <span class="co"># putting parenthesis around the call prints the value of `area_hectares`</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 5</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">num_precincts</span>         <span class="co"># and so does typing the name of the object</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 5</code></pre>
</div>
<p>Now that R has <code>num_precincts</code> in memory, we can do
arithmetic with it. For instance, we may want to calculate the number of
registered voters (assuming there are 1500 voters per precinct):</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fl">1500</span> <span class="op">*</span> <span class="va">num_precincts</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 7500</code></pre>
</div>
<p>We can also change an the value assigned to an name by assigning it a
new one:</p>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">num_precincts</span> <span class="op">&lt;-</span> <span class="fl">10</span></span>
<span><span class="fl">1500</span> <span class="op">*</span> <span class="va">num_precincts</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 15000</code></pre>
</div>
<p>This means that assigning a value to one name does not change the
values of other names. For example, let’s name the number of voters
<code>num_voters</code>:</p>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">num_voters</span> <span class="op">&lt;-</span> <span class="fl">1500</span> <span class="op">*</span> <span class="va">num_precincts</span></span></code></pre>
</div>
<p>Next, let’s change (reassign) <code>num_precincts</code> to 50:</p>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">num_precincts</span> <span class="op">&lt;-</span> <span class="fl">50</span></span></code></pre>
</div>
<div id="exercise" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="exercise" class="callout-inner">
<h3 class="callout-title">Exercise</h3>
<div class="callout-content">
<p>What do you think is the current value of <code>num_voters</code>?
15000 or 75000?</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" data-bs-parent="#accordionSolution1" aria-labelledby="headingSolution1">
<div class="accordion-body">
<p>The value of <code>num_voters</code> is still 15000. This is because
you have not re-run the line
<code>num_voters &lt;- 1500 * num_precincts</code> since changing the
value of <code>num_precincts</code>.</p>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="comments">Comments<a class="anchor" aria-label="anchor" href="#comments"></a>
</h2>
<hr class="half-width">
<p>All programming languages allow the programmer to include comments in
their code. Including comments to your code has many advantages: it
helps you explain your reasoning and it forces you to be tidy. A
commented code is also a great tool not only to your collaborators, but
to your future self. Comments are the key to a reproducible
analysis.</p>
<p>To do this in R we use the <code>#</code> character. Anything to the
right of the <code>#</code> sign and up to the end of the line is
treated as a comment and is ignored by R. You can start lines with
comments or include them after any code on the line.</p>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">num_precincts</span> <span class="op">&lt;-</span> <span class="fl">10</span>      <span class="co">#number of precincts</span></span>
<span><span class="va">num_voters</span> <span class="op">&lt;-</span> <span class="fl">1500</span> <span class="op">*</span> <span class="va">num_precincts</span>  <span class="co">#calculate the total number of voters</span></span>
<span><span class="va">num_voters</span>        <span class="co">#print the total number of voters</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 15000</code></pre>
</div>
<p>RStudio makes it easy to comment or uncomment a paragraph: after
selecting the lines you want to comment, press at the same time on your
keyboard <kbd>Ctrl</kbd> + <kbd>Shift</kbd> + <kbd>C</kbd>. If you only
want to comment out one line, you can put the cursor at any location of
that line (i.e. no need to select the whole line), then press
<kbd>Ctrl</kbd> + <kbd>Shift</kbd> + <kbd>C</kbd>.</p>
<div id="exercise-1" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="exercise-1" class="callout-inner">
<h3 class="callout-title">Exercise</h3>
<div class="callout-content">
<ol style="list-style-type: decimal">
<li><p>Create two variables <code>ballot_cost</code> and
<code>ballots_needed</code> and assign them values.</p></li>
<li><p>Create a third variable <code>total_cost</code> and give it a
value based on the current values of <code>ballot_cost</code> and
<code>ballots_needed</code>.</p></li>
<li><p>Show that changing the values of either <code>ballot_cost</code>
and <code>ballots_needed</code> does not affect the value of
<code>total_cost</code>.</p></li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Show me the solution </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" data-bs-parent="#accordionSolution2" aria-labelledby="headingSolution2">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb18">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#set the values of ballot_cost and ballots_needed</span></span>
<span><span class="va">ballot_cost</span> <span class="op">&lt;-</span> <span class="fl">0.0125</span></span>
<span><span class="va">ballots_needed</span> <span class="op">&lt;-</span> <span class="fl">2250</span></span>
<span></span>
<span><span class="co">#give total_cost a value</span></span>
<span><span class="va">total_cost</span> <span class="op">&lt;-</span> <span class="va">ballot_cost</span> <span class="op">*</span> <span class="va">ballots_needed</span></span>
<span></span>
<span><span class="co">#print current value of total_cost</span></span>
<span><span class="va">total_cost</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 28.125</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb20">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#change the values of ballot_cost and ballots_needed</span></span>
<span><span class="va">ballot_cost</span> <span class="op">&lt;-</span> <span class="fl">0.068</span></span>
<span><span class="va">ballots_needed</span> <span class="op">&lt;-</span> <span class="fl">3000</span></span>
<span></span>
<span><span class="co">#display the value of total_cost isn't changed</span></span>
<span><span class="va">total_cost</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 28.125</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="functions-and-their-arguments">Functions and Their Arguments<a class="anchor" aria-label="anchor" href="#functions-and-their-arguments"></a>
</h3>
<p>Functions are “canned scripts” that automate more complicated sets of
commands including operations assignments, etc. Many functions are
predefined, or can be made available by importing R <em>packages</em>
(more on that later). A function usually gets one or more inputs called
<em>arguments</em>. Functions often (but not always) return a
<em>value</em>. A typical example would be the function
<code>sqrt()</code>. The input (the argument) must be a number, and the
return value (in fact, the output) is the square root of that number.
Executing a function (‘running it’) is called <em>calling</em> the
function. An example of a function call is:</p>
<div class="codewrapper sourceCode" id="cb22">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">b</span> <span class="op">&lt;-</span> <span class="fu">sqrt</span><span class="op">(</span><span class="va">a</span><span class="op">)</span></span></code></pre>
</div>
<p>Here, the value of <code>a</code> is given to the <code>sqrt()</code>
function, the <code>sqrt()</code> function calculates the square root,
and returns the value which is then assigned to the name <code>b</code>.
This function is very simple, because it takes just one argument.</p>
<p>The return ‘value’ of a function need not be numerical (like that of
<code>sqrt()</code>), and it also does not need to be a single item: it
can be a set of things, or even a data set. We’ll see that when we read
data files into R.</p>
<p>Arguments can be anything, not only numbers or file names, but also
other objects. Exactly what each argument means differs per function,
and must be looked up in the documentation (see below). Some functions
take arguments which may either be specified by the user, or, if left
out, take on a <em>default</em> value: these are called
<em>options</em>. Options are typically used to alter the way the
function operates, such as whether it ignores ‘bad values’, or what
symbol to use in a plot. However, if you want something specific, you
can specify a value of your choice which will be used instead of the
default.</p>
<p>Using the total_cost we calculated above, let’s try a function that
can take multiple arguments: <code>round()</code>.</p>
<div class="codewrapper sourceCode" id="cb23">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">round</span><span class="op">(</span><span class="va">total_cost</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 28</code></pre>
</div>
<p>Here, we’ve called <code>round()</code> with just one argument,
<code>total_cost</code>, and it has returned the value <code>28</code>.
That’s because the default is to round to the nearest whole number. If
we want more digits we can see how to do that by getting information
about the <code>round</code> function. We can use
<code>args(round)</code> or look at the help for this function using
<code>?round</code>.</p>
<div class="codewrapper sourceCode" id="cb25">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">args</span><span class="op">(</span><span class="va">round</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="kw">function</span> <span class="op">(</span><span class="va">x</span>, <span class="va">digits</span> <span class="op">=</span> <span class="fl">0</span>, <span class="va">...</span><span class="op">)</span></span>
<span><span class="cn">NULL</span></span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb27">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">?</span><span class="va">round</span></span></code></pre>
</div>
<p>We see that if we want a different number of digits, we can type
<code>digits=2</code> or however many we want.</p>
<div class="codewrapper sourceCode" id="cb28">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">round</span><span class="op">(</span><span class="va">total_cost</span>, digits <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 28.12</code></pre>
</div>
<p>If you provide the arguments in the exact same order as they are
defined you don’t have to name them:</p>
<div class="codewrapper sourceCode" id="cb30">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">round</span><span class="op">(</span><span class="va">total_cost</span>, <span class="fl">2</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 28.12</code></pre>
</div>
<p>And if you do name the arguments, you can switch their order:</p>
<div class="codewrapper sourceCode" id="cb32">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">round</span><span class="op">(</span>digits <span class="op">=</span> <span class="fl">2</span>, x <span class="op">=</span> <span class="va">total_cost</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 28.12</code></pre>
</div>
<p>It’s good practice to put the non-optional arguments (like the number
you’re rounding) first in your function call, and to specify the names
of all optional arguments. If you don’t, someone reading your code might
have to look up the definition of a function with unfamiliar arguments
to understand what you’re doing.</p>
<div id="exercise-2" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="exercise-2" class="callout-inner">
<h3 class="callout-title">Exercise</h3>
<div class="callout-content">
<p>As you may have noticed, in both cases of rounding, the total_cost
rounded down. However, when calculating the total cost of something, you
should always round UP to the nearest dollar or cent.</p>
<p>For this exercise, type in <code>?round</code> at the console and
then look at the output in the Help panel. What other function similar
to <code>round</code> should be used instead? Apply this function to
round up to the nearest <em>dollar</em>.</p>
<p>Bonus: apply this function to round to the nearest <em>cent</em>.</p>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3"> Show me the solution </h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" data-bs-parent="#accordionSolution3" aria-labelledby="headingSolution3">
<div class="accordion-body">
<p>The <code>ceiling</code> function rounds up to the nearest
integer!</p>
<div class="codewrapper sourceCode" id="cb34">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ceiling</span><span class="op">(</span><span class="va">total_cost</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 29</code></pre>
</div>
<p>To use the function to round to the nearest cent, you can do the
following:</p>
<div class="codewrapper sourceCode" id="cb36">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ceiling</span><span class="op">(</span><span class="va">total_cost</span> <span class="op">*</span> <span class="fl">100</span><span class="op">)</span> <span class="op">/</span> <span class="fl">100</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 28.13</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="vectors-and-data-types">Vectors and Data Types<a class="anchor" aria-label="anchor" href="#vectors-and-data-types"></a>
</h2>
<hr class="half-width">
<p>A vector is the most common and basic data type in R, and is pretty
much the workhorse of R. A vector is composed by a series of values,
which can be either numbers, characters, or other data types. We can
assign a series of values to a vector using the <code>c()</code>
function. For example, we can create a vector of job type strings, and
we can create another vector storing numbers of votes at different
precincts</p>
<div class="codewrapper sourceCode" id="cb38">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">votes_per_precinct</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span><span class="fl">1000</span>, <span class="fl">4300</span>, <span class="fl">2340</span>, <span class="fl">7190</span><span class="op">)</span></span>
<span><span class="va">votes_per_precinct</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 1000 4300 2340 7190</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb40">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">job_types</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span><span class="st">"check-in"</span>, <span class="st">"check-out"</span>, <span class="st">"supervisor"</span><span class="op">)</span></span>
<span><span class="va">job_types</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "check-in"   "check-out"  "supervisor"</code></pre>
</div>
<p>The quotes around “check-in”, “check-out”, and “supervisor”are
essential here. Without the quotes, R will assume there are objects
called <code>check-in</code>, <code>check-out</code>, and
<code>supervisor</code>. Since these names don’t exist in R’s memory,
there will be an error message.</p>
<p>Additionally, you may notice there are no commas in-between the
thousands. In R, you <em>cannot</em> add commas in numbers, as R will
assume they are separate items in the list.</p>
<p>There are many functions that allow you to inspect the content of a
vector. <code>length()</code> tells you how many elements are in a
particular vector:</p>
<div class="codewrapper sourceCode" id="cb42">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">length</span><span class="op">(</span><span class="va">votes_per_precinct</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 4</code></pre>
</div>
<p>An important feature of a vector is that all of the elements are the
same type of data. The function <code>typeof()</code> indicates the type
of an object:</p>
<div class="codewrapper sourceCode" id="cb44">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">typeof</span><span class="op">(</span><span class="va">votes_per_precinct</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "double"</code></pre>
</div>
<p>The function <code>str()</code> provides an overview of the structure
of an object and its elements. It is a useful function when working with
large and complex objects:</p>
<div class="codewrapper sourceCode" id="cb46">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">str</span><span class="op">(</span><span class="va">votes_per_precinct</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code> num [1:4] 1000 4300 2340 7190</code></pre>
</div>
<p>You can use the <code>c()</code> function to add other elements to
your vector:</p>
<div class="codewrapper sourceCode" id="cb48">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">devices_per_precinct</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span><span class="fl">5</span>, <span class="fl">2</span><span class="op">)</span></span>
<span><span class="va">devices_per_precinct</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span><span class="va">devices_per_precinct</span>, <span class="fl">9</span><span class="op">)</span> <span class="co"># add to the end of the vector</span></span>
<span><span class="va">devices_per_precinct</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span><span class="fl">6</span>, <span class="va">devices_per_precinct</span><span class="op">)</span> <span class="co"># add to the beginning of the vector</span></span>
<span><span class="va">devices_per_precinct</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 6 5 2 9</code></pre>
</div>
<p>In the first line, we take the original vector
<code>devices_per_precinct</code>, add the value <code>9</code> to the
end of it, and save the result back into
<code>devices_per_precinct</code>. Then we add the value <code>6</code>
to the beginning, again saving the result back into
<code>devices_per_precinct</code>.</p>
<p>We can do this over and over again to grow a vector, or assemble a
data set. As we program, this may be useful to add results that we are
collecting or calculating.</p>
<p>An <strong>atomic vector</strong> is the simplest R <strong>data
type</strong> and is a linear vector of a single type. Above, we saw 2
of the 6 main <strong>atomic vector</strong> types that R uses:
<code>"character"</code> and <code>"numeric"</code> (or
<code>"double"</code>). These are the basic building blocks that all R
objects are built from. The other 4 <strong>atomic vector</strong> types
are:</p>
<ul>
<li>
<code>"logical"</code> for <code>TRUE</code> and <code>FALSE</code>
(the boolean data type)</li>
<li>
<code>"integer"</code> for integer numbers (e.g., <code>2L</code>,
the <code>L</code> indicates to R that it’s an integer)</li>
<li>
<code>"complex"</code> to represent complex numbers with real and
imaginary parts (e.g., <code>1 + 4i</code>) and that’s all we’re going
to say about them</li>
<li>
<code>"raw"</code> for bit-streams (we won’t be discussing this
further)</li>
</ul>
<div class="section level3">
<h3 id="date-types">Date Types<a class="anchor" aria-label="anchor" href="#date-types"></a>
</h3>
<p>Dates are a common data type that require special attention. In R,
dates can be represented in two ways:</p>
<ol style="list-style-type: decimal">
<li>As character strings (e.g., “2018-11-06 07:02:36”, “11/06/2018
07:02:36”)</li>
<li>As Date or POSIXct objects which are special data types for dates
and times</li>
</ol>
<p>When dates are stored as strings, they’re treated like any other
text:</p>
<div class="codewrapper sourceCode" id="cb50">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">checkin_times_as_strings</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span><span class="st">"2018-11-06 07:02:36"</span>, <span class="st">"2018-11-06 07:04:09"</span>, <span class="st">"2018-11-06 07:05:45"</span><span class="op">)</span></span>
<span><span class="fu">typeof</span><span class="op">(</span><span class="va">checkin_times_as_strings</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "character"</code></pre>
</div>
<p>However, storing dates as proper Date or POSIXct objects offers
several advantages: - You can perform arithmetic with dates (calculate
time differences) - You can extract components like month, year, or day
- You can easily format dates for display - You can sort dates
chronologically</p>
<p>To convert strings to Date or POSIXct objects, use the
<code>as.POSIXct()</code> function:</p>
<div class="codewrapper sourceCode" id="cb52">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#convert strings to POSIXct objects</span></span>
<span><span class="va">checkin_times</span> <span class="op">&lt;-</span> <span class="fu">as.POSIXct</span><span class="op">(</span><span class="va">checkin_times_as_strings</span>, format <span class="op">=</span> <span class="st">"%Y-%m-%d %H:%M:%S"</span><span class="op">)</span></span>
<span><span class="fu">typeof</span><span class="op">(</span><span class="va">checkin_times</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "double"</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb54">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">class</span><span class="op">(</span><span class="va">checkin_times</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "POSIXct" "POSIXt" </code></pre>
</div>
<p>The following “leap year” scenario highlights the importance of using
proper date types. Consider the following example:</p>
<div class="codewrapper sourceCode" id="cb56">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#BAD: using strings for date arithmetic</span></span>
<span><span class="va">date_start</span> <span class="op">&lt;-</span> <span class="st">"2020-02-28"</span></span>
<span><span class="va">date_end</span> <span class="op">&lt;-</span> <span class="st">"2020-03-01"</span></span>
<span></span>
<span><span class="co">#attempt to calculate the difference by converting strings to numeric days</span></span>
<span><span class="co">#here we use substr to extract the day portion in string format.</span></span>
<span><span class="co">#it draws the characters at position 9 to 10 and converts them to numeric</span></span>
<span><span class="va">difference_wrong</span> <span class="op">&lt;-</span> <span class="fu">as.numeric</span><span class="op">(</span><span class="fu">substr</span><span class="op">(</span><span class="va">date_end</span>, <span class="fl">9</span>, <span class="fl">10</span><span class="op">)</span><span class="op">)</span> <span class="op">-</span> <span class="fu">as.numeric</span><span class="op">(</span><span class="fu">substr</span><span class="op">(</span><span class="va">date_start</span>, <span class="fl">9</span>, <span class="fl">10</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">difference_wrong</span> <span class="co">#incorrect!</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] -27</code></pre>
</div>
<p>In this example, we extract the day portion of the dates as strings
and subtract them. While this works for simple cases, it fails to
account for: - The transition between months (e.g., February to March).
- Leap years (e.g., February 29 in 2020).</p>
<p>Now, compare this with proper date types:</p>
<div class="codewrapper sourceCode" id="cb58">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#GOOD: using Date for leap year handling</span></span>
<span><span class="va">date_start_correct</span> <span class="op">&lt;-</span> <span class="fu">as.Date</span><span class="op">(</span><span class="va">date_start</span><span class="op">)</span></span>
<span><span class="va">date_end_correct</span> <span class="op">&lt;-</span> <span class="fu">as.Date</span><span class="op">(</span><span class="va">date_end</span><span class="op">)</span></span>
<span></span>
<span><span class="va">difference_correct</span> <span class="op">&lt;-</span> <span class="fu">as.numeric</span><span class="op">(</span><span class="va">date_end_correct</span> <span class="op">-</span> <span class="va">date_start_correct</span><span class="op">)</span></span>
<span><span class="va">difference_correct</span> <span class="co">#correctly computes 2 days, accounting for February 29 in the leap year</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 2</code></pre>
</div>
<p>Now, the number of days has been calculated properly!</p>
<p>It’s important to note that Date objects and POSIXct objects are not
made equal and, while we used the two types interchangeably above, you
should ensure you choose the one that fits your data needs. The key
differences between Date objects and POSIXct objects can be seen below:
- Date: - Represents dates without time. - Useful for operations where
time is irrelevant (e.g., calculating the number of days between two
dates). - Stored as the number of days since January 1, 1970. -
`POSIXct: - Represents both date and time. - Useful for operations
involving time (e.g., calculating the number of seconds or hours between
two timestamps). - Stored as the number of seconds since January 1,
1970.</p>
<p>Using proper date types ensures that leap years and other
calendar-specific rules are handled correctly, making computations
accurate and reliable.</p>
</div>
<div class="section level3">
<h3 id="coercion">Coercion<a class="anchor" aria-label="anchor" href="#coercion"></a>
</h3>
<p>An important characteristic of vectors is that they can only contain
elements of the same data type. If you attempt to combine different
types in a vector, R will automatically convert them to a single, common
type - a process called “coercion”. This follows a hierarchy: character
&gt; numeric (double) &gt; integer &gt; logical.</p>
<div class="codewrapper sourceCode" id="cb60">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Coercion examples</span></span>
<span><span class="va">num_logical</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span><span class="fl">1</span>, <span class="cn">TRUE</span><span class="op">)</span> <span class="co"># TRUE converted to 1</span></span>
<span><span class="fu">typeof</span><span class="op">(</span><span class="va">num_logical</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "double"</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb62">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">num_character</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span><span class="fl">1</span>, <span class="st">"a"</span><span class="op">)</span> <span class="co"># 1 converted to "1"</span></span>
<span><span class="fu">typeof</span><span class="op">(</span><span class="va">num_character</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "character"</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb64">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">logical_character</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span><span class="cn">TRUE</span>, <span class="st">"a"</span><span class="op">)</span> <span class="co"># TRUE converted to "TRUE"</span></span>
<span><span class="fu">typeof</span><span class="op">(</span><span class="va">logical_character</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "character"</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb66">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tricky</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span><span class="fl">1</span>, <span class="st">"2"</span>, <span class="cn">TRUE</span><span class="op">)</span> <span class="co"># Everything becomes character</span></span>
<span><span class="fu">typeof</span><span class="op">(</span><span class="va">tricky</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "character"</code></pre>
</div>
<p>R will always try to find a common data type that doesn’t lose
information. Typically, this means converting toward the more flexible
type (with character being the most flexible).</p>
<p>Note: Date/POSIXct will always be treated as “numeric” (days/seconds
since January 1st, 1970) when being coerced within a vector!</p>
<div id="exercise-3" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="exercise-3" class="callout-inner">
<h3 class="callout-title">Exercise</h3>
<div class="callout-content">
<ol style="list-style-type: decimal">
<li><p>Predict the resulting data type for this vector:
<code>c(1.1, 2L, TRUE, "a")</code></p></li>
<li>
<p>Create a vector that contains:</p>
<ul>
<li>The number 5</li>
<li>The logical value FALSE</li>
<li>The string “data”</li>
</ul>
<p>What is the resulting data type? Why?</p>
</li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution4" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution4" aria-expanded="false" aria-controls="collapseSolution4">
  <h4 class="accordion-header" id="headingSolution4"> Show me the solution </h4>
</button>
<div id="collapseSolution4" class="accordion-collapse collapse" data-bs-parent="#accordionSolution4" aria-labelledby="headingSolution4">
<div class="accordion-body">
<ol style="list-style-type: decimal">
<li><p>The vector <code>c(1.1, 2L, TRUE, "a")</code> will have type
“character” because character is the most flexible data type.</p></li>
<li><p>The vector would be:</p></li>
</ol>
<div class="codewrapper sourceCode" id="cb68">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mixed</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span><span class="fl">5</span>, <span class="cn">FALSE</span>, <span class="st">"data"</span><span class="op">)</span></span>
<span><span class="fu">typeof</span><span class="op">(</span><span class="va">mixed</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "character"</code></pre>
</div>
<p>It has type “character” because R coerces all elements to the most
flexible data type that includes all values.</p>
</div>
</div>
</div>
</div>
<p>Vectors are one of the many <strong>data structures</strong> that R
uses. Other important ones are lists (<code>list</code>), matrices ,
data frames (<code>data.frame</code>), tibbles (<code>tbl</code>),
factors (<code>factor</code>) and arrays (<code>array</code>).</p>
</div>
</section><section><h2 class="section-heading" id="subsetting-vectors">Subsetting vectors<a class="anchor" aria-label="anchor" href="#subsetting-vectors"></a>
</h2>
<hr class="half-width">
<p>Subsetting (sometimes referred to as extracting or indexing) involves
accessing one or more values based on their numeric placement or “index”
within a vector. If we want to subset one or several values from a
vector, we must provide one index or several indices in square brackets.
For instance:</p>
<div class="codewrapper sourceCode" id="cb70">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">job_types</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span><span class="st">"check-in"</span>, <span class="st">"check-out"</span>, <span class="st">"supervisor"</span><span class="op">)</span></span>
<span><span class="va">job_types</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "check-out"</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb72">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">job_types</span><span class="op">[</span><span class="fu">c</span><span class="op">(</span><span class="fl">3</span>, <span class="fl">2</span><span class="op">)</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "supervisor" "check-out" </code></pre>
</div>
<p>We can also repeat the indices to create an object with more elements
than the original one:</p>
<div class="codewrapper sourceCode" id="cb74">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">more_jobs</span> <span class="op">&lt;-</span> <span class="va">job_types</span><span class="op">[</span><span class="fu">c</span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span>, <span class="fl">2</span>, <span class="fl">1</span>, <span class="fl">3</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="va">more_jobs</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "check-in"   "check-out"  "supervisor" "check-out"  "check-in"
[6] "supervisor"</code></pre>
</div>
<div class="section level3">
<h3 id="conditional-subsetting">Conditional subsetting<a class="anchor" aria-label="anchor" href="#conditional-subsetting"></a>
</h3>
<p>Another common way of subsetting is by using a logical vector.
<code>TRUE</code> will select the element with the same index, while
<code>FALSE</code> will not:</p>
<div class="codewrapper sourceCode" id="cb76">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">votes_per_precinct</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span><span class="fl">1000</span>, <span class="fl">4300</span>, <span class="fl">2340</span>, <span class="fl">7190</span><span class="op">)</span></span>
<span><span class="va">votes_per_precinct</span><span class="op">[</span><span class="fu">c</span><span class="op">(</span><span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">TRUE</span>, <span class="cn">TRUE</span><span class="op">)</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 1000 2340 7190</code></pre>
</div>
<p>Typically, these logical vectors are not typed by hand, but are the
output of other functions or logical tests. For instance, if you wanted
to select only the values greater than 2500:</p>
<div class="codewrapper sourceCode" id="cb78">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">votes_per_precinct</span> <span class="op">&gt;</span> <span class="fl">2500</span>    <span class="co"># will return logicals with TRUE for the indices that meet the condition</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] FALSE  TRUE FALSE  TRUE</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb80">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## so we can use this to select only the values greater than 2866</span></span>
<span><span class="va">votes_per_precinct</span><span class="op">[</span><span class="va">votes_per_precinct</span> <span class="op">&gt;</span> <span class="fl">2500</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 4300 7190</code></pre>
</div>
<p>You can combine multiple tests using <code>&amp;</code> (both
conditions are true, AND) or <code>|</code> (at least one of the
conditions is true, OR):</p>
<div class="codewrapper sourceCode" id="cb82">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">votes_per_precinct</span><span class="op">[</span><span class="va">votes_per_precinct</span> <span class="op">&lt;</span> <span class="fl">2000</span> <span class="op">|</span> <span class="va">votes_per_precinct</span> <span class="op">&gt;</span> <span class="fl">4000</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 1000 4300 7190</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb84">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">votes_per_precinct</span><span class="op">[</span><span class="va">votes_per_precinct</span> <span class="op">&gt;=</span> <span class="fl">2000</span> <span class="op">&amp;</span> <span class="va">votes_per_precinct</span> <span class="op">&lt;=</span> <span class="fl">4000</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 2340</code></pre>
</div>
<p>Here, <code>&lt;</code> stands for “less than”, <code>&gt;</code> for
“greater than”, <code>&gt;=</code> for “greater than or equal to”, and
<code>==</code> for “equal to”. The double equal sign <code>==</code> is
a test for numerical equality between the left and right-hand sides, and
should not be confused with the single <code>=</code> sign, which
performs variable assignment (similar to <code>&lt;-</code>).</p>
<p>A common task is to search for certain strings in a vector. One could
use the “or” operator <code>|</code> to test for equality to multiple
values, but this can quickly become tedious.</p>
<div class="codewrapper sourceCode" id="cb86">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">job_types</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span><span class="st">"check-in"</span>, <span class="st">"check-out"</span>, <span class="st">"supervisor"</span><span class="op">)</span></span>
<span><span class="va">job_types</span><span class="op">[</span><span class="va">job_types</span> <span class="op">==</span> <span class="st">"check-in"</span> <span class="op">|</span> <span class="va">job_types</span> <span class="op">==</span> <span class="st">"check-out"</span><span class="op">]</span> <span class="co"># returns both check-in and check-out</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "check-in"  "check-out"</code></pre>
</div>
<p>The function <code>%in%</code> allows you to test if any of the
elements of a search vector (on the left-hand side) are found in the
target vector (on the right-hand side):</p>
<div class="codewrapper sourceCode" id="cb88">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">job_types</span> <span class="op">%in%</span> <span class="fu">c</span><span class="op">(</span><span class="st">"check-in"</span>, <span class="st">"check-out"</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1]  TRUE  TRUE FALSE</code></pre>
</div>
<p>Note that the output is the same length as the search vector on the
left-hand side, because <code>%in%</code> checks whether each element of
the search vector is found somewhere in the target vector. Thus, you can
use <code>%in%</code> to select the elements in the search vector that
appear in your target vector:</p>
<div class="codewrapper sourceCode" id="cb90">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">job_types</span><span class="op">[</span><span class="va">job_types</span> <span class="op">%in%</span> <span class="fu">c</span><span class="op">(</span><span class="st">"check-in"</span>, <span class="st">"check-out"</span><span class="op">)</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "check-in"  "check-out"</code></pre>
</div>
</div>
</section><section><h2 class="section-heading" id="missing-data">Missing Data<a class="anchor" aria-label="anchor" href="#missing-data"></a>
</h2>
<hr class="half-width">
<p>As R was designed to analyze data sets, it includes the concept of
missing data (which is uncommon in other programming languages). Missing
data are represented in vectors as <code>NA</code>.</p>
<p>When doing operations on numbers, most functions will return
<code>NA</code> if the data you are working with include missing values.
This feature makes it harder to overlook the cases where you are dealing
with missing data. You can add the argument <code>na.rm = TRUE</code> to
calculate the result while ignoring the missing values.</p>
<div class="codewrapper sourceCode" id="cb92">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#create vector</span></span>
<span><span class="va">checkin_lengths</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span><span class="fl">64</span>, <span class="fl">74</span>, <span class="cn">NA</span>, <span class="fl">287</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#calc with NA</span></span>
<span><span class="fu">mean</span><span class="op">(</span><span class="va">checkin_lengths</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] NA</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb94">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">max</span><span class="op">(</span><span class="va">checkin_lengths</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] NA</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb96">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#calc without NA</span></span>
<span><span class="fu">mean</span><span class="op">(</span><span class="va">checkin_lengths</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 141.6667</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb98">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">max</span><span class="op">(</span><span class="va">checkin_lengths</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 287</code></pre>
</div>
<p>If your data include missing values, you may want to become familiar
with the functions <code>is.na()</code>, <code>na.omit()</code>, and
<code>complete.cases()</code>. See below for examples:</p>
<div class="codewrapper sourceCode" id="cb100">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Extract those elements which are not missing values.</span></span>
<span><span class="co">## The ! character is also called the NOT operator</span></span>
<span><span class="va">checkin_lengths</span><span class="op">[</span><span class="op">!</span><span class="fu">is.na</span><span class="op">(</span><span class="va">checkin_lengths</span><span class="op">)</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1]  64  74 287</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb102">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Count the number of missing values.</span></span>
<span><span class="co">## The output of is.na() is a logical vector (TRUE/FALSE equivalent to 1/0) so the sum() function here is effectively counting</span></span>
<span><span class="fu">sum</span><span class="op">(</span><span class="fu">is.na</span><span class="op">(</span><span class="va">checkin_lengths</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 1</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb104">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Returns the object with incomplete cases removed. The returned object is an atomic vector of type `"numeric"` (or `"double"`).</span></span>
<span><span class="fu">na.omit</span><span class="op">(</span><span class="va">checkin_lengths</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1]  64  74 287
attr(,"na.action")
[1] 3
attr(,"class")
[1] "omit"</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb106">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Extract those elements which are complete cases. The returned object is an atomic vector of type `"numeric"` (or `"double"`).</span></span>
<span><span class="va">checkin_lengths</span><span class="op">[</span><span class="fu">complete.cases</span><span class="op">(</span><span class="va">checkin_lengths</span><span class="op">)</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1]  64  74 287</code></pre>
</div>
<p>Recall that you can use the <code>typeof()</code> function to find
the type of your atomic vector.</p>
<div id="exercise-4" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="exercise-4" class="callout-inner">
<h3 class="callout-title">Exercise</h3>
<div class="callout-content">
<ol style="list-style-type: decimal">
<li>Using this vector of check-in lengths, create a new vector with the
NAs removed.</li>
</ol>
<div class="codewrapper sourceCode" id="cb108">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">checkin_lengths</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span><span class="fl">54</span>, <span class="fl">21</span>, <span class="fl">74</span>, <span class="fl">65</span>, <span class="cn">NA</span>, <span class="fl">72</span>, <span class="fl">21</span>, <span class="fl">16</span>, <span class="fl">46</span>, <span class="fl">58</span>, <span class="fl">43</span>, <span class="fl">61</span>, <span class="fl">39</span>, <span class="fl">19</span>, <span class="cn">NA</span>, <span class="fl">24</span><span class="op">)</span></span></code></pre>
</div>
<ol start="2" style="list-style-type: decimal">
<li><p>Use the function <code>median()</code> to calculate the median of
the <code>checkin_lengths</code> vector.</p></li>
<li><p>Use R to figure out how many check-ins took longer than 55
seconds.</p></li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution5" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution5" aria-expanded="false" aria-controls="collapseSolution5">
  <h4 class="accordion-header" id="headingSolution5"> Show me the solution </h4>
</button>
<div id="collapseSolution5" class="accordion-collapse collapse" data-bs-parent="#accordionSolution5" aria-labelledby="headingSolution5">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb109">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#1.</span></span>
<span><span class="va">checkin_lengths</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span><span class="fl">54</span>, <span class="fl">21</span>, <span class="fl">74</span>, <span class="fl">65</span>, <span class="cn">NA</span>, <span class="fl">72</span>, <span class="fl">21</span>, <span class="fl">16</span>, <span class="fl">46</span>, <span class="fl">58</span>, <span class="fl">43</span>, <span class="fl">61</span>, <span class="fl">39</span>, <span class="fl">19</span>, <span class="cn">NA</span>, <span class="fl">24</span><span class="op">)</span></span>
<span><span class="va">checkin_lengths_no_na</span> <span class="op">&lt;-</span> <span class="va">checkin_lengths</span><span class="op">[</span><span class="op">!</span><span class="fu">is.na</span><span class="op">(</span><span class="va">checkin_lengths</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="co"># or</span></span>
<span><span class="va">checkin_lengths_no_na</span> <span class="op">&lt;-</span> <span class="fu">na.omit</span><span class="op">(</span><span class="va">checkin_lengths</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># 2.</span></span>
<span><span class="fu">median</span><span class="op">(</span><span class="va">checkin_lengths</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 44.5</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb111">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># 3.</span></span>
<span><span class="va">checkin_lengths_above_55</span> <span class="op">&lt;-</span> <span class="va">checkin_lengths_no_na</span><span class="op">[</span><span class="va">checkin_lengths_no_na</span> <span class="op">&gt;</span> <span class="fl">55</span><span class="op">]</span></span>
<span><span class="fu">length</span><span class="op">(</span><span class="va">checkin_lengths_above_55</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 5</code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<span class="callout-header">Key Points</span>
<div class="callout-inner">
<div class="callout-content">
<ul>
<li>Access individual values by location using <code>[]</code>.</li>
<li>Access arbitrary sets of data using <code>[c(...)]</code>.</li>
<li>Use logical operations and logical vectors to access subsets of
data.</li>
<li>Use proper date types (Date and POSIXct) instead of strings for date
arithmetic.</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></section><section id="aio-02-starting-with-data"><p>Content from <a href="02-starting-with-data.html">Starting with Data</a></p>
<hr>
<p>Last updated on 2025-11-11 |

        <a href="https://github.com/EngineeringForDemocracy/r-election-workers/edit/main/episodes/02-starting-with-data.Rmd" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>What is an R package?</li>
<li>What is a data.frame?</li>
<li>What is a tibble, and how is it different from a data frame?</li>
<li>How can I read a complete csv file into R?</li>
<li>How can I get basic summary information about my data set?</li>
<li>How can I change the way R treats strings in my data set?</li>
<li>Why would I want strings to be treated differently?</li>
<li>How are dates represented in data sets and how can I change the
format?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Understand what an R package is.</li>
<li>Describe what a data frame is.</li>
<li>Describe what a tibble is.</li>
<li>Load external data from a .csv file into a tibble.</li>
<li>Summarize the contents of a tibble.</li>
<li>Subset values from a tibble.</li>
<li>Describe the difference between a factor and a string.</li>
<li>Convert between strings and factors.</li>
<li>Reorder and rename factors.</li>
<li>Change how character strings are handled in a tibble.</li>
<li>Examine and change date formats within a data set.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="what-is-an-r-package">What is an R package?<a class="anchor" aria-label="anchor" href="#what-is-an-r-package"></a>
</h2>
<hr class="half-width">
<p>An R package is a collection of functions and (occasionally) data
sets that extend the functionality of R. Throughout these lessons, we
will primarily be using the <strong><code>tidyverse</code></strong>,
which is a collection of R packages designed to make data science
easier!</p>
<p>When installing and loading <strong><code>tidyverse</code></strong>,
the following are all of the packages that are installed/loaded as part
of the collection:</p>
<ul>
<li><strong><code>ggplot2</code></strong></li>
<li><strong><code>dplyr</code></strong></li>
<li><strong><code>tidyr</code></strong></li>
<li><strong><code>readr</code></strong></li>
<li><strong><code>tibble</code></strong></li>
<li><strong><code>forcats</code></strong></li>
<li><strong><code>lubridate</code></strong></li>
<li><strong><code>stringr</code></strong></li>
<li><strong><code>purrr</code></strong></li>
</ul>
<p>You can learn more about the <strong><code>tidyverse</code></strong>
collection of packages by visiting the <a href="https://www.tidyverse.org/" class="external-link">tidyverse website</a>.</p>
<p>There are also packages available for a wide range of tasks including
downloading data from the NCBI database or performing statistical
analysis on your data set. Many packages such as these are housed on,
and downloadable from, the <strong>C</strong>omprehensive
<strong>R</strong> <strong>A</strong>rchive <strong>N</strong>etwork
(CRAN) using <code>install.packages</code>. This function makes the
package accessible by your R installation with the command
<code>library()</code>.</p>
<p>To easily access the documentation for a package within R or RStudio,
use <code><a href="https://rdrr.io/pkg/package_name/man" class="external-link">help(package = "package_name")</a></code>.</p>
<div id="note" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<span class="callout-header">Callout</span>
<div id="note" class="callout-inner">
<h3 class="callout-title">Note</h3>
<div class="callout-content">
<p>There are alternatives to the <code>tidyverse</code> packages for
data wrangling, including the package <a href="https://rdatatable.gitlab.io/data.table/" class="external-link"><code>data.table</code></a>.
See this <a href="https://mgimond.github.io/rug_2019_12/Index.html" class="external-link">comparison</a>
for example to get a sense of the differences between using
<code>base</code>, <code>tidyverse</code>, and
<code>data.table</code>.</p>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="what-are-data-frames">What are data frames?<a class="anchor" aria-label="anchor" href="#what-are-data-frames"></a>
</h2>
<hr class="half-width">
<p>Data frames are the <em>de facto</em> data structure for tabular data
in <code>R</code>, and what we use for data processing, statistics, and
plotting.</p>
<p>A data frame is the representation of data in the format of a table
where the columns are vectors that all have the same length. Data frames
are analogous to the more familiar spreadsheet in programs such as
Excel, with one key difference. Because columns are vectors, each column
must contain a single type of data (e.g., characters, integers,
factors). For example, here is a figure depicting a data frame
comprising a numeric, a character, and a logical vector.</p>
<figure><img src="fig/data-frame.svg" alt="A 3 by 3 data frame with columns showing numeric, character and logical values." class="figure mx-auto d-block"></figure><p>Data frames can be created by hand, but most commonly they are
generated by the functions <code>read_csv()</code> or
<code>read_table()</code>; in other words, when importing spreadsheets
from your hard drive (or the web). We will now demonstrate how to import
tabular data using <code>read_csv()</code>.</p>
</section><section><h2 class="section-heading" id="introduction-to-the-check-in-dataset">Introduction to the Check-In Dataset<a class="anchor" aria-label="anchor" href="#introduction-to-the-check-in-dataset"></a>
</h2>
<hr class="half-width">
<p>The Check-In Dataset is an example data set that is based on the 2018
election. Each row in the data set represents one ballot case, and
includes an ID, check-in length, arrival time, location, precinct, and
machine.</p>
<p>The following is a visual representation of the data set’s
columns:</p>
<table class="table">
<colgroup>
<col width="13%">
<col width="86%">
</colgroup>
<thead><tr class="header">
<th>column_name</th>
<th>description</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>checkin_id</td>
<td>Provides a unique key/ID for each ballot instance.</td>
</tr>
<tr class="even">
<td>checkin_length</td>
<td>How long it took the person submitting the ballot to check-in to the
polling location.</td>
</tr>
<tr class="odd">
<td>checkin_time</td>
<td>The arrival time of the person submitting the ballot, includes both
the date and time.</td>
</tr>
<tr class="even">
<td>location</td>
<td>Anonymized ID for the location of the ballot box.</td>
</tr>
<tr class="odd">
<td>precinct</td>
<td>Anonymized ID for the precinct that the ballot box belongs to.</td>
</tr>
<tr class="even">
<td>device</td>
<td>Anonymized ID for each ballot box.</td>
</tr>
</tbody>
</table></section><section><h2 class="section-heading" id="importing-data">Importing Data<a class="anchor" aria-label="anchor" href="#importing-data"></a>
</h2>
<hr class="half-width">
<p>You are going to load the data in R’s memory using the function
<code>read_csv()</code>. This is from the
<strong><code>readr</code></strong> package, which (as you may remember)
is part of the <strong><code>tidyverse</code></strong>.</p>
<p>Before proceeding, however, this is a good opportunity to talk about
conflicts. Certain packages we load can end up introducing function
names that are already in use by pre-loaded R packages. For instance,
when we load the tidyverse package below, we will introduce two
conflicting functions: <code>filter()</code> and <code>lag()</code>.
This happens because <code>filter</code> and <code>lag</code> are
already functions used by the stats package (which comes pre-loaded in
R). What will happen now is that if we, for example, call the
<code>filter()</code> function, R will use the
<code>dplyr::filter()</code> version and not the
<code>stats::filter()</code> one. This happens because, if conflicted,
by default R uses the function from the most recently loaded package.
Conflicted functions may cause you some trouble in the future, so it is
important that we are aware of them so that we can properly handle them,
if we want.</p>
<p>To do so, we just need the following functions from the conflicted
package:</p>
<ul>
<li>
<code>conflicted::conflict_scout()</code>: Shows us any conflicted
functions.<br>
</li>
<li>
<code>conflict_prefer("function", "package_prefered")</code>: Allows
us to choose the default function we want from now on.</li>
</ul>
<p>It is also important to know that we can, at any time, just call the
function directly from the package we want, such as
<code>stats::filter()</code>.</p>
<p>Even with the use of an RStudio project, it can be difficult to learn
how to specify paths to file locations. Enter the <strong>here</strong>
package! The here package creates paths relative to the top-level
directory (your RStudio project). These relative paths work
<em>regardless</em> of where the associated source file lives inside
your project, like analysis projects with data and reports in different
sub-directories. This is an important contrast to using
<code>setwd()</code>, which depends on the way you order your files on
your computer.</p>
<figure><img src="fig/here_horst.png" alt="Monsters at a fork in the road, with signs saying here, and not here. One direction, not here, leads to a scary dark forest with spiders and absolute filepaths, while the other leads to a sunny, green meadow, and a city below a rainbow and a world free of absolute filepaths. Art by Allison Horst" width="100%" style="display: block; margin: auto;" class="figure"><figcaption>
Image credit:
<a href="https://github.com/allisonhorst/stats-illustrations" class="external-link">Allison
Horst</a>
</figcaption></figure><p>Before we can use the <code>read_csv()</code> and <code>here()</code>
functions, we need to load the tidyverse and here packages.</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#loads in the tidyverse and here packages</span></span>
<span><span class="kw">library</span><span class="op">(</span><span class="va">tidyverse</span><span class="op">)</span></span>
<span><span class="kw">library</span><span class="op">(</span><span class="va">here</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#reads in data and assigns it to the 'data' variable using 'here'</span></span>
<span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu">read_csv</span><span class="op">(</span><span class="fu">here</span><span class="op">(</span><span class="st">"data"</span>, <span class="st">"checkin_data.csv"</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<p>In the above code, we notice the <code>here()</code> function takes
folder and file names as inputs (e.g., <code>"data"</code>,
<code>"checkin_data.csv"</code>), each enclosed in quotations
(<code>""</code>) and separated by a comma. The <code>here()</code> will
accept as many names as are necessary to navigate to a particular
file.</p>
<p>For example, let’s say you have both an RMarkdown file and a folder
called <code>"info"</code> that contains multiple CSV files (including
<code>"data.csv"</code>) on your Desktop. If you want to access
<code>"data.csv"</code> within your RMarkdown file, you can use
<code>here("info", "data.csv")</code>.</p>
<p>The <code>here()</code> function can accept the folder and file names
in an alternate format, using a slash (“/”) rather than commas to
separate the names. The two methods are equivalent, so that
<code>here("data", "checkin_data.csv")</code> and
<code>here("data/checkin_data.csv")</code> produce the same result. (The
forward slash is used on all operating systems; backslashes are never
used.)</p>
<p>If you were to type in the code above, it is likely that the
<code>read.csv()</code> function would appear in the automatically
populated list of functions. This function is different from the
<code>read_csv()</code> function, as it is included in the “base”
packages that come pre-installed with R. Overall,
<code>read.csv()</code> behaves similar to <code>read_csv()</code>, with
a few notable differences. First, <code>read.csv()</code> coerces column
names with spaces and/or special characters to different names
(e.g. <code>interview date</code> becomes
<code>interview.date</code>).</p>
<p>Second, <code>read.csv()</code> stores data as a
<code>data.frame</code>, where <code>read_csv()</code> stores data as a
different kind of data frame called a <code>tibble</code>. A tibble is
an extension of <code>R</code> data frames used by the
<strong><code>tidyverse</code></strong>. We prefer tibbles because they
have nice printing properties among other desirable qualities. You can
read more about <a href="https://tibble.tidyverse.org/" class="external-link">tibbles in its
docs</a>.</p>
<p>Additionally, the <code>read_csv()</code> statement in the code above
creates a tibble but doesn’t output any data because, as you might
recall, assignments (<code>&lt;-</code>) don’t display anything. Note,
however, that <code>read_csv</code> may show informational text about
the data frame that is created.</p>
<p>If we want to check that our tibble has been loaded, we can see the
contents of the data by typing its name: <code>data</code> in the
console:</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data</span></span>
<span><span class="co">## Try also</span></span>
<span><span class="co">## view(interviews)</span></span>
<span><span class="co">## head(interviews)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 352,112 × 6
   checkin_id     checkin_length checkin_time        location    precinct device
   &lt;chr&gt;                   &lt;dbl&gt; &lt;dttm&gt;              &lt;chr&gt;       &lt;chr&gt;    &lt;chr&gt;
 1 CHECKIN_000001             45 2018-11-06 07:02:36 LOCATION_0… PRECINC… DEVIC…
 2 CHECKIN_000002             29 2018-11-06 07:04:09 LOCATION_0… PRECINC… DEVIC…
 3 CHECKIN_000003             65 2018-11-06 07:05:13 LOCATION_0… PRECINC… DEVIC…
 4 CHECKIN_000004             28 2018-11-06 07:06:26 LOCATION_0… PRECINC… DEVIC…
 5 CHECKIN_000005             17 2018-11-06 07:08:08 LOCATION_0… PRECINC… DEVIC…
 6 CHECKIN_000006             56 2018-11-06 07:08:32 LOCATION_0… PRECINC… DEVIC…
 7 CHECKIN_000007             64 2018-11-06 07:09:36 LOCATION_0… PRECINC… DEVIC…
 8 CHECKIN_000008            262 2018-11-06 07:10:18 LOCATION_0… PRECINC… DEVIC…
 9 CHECKIN_000009            245 2018-11-06 07:12:57 LOCATION_0… PRECINC… DEVIC…
10 CHECKIN_000010            260 2018-11-06 07:13:41 LOCATION_0… PRECINC… DEVIC…
# ℹ 352,102 more rows</code></pre>
</div>
<div id="note-1" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<span class="callout-header">Callout</span>
<div id="note-1" class="callout-inner">
<h3 class="callout-title">Note</h3>
<div class="callout-content">
<p><code>read_csv()</code> assumes that fields are delimited by commas
(since CSV stands for “Comma Separated Values”). However, in several
countries, the comma is used as a decimal separator and the semicolon
(;) is used as a field delimiter. If you want to read in this type of
files in R, you can use the <code>read_csv2</code> function. It behaves
exactly like <code>read_csv</code> but uses different parameters for the
decimal and the field separators. If you are working with another
format, they can be both specified by the user. Check out the help for
<code>read_csv()</code> by typing <code>?read_csv</code> to learn more.
There is also the <code>read_tsv()</code> for tab-separated data files,
and <code>read_delim()</code> allows you to specify more details about
the structure of your file.</p>
</div>
</div>
</div>
<p>When the data is read using <code>read_csv()</code>, it is stored in
an object of class <code>tbl_df</code>, <code>tbl</code>, and
<code>data.frame</code>. You can see the class of an object using:</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">class</span><span class="op">(</span><span class="va">data</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "spec_tbl_df" "tbl_df"      "tbl"         "data.frame" </code></pre>
</div>
<p>As a <code>tibble</code>, the type of data included in each column is
listed in an abbreviated fashion below the column names. For instance,
here <code>checkin_id</code> is a column of characters
(<code>&lt;chr&gt;</code>),<code>precinct</code> is a column of floating
point numbers (abbreviated <code>&lt;dbl&gt;</code> for the word
‘double’), and the <code>checkin_time</code> is a column in the “date
and time” format (<code>&lt;dttm&gt;</code> or
<code>&lt;S3: POSIXct&gt;</code>).</p>
</section><section><h2 class="section-heading" id="inspecting-tibbles">Inspecting Tibbles<a class="anchor" aria-label="anchor" href="#inspecting-tibbles"></a>
</h2>
<hr class="half-width">
<p>When calling a <code>tbl_df</code> object (like <code>data</code>
here), there is already a lot of information about our tibble being
displayed, such as the number of rows, the number of columns, the names
of the columns, and, as we just saw, the class of data stored in each
column. However, there are functions to extract this information from
tibbles. Here is a non-exhaustive list of some of these functions. Let’s
try them out!</p>
<p>Size:</p>
<ul>
<li>
<code>dim(data)</code> - returns a vector with the number of rows as
the first element, and the number of columns as the second element (the
<strong>dim</strong>ensions of the object)</li>
<li>
<code>nrow(data)</code> - returns the number of rows</li>
<li>
<code>ncol(data)</code> - returns the number of columns</li>
</ul>
<p>Content:</p>
<ul>
<li>
<code>head(data)</code> - shows the first 6 rows</li>
<li>
<code>tail(data)</code> - shows the last 6 rows</li>
</ul>
<p>Names:</p>
<ul>
<li>
<code>names(data)</code> - returns the column names (synonym of
<code>colnames()</code> for <code>data.frame</code> objects)</li>
</ul>
<p>Summary:</p>
<ul>
<li>
<code>str(data)</code> - structure of the object and information
about the class, length and content of each column</li>
<li>
<code>summary(data)</code> - summary statistics for each column</li>
<li>
<code>glimpse(data)</code> - returns the number of columns and rows
of the tibble, the names and class of each column, and previews as many
values will fit on the screen. Unlike the other inspecting functions
listed above, <code>glimpse()</code> is not a “base R” function so you
need to have the <code>dplyr</code> or <code>tibble</code> packages
loaded to be able to execute it.</li>
</ul>
<p>Note: most of these functions are “generic.” They can be used on
other types of objects besides data frames or tibbles.</p>
</section><section><h2 class="section-heading" id="subsetting-tibbles">Subsetting Tibbles<a class="anchor" aria-label="anchor" href="#subsetting-tibbles"></a>
</h2>
<hr class="half-width">
<p>Our <code>data</code> tibble has rows and columns (it has 2
dimensions). In practice, we may not need the entire tibble; for
instance, we may only be interested in a subset of the observations (the
rows) or a particular set of variables (the columns). If we want to
access some specific data from it, we need to specify the “coordinates”
(i.e., indices) we want from it. Row numbers come first, followed by
column numbers.</p>
<div id="tip" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<span class="callout-header">Callout</span>
<div id="tip" class="callout-inner">
<h3 class="callout-title">Tip</h3>
<div class="callout-content">
<p>Subsetting a <code>tibble</code> with <code>[</code> always results
in a <code>tibble</code>. However, note this is not true in general for
data frames, so be careful! Different ways of specifying these
coordinates can lead to results with different classes. This is covered
in the Software Carpentry lesson <a href="https://swcarpentry.github.io/r-novice-gapminder/" class="external-link">R for
Reproducible Scientific Analysis</a>.</p>
</div>
</div>
</div>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#retrieves 1st element of the 1st column of the tibble</span></span>
<span><span class="va">data</span><span class="op">[</span><span class="fl">1</span>, <span class="fl">1</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 1 × 1
  checkin_id
  &lt;chr&gt;
1 CHECKIN_000001</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#retrieves the 1st element in the 5th column of the tibble </span></span>
<span><span class="va">data</span><span class="op">[</span><span class="fl">1</span>, <span class="fl">5</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 1 × 1
  precinct
  &lt;chr&gt;
1 PRECINCT_001</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#retrieves the 1st column of the tibble as a tibble</span></span>
<span><span class="va">data</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 352,112 × 1
   checkin_id
   &lt;chr&gt;
 1 CHECKIN_000001
 2 CHECKIN_000002
 3 CHECKIN_000003
 4 CHECKIN_000004
 5 CHECKIN_000005
 6 CHECKIN_000006
 7 CHECKIN_000007
 8 CHECKIN_000008
 9 CHECKIN_000009
10 CHECKIN_000010
# ℹ 352,102 more rows</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#retrieves the 1st column of the tibble as a vector</span></span>
<span><span class="co">#we're using head here, as without it, we would print 100,000 entries!</span></span>
<span><span class="fu">head</span><span class="op">(</span><span class="va">data</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "CHECKIN_000001" "CHECKIN_000002" "CHECKIN_000003" "CHECKIN_000004"
[5] "CHECKIN_000005" "CHECKIN_000006"</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#retrieves the first three elements in the 3rd column of the tibble</span></span>
<span><span class="va">data</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span>, <span class="fl">3</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 3 × 1
  checkin_time
  &lt;dttm&gt;
1 2018-11-06 07:02:36
2 2018-11-06 07:04:09
3 2018-11-06 07:05:13</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#retrieves the third row of the tibble</span></span>
<span><span class="va">data</span><span class="op">[</span><span class="fl">3</span>, <span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 1 × 6
  checkin_id     checkin_length checkin_time        location     precinct device
  &lt;chr&gt;                   &lt;dbl&gt; &lt;dttm&gt;              &lt;chr&gt;        &lt;chr&gt;    &lt;chr&gt;
1 CHECKIN_000003             65 2018-11-06 07:05:13 LOCATION_001 PRECINC… DEVIC…</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb18">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#equivalent to head_data &lt;- head(data)</span></span>
<span><span class="va">head_data</span> <span class="op">&lt;-</span> <span class="va">data</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">6</span>, <span class="op">]</span></span></code></pre>
</div>
<p><code>:</code> is a special function that creates numeric vectors of
integers in increasing or decreasing order, test <code>1:10</code> and
<code>10:1</code> for instance.</p>
<p>You can also exclude certain indices of a tibble using the
“<code>-</code>” sign:</p>
<div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#retrieves the whole tibble (minus the first column)</span></span>
<span><span class="va">data</span><span class="op">[</span>, <span class="op">-</span><span class="fl">1</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 352,112 × 5
   checkin_length checkin_time        location     precinct     device
            &lt;dbl&gt; &lt;dttm&gt;              &lt;chr&gt;        &lt;chr&gt;        &lt;chr&gt;
 1             45 2018-11-06 07:02:36 LOCATION_001 PRECINCT_001 DEVICE_001
 2             29 2018-11-06 07:04:09 LOCATION_001 PRECINCT_001 DEVICE_001
 3             65 2018-11-06 07:05:13 LOCATION_001 PRECINCT_001 DEVICE_001
 4             28 2018-11-06 07:06:26 LOCATION_001 PRECINCT_001 DEVICE_001
 5             17 2018-11-06 07:08:08 LOCATION_001 PRECINCT_001 DEVICE_001
 6             56 2018-11-06 07:08:32 LOCATION_001 PRECINCT_001 DEVICE_002
 7             64 2018-11-06 07:09:36 LOCATION_001 PRECINCT_001 DEVICE_001
 8            262 2018-11-06 07:10:18 LOCATION_001 PRECINCT_001 DEVICE_001
 9            245 2018-11-06 07:12:57 LOCATION_001 PRECINCT_001 DEVICE_002
10            260 2018-11-06 07:13:41 LOCATION_001 PRECINCT_001 DEVICE_001
# ℹ 352,102 more rows</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb21">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#equivalent to head(data)</span></span>
<span><span class="va">data</span><span class="op">[</span><span class="op">-</span><span class="fu">c</span><span class="op">(</span><span class="fl">7</span><span class="op">:</span><span class="fl">352112</span><span class="op">)</span>, <span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 6 × 6
  checkin_id     checkin_length checkin_time        location     precinct device
  &lt;chr&gt;                   &lt;dbl&gt; &lt;dttm&gt;              &lt;chr&gt;        &lt;chr&gt;    &lt;chr&gt;
1 CHECKIN_000001             45 2018-11-06 07:02:36 LOCATION_001 PRECINC… DEVIC…
2 CHECKIN_000002             29 2018-11-06 07:04:09 LOCATION_001 PRECINC… DEVIC…
3 CHECKIN_000003             65 2018-11-06 07:05:13 LOCATION_001 PRECINC… DEVIC…
4 CHECKIN_000004             28 2018-11-06 07:06:26 LOCATION_001 PRECINC… DEVIC…
5 CHECKIN_000005             17 2018-11-06 07:08:08 LOCATION_001 PRECINC… DEVIC…
6 CHECKIN_000006             56 2018-11-06 07:08:32 LOCATION_001 PRECINC… DEVIC…</code></pre>
</div>
<p><code>tibble</code>s can be subset by calling indices (as shown
previously), but also by calling their column names directly:</p>
<div class="codewrapper sourceCode" id="cb23">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#returns a tibble</span></span>
<span><span class="va">data</span><span class="op">[</span><span class="st">"location"</span><span class="op">]</span></span>
<span></span>
<span><span class="co">#returns a tibble</span></span>
<span><span class="va">data</span><span class="op">[</span>, <span class="st">"location"</span><span class="op">]</span></span>
<span></span>
<span><span class="co">#returns a vector</span></span>
<span><span class="va">data</span><span class="op">[[</span><span class="st">"location"</span><span class="op">]</span><span class="op">]</span></span>
<span></span>
<span><span class="co">#returns a vector</span></span>
<span><span class="va">data</span><span class="op">$</span><span class="va">location</span></span></code></pre>
</div>
<p>In RStudio, you can use the
<strong><code>auto-completion feature</code></strong> to get the full
and correct names of the columns.</p>
<div id="exercise" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="exercise" class="callout-inner">
<h3 class="callout-title">Exercise</h3>
<div class="callout-content">
<ol style="list-style-type: decimal">
<li>Create a tibble (<code>data_100</code>) containing only the data in
row 100 of the <code>data</code> data set.</li>
</ol>
<p>Now, continue using <code>data</code> for each of the following
activities:</p>
<ol start="2" style="list-style-type: decimal">
<li>Notice how <code>nrow()</code> gave you the number of rows in the
tibble?</li>
</ol>
<ul>
<li>Use that number to pull out just that last row in the tibble.</li>
<li>Compare that with what you see as the last row using
<code>tail()</code> to make sure it’s meeting expectations.</li>
<li>Pull out that last row using <code>nrow()</code> instead of the row
number.</li>
<li>Create a new tibble (<code>data_last</code>) from that last
row.</li>
</ul>
<ol start="3" style="list-style-type: decimal">
<li><p>Using the number of rows in the Check-In Dataset that you found
in question 2, extract the rows that are in the middle of the data set.
Store the content of these middle rows in an object named
<code>data_middle</code>. (hint: the middle two items of a set of 4
would be 2 + 3, or visually, [][X][X][])</p></li>
<li><p>Combine <code>nrow()</code> with the <code>-</code> notation
above to reproduce the behavior of <code>head(data)</code>, keeping just
the first through 6th rows of the Check-In Dataset.</p></li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb24">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#part 1:</span></span>
<span><span class="va">data_100</span> <span class="op">&lt;-</span> <span class="va">data</span><span class="op">[</span><span class="fl">100</span>, <span class="op">]</span></span>
<span></span>
<span><span class="co">#part 2:</span></span>
<span><span class="co">#we save nrows so we can use it multiple times! makes the code cleaner :)</span></span>
<span><span class="va">n_rows</span> <span class="op">&lt;-</span> <span class="fu">nrow</span><span class="op">(</span><span class="va">data</span><span class="op">)</span></span>
<span><span class="va">data_last</span> <span class="op">&lt;-</span> <span class="va">data</span><span class="op">[</span><span class="va">n_rows</span>, <span class="op">]</span></span>
<span></span>
<span><span class="co">#part 3:</span></span>
<span><span class="va">data_middle</span> <span class="op">&lt;-</span> <span class="va">data</span><span class="op">[</span><span class="op">(</span><span class="va">n_rows</span><span class="op">/</span><span class="fl">2</span><span class="op">)</span><span class="op">:</span><span class="op">(</span><span class="op">(</span><span class="va">n_rows</span><span class="op">/</span><span class="fl">2</span><span class="op">)</span> <span class="op">+</span> <span class="fl">1</span><span class="op">)</span>, <span class="op">]</span></span>
<span></span>
<span><span class="co">#part 4:</span></span>
<span><span class="va">data_head</span> <span class="op">&lt;-</span> <span class="va">data</span><span class="op">[</span><span class="op">-</span><span class="op">(</span><span class="fl">7</span><span class="op">:</span><span class="va">n_rows</span><span class="op">)</span>, <span class="op">]</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="factors">Factors<a class="anchor" aria-label="anchor" href="#factors"></a>
</h2>
<hr class="half-width">
<p>R has a special data class, called factors, to deal with categorical
data that you may encounter when creating plots or doing statistical
analyses. Factors are very useful and play a key role in making R
particularly well suited to working with data.</p>
<p>Factors represent categorical data. They are stored as integers
associated with labels, and can be ordered (ordinal) or unordered
(nominal). Factors create a structured relation between the different
levels (values) of a categorical variable, such as days of the week or
responses to a question in a survey. This can make it easier to see how
one element relates to the other elements in a column. While factors
look (and often behave) like character vectors, they are actually
treated as integer vectors by <code>R</code>. So, you need to be very
careful when treating them as strings.</p>
<p>Once created, factors can only contain a pre-defined set of values,
known as <em>levels</em>. By default, R always sorts levels in
alphabetical order. For instance, if you have a factor with 2
levels:</p>
<div class="codewrapper sourceCode" id="cb25">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ballot_type</span> <span class="op">&lt;-</span> <span class="fu">factor</span><span class="op">(</span><span class="fu">c</span><span class="op">(</span><span class="st">"in-person"</span>, <span class="st">"absentee"</span>, <span class="st">"in-person"</span>, <span class="st">"in-person"</span>, <span class="st">"absentee"</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<p>R will assign <code>1</code> to the level <code>"absentee"</code> and
<code>2</code> to the level <code>"in-person"</code> (because
<code>a</code> comes before <code>i</code>, even though the first
element in this vector is <code>"in-person"</code>). You can see this by
using the function <code>levels()</code> and you can find the number of
levels using <code>nlevels()</code>:</p>
<div class="codewrapper sourceCode" id="cb26">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">levels</span><span class="op">(</span><span class="va">ballot_type</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "absentee"  "in-person"</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb28">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">nlevels</span><span class="op">(</span><span class="va">ballot_type</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 2</code></pre>
</div>
<p>Sometimes, the order of the factors does not matter. Other times you
might want to specify the order because it is meaningful (e.g., “low”,
“medium”, “high”). It may improve your visualization, or it may be
required by a particular type of analysis. Here, one way to reorder our
levels in the <code>ballot_type</code> vector would be:</p>
<div class="codewrapper sourceCode" id="cb30">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ballot_type</span> <span class="co">#current order</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] in-person absentee  in-person in-person absentee
Levels: absentee in-person</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb32">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ballot_type</span> <span class="op">&lt;-</span> <span class="fu">factor</span><span class="op">(</span><span class="va">ballot_type</span>, </span>
<span>                      levels <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="st">"in-person"</span>, <span class="st">"absentee"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">ballot_type</span> <span class="co">#re-ordered</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] in-person absentee  in-person in-person absentee
Levels: in-person absentee</code></pre>
</div>
<p>In R’s memory, these factors are represented by integers (1, 2), but
are more informative than integers because factors are self describing:
<code>"in-person"</code>, <code>"absentee"</code> is more descriptive
than <code>1</code>, and <code>2</code>. Which one is “absentee”? You
wouldn’t be able to tell just from the integer data. Factors, however,
have this information built in. It is particularly helpful when there
are many levels, and makes renaming levels easier. Let’s say we made a
mistake and need to recode “in-person” to “provisional”. We can do this
using the <code>fct_recode()</code> function from the
<strong><code>forcats</code></strong> package (included in the
<strong><code>tidyverse</code></strong>) – a package that provides some
extra tools to work with factors.</p>
<div class="codewrapper sourceCode" id="cb34">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">levels</span><span class="op">(</span><span class="va">ballot_type</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "in-person" "absentee" </code></pre>
</div>
<div class="codewrapper sourceCode" id="cb36">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ballot_type</span> <span class="op">&lt;-</span> <span class="fu">fct_recode</span><span class="op">(</span><span class="va">ballot_type</span>, </span>
<span>                          <span class="st">"provisional"</span> <span class="op">=</span> <span class="st">"in-person"</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#alternatively, we could change the "in-person" level directly using the </span></span>
<span><span class="co">#levels() function, but we have to remember that "in-person" is the first level</span></span>
<span><span class="co">#levels(ballot_type)[1] &lt;- "provisional"</span></span>
<span></span>
<span><span class="fu">levels</span><span class="op">(</span><span class="va">ballot_type</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "provisional" "absentee"   </code></pre>
</div>
<div class="codewrapper sourceCode" id="cb38">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ballot_type</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] provisional absentee    provisional provisional absentee
Levels: provisional absentee</code></pre>
</div>
<p>So far, your factor is unordered, like a nominal variable. R does not
know the difference between a nominal and an ordinal variable. You make
your factor an ordered factor by using the <code>ordered = TRUE</code>
option inside your factor function. Note how the reported levels changed
from the unordered factor above to the ordered version below. Ordered
levels use the less than sign <code>&lt;</code> to denote level
ranking.</p>
<div class="codewrapper sourceCode" id="cb40">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ballot_type_ordered</span> <span class="op">&lt;-</span> <span class="fu">factor</span><span class="op">(</span><span class="va">ballot_type</span>, </span>
<span>                              ordered <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="va">ballot_type_ordered</span> <span class="co">#now ordered</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] provisional absentee    provisional provisional absentee
Levels: provisional &lt; absentee</code></pre>
</div>
<div class="section level3">
<h3 id="converting-factors">Converting Factors<a class="anchor" aria-label="anchor" href="#converting-factors"></a>
</h3>
<p>If you need to convert a factor to a character vector, you use
<code>as.character(x)</code>.</p>
<div class="codewrapper sourceCode" id="cb42">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">as.character</span><span class="op">(</span><span class="va">ballot_type</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "provisional" "absentee"    "provisional" "provisional" "absentee"   </code></pre>
</div>
<p>Converting factors where the levels appear as numbers (such as
concentration levels, or years) to a numeric vector is a little
trickier. The <code>as.numeric()</code> function returns the index
values of the factor, not its levels, so it will result in an entirely
new (and unwanted in this case) set of numbers. One method to avoid this
is to convert factors to characters, and then to numbers. Another method
is to use the <code>levels()</code> function. Compare:</p>
<div class="codewrapper sourceCode" id="cb44">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">year_fct</span> <span class="op">&lt;-</span> <span class="fu">factor</span><span class="op">(</span><span class="fu">c</span><span class="op">(</span><span class="fl">1990</span>, <span class="fl">1983</span>, <span class="fl">1977</span>, <span class="fl">1998</span>, <span class="fl">1990</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">as.numeric</span><span class="op">(</span><span class="va">year_fct</span><span class="op">)</span>                     <span class="co">#wrong! and with no warning either...</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 3 2 1 4 3</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb46">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">as.numeric</span><span class="op">(</span><span class="fu">as.character</span><span class="op">(</span><span class="va">year_fct</span><span class="op">)</span><span class="op">)</span>       <span class="co">#technically works...</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 1990 1983 1977 1998 1990</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb48">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">as.numeric</span><span class="op">(</span><span class="fu">levels</span><span class="op">(</span><span class="va">year_fct</span><span class="op">)</span><span class="op">)</span><span class="op">[</span><span class="va">year_fct</span><span class="op">]</span>   <span class="co">#recommended methodology! :)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 1990 1983 1977 1998 1990</code></pre>
</div>
<p>Notice that in the recommended <code>levels()</code> approach, three
important steps occur:</p>
<ul>
<li>We obtain all the factor levels using
<code>levels(year_fct)</code>
</li>
<li>We convert these levels to numeric values using
<code>as.numeric(levels(year_fct))</code>
</li>
<li>We then access these numeric values using the underlying integers of
the vector <code>year_fct</code> inside the square brackets</li>
</ul>
</div>
<div class="section level3">
<h3 id="renaming-factors">Renaming Factors<a class="anchor" aria-label="anchor" href="#renaming-factors"></a>
</h3>
<p>When your data is stored as a factor, you can use the
<code>plot()</code> function to get a quick glance at the number of
observations represented by each factor level. Let’s create some new
data called <code>ballotData</code>, convert it into a factor, and use
it to look at the number of ballots that are in-person or absentee:</p>
<div class="codewrapper sourceCode" id="cb50">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#create data</span></span>
<span><span class="va">ballotData</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span><span class="st">"in-person"</span>, <span class="st">"in-person"</span>, <span class="st">"in-person"</span>, <span class="st">"in-person"</span>, <span class="st">"in-person"</span>, <span class="st">"in-person"</span>, <span class="st">"in-person"</span>, <span class="st">"absentee"</span>, <span class="st">"absentee"</span>, <span class="st">"absentee"</span>, <span class="st">"absentee"</span>, <span class="st">"absentee"</span>, <span class="cn">NA</span>, <span class="cn">NA</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#convert it into a factor</span></span>
<span><span class="va">ballotData</span> <span class="op">&lt;-</span> <span class="fu">as.factor</span><span class="op">(</span><span class="va">ballotData</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#prints out the data (as a vector)</span></span>
<span><span class="va">ballotData</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code> [1] in-person in-person in-person in-person in-person in-person in-person
 [8] absentee  absentee  absentee  absentee  absentee  &lt;NA&gt;      &lt;NA&gt;
Levels: absentee in-person</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb52">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#bar plot of the number of cases per ballot type:</span></span>
<span><span class="fu">plot</span><span class="op">(</span><span class="va">ballotData</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="fig/02-starting-with-data-rendered-factor-plot-default-order-1.png" alt="Bar plot of Number of Cases per Ballot Type" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><p>Looking at the plot compared to the output of the vector, we can see
that in addition to “absentee”s and “in-person”s, there are some people
for whom their ballot type was not noted. Consequently, these people do
not appear on the plot! Let’s encode them differently so they can be
counted and visualized in our plot.</p>
<div class="codewrapper sourceCode" id="cb53">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#recreates the data</span></span>
<span><span class="va">ballotData</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span><span class="st">"in-person"</span>, <span class="st">"in-person"</span>, <span class="st">"in-person"</span>, <span class="st">"in-person"</span>, <span class="st">"in-person"</span>, <span class="st">"in-person"</span>, <span class="st">"in-person"</span>, <span class="st">"absentee"</span>, <span class="st">"absentee"</span>, <span class="st">"absentee"</span>, <span class="st">"absentee"</span>, <span class="st">"absentee"</span>, <span class="cn">NA</span>, <span class="cn">NA</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#replace the missing data with "undetermined"</span></span>
<span><span class="va">ballotData</span><span class="op">[</span><span class="fu">is.na</span><span class="op">(</span><span class="va">ballotData</span><span class="op">)</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">"undetermined"</span></span>
<span></span>
<span><span class="co">#convert it into a factor</span></span>
<span><span class="va">ballotData</span> <span class="op">&lt;-</span> <span class="fu">as.factor</span><span class="op">(</span><span class="va">ballotData</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#prints out the data (as a vector)</span></span>
<span><span class="va">ballotData</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code> [1] in-person    in-person    in-person    in-person    in-person
 [6] in-person    in-person    absentee     absentee     absentee
[11] absentee     absentee     undetermined undetermined
Levels: absentee in-person undetermined</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb55">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#bar plot of the number of cases per ballot type:</span></span>
<span><span class="fu">plot</span><span class="op">(</span><span class="va">ballotData</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="fig/02-starting-with-data-rendered-factor-plot-reorder-1.png" alt="Bar plot of Number of Cases per Ballot Type (including missing values)" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><div id="exercise-1" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="exercise-1" class="callout-inner">
<h3 class="callout-title">Exercise</h3>
<div class="callout-content">
<ol style="list-style-type: decimal">
<li>Rename the levels of the factor to be in title case:
“Absentee”,“In-Person”, and “Undetermined”.</li>
</ol>
<p>2, Now that we have renamed the factor level to “Undetermined”, can
you recreate the bar plot such that “Undetermined” is first (before
“Absentee”)?</p>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Show me the solution </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" aria-labelledby="headingSolution2" data-bs-parent="#accordionSolution2">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb56">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#part 1:</span></span>
<span><span class="va">ballotData</span> <span class="op">&lt;-</span> <span class="fu">fct_recode</span><span class="op">(</span><span class="va">ballotData</span>, </span>
<span>                         <span class="st">"Absentee"</span> <span class="op">=</span> <span class="st">"absentee"</span>,</span>
<span>                         <span class="st">"In-Person"</span> <span class="op">=</span> <span class="st">"in-person"</span>, </span>
<span>                         <span class="st">"Undetermined"</span> <span class="op">=</span> <span class="st">"undetermined"</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#part 2:</span></span>
<span><span class="va">ballotData</span> <span class="op">&lt;-</span> <span class="fu">factor</span><span class="op">(</span><span class="va">ballotData</span>, </span>
<span>                     levels <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="st">"Undetermined"</span>, <span class="st">"Absentee"</span>, <span class="st">"In-Person"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu">plot</span><span class="op">(</span><span class="va">ballotData</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="fig/02-starting-with-data-rendered-factor-plot-exercise-1.png" alt="Bar plot of Number of Cases per Ballot Type (including missing values)" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure>
</div>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="formatting-dates">Formatting Dates<a class="anchor" aria-label="anchor" href="#formatting-dates"></a>
</h2>
<hr class="half-width">
<p>Recall our coverage of dates in “Intro to R”. A best practice for
dealing with date data is to ensure that each component of your date is
available as a separate variable. In our data set, we have a column
<code>checkin_time</code> which contains information about the year,
month, day, hour, minute, and second that the person that submitted the
ballot arrived in the building. Let’s convert those dates into six
separate columns.</p>
<div class="codewrapper sourceCode" id="cb57">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">str</span><span class="op">(</span><span class="va">data</span><span class="op">)</span></span></code></pre>
</div>
<p>We are going to use the package
<strong><code>lubridate</code></strong>, which is included in the
<strong><code>tidyverse</code></strong> installation and should be
loaded by default. However, if we deal with older versions of tidyverse
(2022 and earlier), we can manually load it by typing
<code><a href="https://lubridate.tidyverse.org" class="external-link">library(lubridate)</a></code>.</p>
<p>If necessary, start by loading the required package:</p>
<div class="codewrapper sourceCode" id="cb58">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">library</span><span class="op">(</span><span class="va">lubridate</span><span class="op">)</span></span></code></pre>
</div>
<p>The lubridate function <code>ymd_hms()</code> takes a vector
representing year, month, day, hour, minutes, and seconds and converts
it to a <code>Date</code> vector.</p>
<p>Let’s extract our <code>checkin_time</code> column and inspect the
structure:</p>
<div class="codewrapper sourceCode" id="cb59">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">times</span> <span class="op">&lt;-</span> <span class="va">data</span><span class="op">$</span><span class="va">checkin_time</span></span>
<span><span class="fu">str</span><span class="op">(</span><span class="va">times</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code> POSIXct[1:352112], format: "2018-11-06 07:02:36" "2018-11-06 07:04:09" "2018-11-06 07:05:13" ...</code></pre>
</div>
<p>When we imported the data in R, <code>read_csv()</code> recognized
that this column contained date information. We can now use the
<code>day()</code>, <code>month()</code>, <code>year()</code>,
<code>hour()</code>, <code>minute()</code>, and <code>second()</code>
functions to extract this information from the date, and create new
columns in our tibble to store it:</p>
<div class="codewrapper sourceCode" id="cb61">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data</span><span class="op">$</span><span class="va">day</span> <span class="op">&lt;-</span> <span class="fu">day</span><span class="op">(</span><span class="va">times</span><span class="op">)</span></span>
<span><span class="va">data</span><span class="op">$</span><span class="va">month</span> <span class="op">&lt;-</span> <span class="fu">month</span><span class="op">(</span><span class="va">times</span><span class="op">)</span></span>
<span><span class="va">data</span><span class="op">$</span><span class="va">year</span> <span class="op">&lt;-</span> <span class="fu">year</span><span class="op">(</span><span class="va">times</span><span class="op">)</span></span>
<span><span class="va">data</span><span class="op">$</span><span class="va">hour</span> <span class="op">&lt;-</span> <span class="fu">hour</span><span class="op">(</span><span class="va">times</span><span class="op">)</span></span>
<span><span class="va">data</span><span class="op">$</span><span class="va">minute</span> <span class="op">&lt;-</span> <span class="fu">minute</span><span class="op">(</span><span class="va">times</span><span class="op">)</span></span>
<span><span class="va">data</span><span class="op">$</span><span class="va">seconds</span> <span class="op">&lt;-</span> <span class="fu">second</span><span class="op">(</span><span class="va">times</span><span class="op">)</span></span>
<span></span>
<span><span class="va">data</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 352,112 × 12
   checkin_id  checkin_length checkin_time        location precinct device   day
   &lt;chr&gt;                &lt;dbl&gt; &lt;dttm&gt;              &lt;chr&gt;    &lt;chr&gt;    &lt;chr&gt;  &lt;int&gt;
 1 CHECKIN_00…             45 2018-11-06 07:02:36 LOCATIO… PRECINC… DEVIC…     6
 2 CHECKIN_00…             29 2018-11-06 07:04:09 LOCATIO… PRECINC… DEVIC…     6
 3 CHECKIN_00…             65 2018-11-06 07:05:13 LOCATIO… PRECINC… DEVIC…     6
 4 CHECKIN_00…             28 2018-11-06 07:06:26 LOCATIO… PRECINC… DEVIC…     6
 5 CHECKIN_00…             17 2018-11-06 07:08:08 LOCATIO… PRECINC… DEVIC…     6
 6 CHECKIN_00…             56 2018-11-06 07:08:32 LOCATIO… PRECINC… DEVIC…     6
 7 CHECKIN_00…             64 2018-11-06 07:09:36 LOCATIO… PRECINC… DEVIC…     6
 8 CHECKIN_00…            262 2018-11-06 07:10:18 LOCATIO… PRECINC… DEVIC…     6
 9 CHECKIN_00…            245 2018-11-06 07:12:57 LOCATIO… PRECINC… DEVIC…     6
10 CHECKIN_00…            260 2018-11-06 07:13:41 LOCATIO… PRECINC… DEVIC…     6
# ℹ 352,102 more rows
# ℹ 5 more variables: month &lt;dbl&gt;, year &lt;dbl&gt;, hour &lt;int&gt;, minute &lt;int&gt;,
#   seconds &lt;dbl&gt;</code></pre>
</div>
<p>Notice the six new columns at the end of our tibble.</p>
<p>In our example above, the <code>checkin_time</code> column was read
in correctly as a <code>Date</code> variable but generally that is not
the case. Date columns are often read in as <code>character</code>
variables and, similarly to how you can convert character variables to
dates using the <code>as_date()</code> function, columns can be
converted to the appropriate <code>Date/POSIXct</code>format.</p>
<p>Let’s say we have a generic tibble of IDs and character dates, as
configured:</p>
<div class="codewrapper sourceCode" id="cb63">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data2</span> <span class="op">&lt;-</span> <span class="fu">tibble</span><span class="op">(</span></span>
<span>  ID <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="st">"001"</span>, <span class="st">"002"</span>, <span class="st">"003"</span><span class="op">)</span>,</span>
<span>  Date <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="st">"01/05/2025"</span>, <span class="st">"04/23/2024"</span>, <span class="st">"12/25/1987"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">data2</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 3 × 2
  ID    Date
  &lt;chr&gt; &lt;chr&gt;
1 001   01/05/2025
2 002   04/23/2024
3 003   12/25/1987</code></pre>
</div>
<p>As you can see, the <code>Date</code> column is stored as characters.
We can easily convert this to a date type by doing one of the
following:</p>
<div class="codewrapper sourceCode" id="cb65">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#option 1: base R (as.Date)</span></span>
<span><span class="va">data2</span><span class="op">$</span><span class="va">Date1</span> <span class="op">&lt;-</span> <span class="fu">as.Date</span><span class="op">(</span><span class="va">data2</span><span class="op">$</span><span class="va">Date</span>, format <span class="op">=</span> <span class="st">"%m/%d/%Y"</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#option 2: lubridate (mdy)</span></span>
<span><span class="va">data2</span><span class="op">$</span><span class="va">Date2</span> <span class="op">&lt;-</span> <span class="fu">mdy</span><span class="op">(</span><span class="va">data2</span><span class="op">$</span><span class="va">Date</span><span class="op">)</span></span>
<span></span>
<span><span class="va">data2</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 3 × 4
  ID    Date       Date1      Date2
  &lt;chr&gt; &lt;chr&gt;      &lt;date&gt;     &lt;date&gt;
1 001   01/05/2025 2025-01-05 2025-01-05
2 002   04/23/2024 2024-04-23 2024-04-23
3 003   12/25/1987 1987-12-25 1987-12-25</code></pre>
</div>
<p><code>Date1</code> and <code>Date2</code> store the exact same data!
Lubridate is preferred to base R, but either function can be used.</p>
</section><section><h2 class="section-heading" id="outputting-data">Outputting Data<a class="anchor" aria-label="anchor" href="#outputting-data"></a>
</h2>
<hr class="half-width">
<p>Occasionally, after editing a data set within RStudio, you may want
to output the updated data set to a CSV file. This would allow you to
open the updated information in Excel, Google Sheets, or a different
RMarkdown file!</p>
<p>To output a file to CSV, we will be using the
<code>write_csv()</code> function from the
<strong><code>readr</code></strong> package. Below, we will be
outputting our updated data with our new date and time columns as
<code>"checkin_data_2.csv"</code>:</p>
<div class="codewrapper sourceCode" id="cb67">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#takes the tibble and outputs it as a csv file</span></span>
<span><span class="fu">write_csv</span><span class="op">(</span><span class="va">data</span>, <span class="st">"data/checkin_data_2.csv"</span><span class="op">)</span></span></code></pre>
</div>
<p>When choosing the name for the new file, ensure there are no files
with the same name. By default, <code>write_csv()</code> will overwrite
any files of the same name without a warning!</p>
<p>Additionally, you may have noticed we included the file path when
specifying the name of the new CSV. When creating any sort of new file –
whether that be an image, CSV, or otherwise – R will place the file in
the current working directory! In other words, R will always place new
files in the same folder as the RMarkdown you’re working in, unless
specified otherwise.</p>
<p>Since we have a specific folder (called <code>"data"</code>) to store
our csv files, we specify that we want the new CSV file to go in that
folder by adding <code>"data/"</code> before the file name!</p>
<p>If you want to output your new csv to a different file outside of the
working directory, you can use an entire file path (ex.
<code>"C:/Users/name/Documents/checkin_data_2.csv"</code>) to specify
exactly where you want the file to be saved.</p>
<p>Note: similarly to reading in CSV files,
<strong><code>readr</code></strong> has a alternate version of
<code>write_csv()</code> called <code>write_csv2()</code> that uses
commas as decimal separators and semicolons as field delimiters.</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<span class="callout-header">Key Points</span>
<div class="callout-inner">
<div class="callout-content">
<ul>
<li>Use read_csv to read tabular data in R.</li>
<li>Access rows and columns in a tibble in R.</li>
<li>Use factors to represent categorical data in R.</li>
<li>Use datetime to represent data in R.</li>
<li>Output an updated data set to CSV in R.</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></section><section id="aio-03-dplyr"><p>Content from <a href="03-dplyr.html">Data Wrangling with dplyr</a></p>
<hr>
<p>Last updated on 2025-11-11 |

        <a href="https://github.com/EngineeringForDemocracy/r-election-workers/edit/main/episodes/03-dplyr.Rmd" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How can I select specific rows and columns from a tibble using
dplyr?</li>
<li>How does the pipe operator <strong><code>(%\&gt;%)</code></strong>
help in combining multiple commands into a single workflow?</li>
<li>What is the advantage of using
<strong><code>mutate()</code></strong> for creating new variables, and
how does it work?</li>
<li>How can I summarize my data by grouping observations and applying
summary statistics with dplyr?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Understand the purpose of the <strong><code>dplyr</code></strong>
package.</li>
<li>Learn how to select specific columns from a tibble using
<strong><code>select</code></strong>.</li>
<li>Learn how to filter rows based on conditions using
<strong><code>filter()</code></strong>.</li>
<li>Use the pipe operator <strong><code>(%\&gt;%)</code></strong> to
seamlessly chain multiple dplyr commands.</li>
<li>Create new columns in a tibble with
<strong><code>mutate()</code></strong>, deriving them from existing
data.</li>
<li>Apply the split-apply-combine strategy using
<strong><code>group_by()</code></strong> and
<strong><code>summarize()</code></strong> to generate summary
statistics.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p><strong><code>dplyr</code></strong> is a powerful and intuitive
package in <strong><code>R</code></strong> designed to make data
manipulation both easy and efficient. It is part of the tidyverse
ecosystem, which emphasizes readable, consistent syntax for working with
data. We’re going to learn some of the most common
<strong><code>dplyr</code></strong> functions:</p>
<ul>
<li>
<code>select()</code>: subset columns</li>
<li>
<code>filter()</code>: subset rows on conditions</li>
<li>
<code>mutate()</code>: create new columns by using information from
other columns</li>
<li>
<code>group_by()</code> and <code>summarize()</code>: create summary
statistics on grouped data</li>
<li>
<code>arrange()</code>: sort results</li>
<li>
<code>count()</code>: count discrete values</li>
</ul>
<p>As covered in “Starting with Data”,
<strong><code>dplyr</code></strong> is also part of the tidyverse and
will be loaded in R’s memory when we call
<code><a href="https://tidyverse.tidyverse.org" class="external-link">library(tidyverse)</a></code>.</p>
<div id="note" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<span class="callout-header">Callout</span>
<div id="note" class="callout-inner">
<h3 class="callout-title">Note</h3>
<div class="callout-content">
<p>The packages in the tidyverse, namely
<strong><code>dplyr</code></strong>, <strong><code>tidyr</code></strong>
and <strong><code>ggplot2</code></strong> accept both the British
(e.g. <em>summarise</em>) and American (e.g. <em>summarize</em>)
spelling variants of different function and option names. For this
lesson, we utilize the American spellings of different functions;
however, feel free to use either whichever variant feels best for
you!</p>
</div>
</div>
</div>
<p>To begin working with <strong><code>dplyr</code></strong>, let’s
start by loading in the packages and data set:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#load packages</span></span>
<span><span class="kw">library</span><span class="op">(</span><span class="va">tidyverse</span><span class="op">)</span></span>
<span><span class="kw">library</span><span class="op">(</span><span class="va">here</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#read in data</span></span>
<span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu">read_csv</span><span class="op">(</span><span class="fu">here</span><span class="op">(</span><span class="st">"data"</span>, <span class="st">"checkin_data.csv"</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<section><h2 class="section-heading" id="selecting-columns">Selecting Columns<a class="anchor" aria-label="anchor" href="#selecting-columns"></a>
</h2>
<hr class="half-width">
<p>The first function we will be covering is the
<strong><code>select()</code></strong> function! This function allows us
to select specific columns of our data set and accepts two primary types
of arguments: the original data set, and the column(s) to isolate.</p>
<p>In our case, for example, we are interested in seeing ONLY the
precinct id’s in our data set, so our arguments will be
<code>data</code> and <code>precinct</code>:</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#selects JUST the precinct column</span></span>
<span><span class="fu">select</span><span class="op">(</span><span class="va">data</span>, <span class="va">precinct</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 352,112 × 1
   precinct
   &lt;chr&gt;
 1 PRECINCT_001
 2 PRECINCT_001
 3 PRECINCT_001
 4 PRECINCT_001
 5 PRECINCT_001
 6 PRECINCT_001
 7 PRECINCT_001
 8 PRECINCT_001
 9 PRECINCT_001
10 PRECINCT_001
# ℹ 352,102 more rows</code></pre>
</div>
<p>Using the <strong><code>select</code></strong> function, you can also
select MULTIPLE columns. This can be particularly helpful with larger
data sets. Theoretically, this function can be performed using
subsetting instead of the <strong><code>select</code></strong> function,
but it’s best practice to use dplyr functions when possible:</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#selects the precinct column AND the checkin_time column</span></span>
<span><span class="fu">select</span><span class="op">(</span><span class="va">data</span>, <span class="va">precinct</span>, <span class="va">checkin_time</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 352,112 × 2
   precinct     checkin_time
   &lt;chr&gt;        &lt;dttm&gt;
 1 PRECINCT_001 2018-11-06 07:02:36
 2 PRECINCT_001 2018-11-06 07:04:09
 3 PRECINCT_001 2018-11-06 07:05:13
 4 PRECINCT_001 2018-11-06 07:06:26
 5 PRECINCT_001 2018-11-06 07:08:08
 6 PRECINCT_001 2018-11-06 07:08:32
 7 PRECINCT_001 2018-11-06 07:09:36
 8 PRECINCT_001 2018-11-06 07:10:18
 9 PRECINCT_001 2018-11-06 07:12:57
10 PRECINCT_001 2018-11-06 07:13:41
# ℹ 352,102 more rows</code></pre>
</div>
<p>In some cases, you may want to select multiple, adjacent columns.
Instead of writing out each individual column name directly, they can be
selected with a <strong><code>:</code></strong>, as seen below:</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#selects all columns from checkin_time to precinct</span></span>
<span><span class="fu">select</span><span class="op">(</span><span class="va">data</span>, <span class="va">checkin_time</span><span class="op">:</span><span class="va">precinct</span><span class="op">)</span></span></code></pre>
</div>
<p>You can see a visualized example of the
<strong><code>select()</code></strong> function on <a href="https://tidydatatutor.com/vis.html#code=library%28dplyr%29%0Alibrary%28palmerpenguins%29%0A%0Aset.seed%282021-12-03%29%0A%0Asample_penguins%20%3C-%20penguins%20%25%3E%25%0A%20%20group_by%28species%29%20%25%3E%25%20%0A%20%20sample_n%283%29%20%25%3E%25%20%0A%20%20select%28species,%20island,%20bill_length_mm%29%20%25%3E%25%20%0A%20%20ungroup%28%29%0A%0Asample_penguins%20%25%3E%25%20%0A%20%20select%28species,%20bill_length_mm%29&amp;d=2025-04-18&amp;lang=r&amp;v=v1" class="external-link">tidy
data tutor</a></p>
</section><section><h2 class="section-heading" id="filtering-rows">Filtering Rows<a class="anchor" aria-label="anchor" href="#filtering-rows"></a>
</h2>
<hr class="half-width">
<p>Our next function we will be covering is the
<strong><code>filter()</code></strong> function! This function allows us
to choose rows based on specific criteria, and accepts two arguments:
the original data set, and the condition to select the rows based off
of. In this case, we ONLY want rows where the precinct is
“PRECINCT_001”:</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#filters rows where the precinct is "PRECINCT_001"</span></span>
<span><span class="fu">filter</span><span class="op">(</span><span class="va">data</span>, <span class="va">precinct</span> <span class="op">==</span> <span class="st">"PRECINCT_001"</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 648 × 6
   checkin_id     checkin_length checkin_time        location    precinct device
   &lt;chr&gt;                   &lt;dbl&gt; &lt;dttm&gt;              &lt;chr&gt;       &lt;chr&gt;    &lt;chr&gt;
 1 CHECKIN_000001             45 2018-11-06 07:02:36 LOCATION_0… PRECINC… DEVIC…
 2 CHECKIN_000002             29 2018-11-06 07:04:09 LOCATION_0… PRECINC… DEVIC…
 3 CHECKIN_000003             65 2018-11-06 07:05:13 LOCATION_0… PRECINC… DEVIC…
 4 CHECKIN_000004             28 2018-11-06 07:06:26 LOCATION_0… PRECINC… DEVIC…
 5 CHECKIN_000005             17 2018-11-06 07:08:08 LOCATION_0… PRECINC… DEVIC…
 6 CHECKIN_000006             56 2018-11-06 07:08:32 LOCATION_0… PRECINC… DEVIC…
 7 CHECKIN_000007             64 2018-11-06 07:09:36 LOCATION_0… PRECINC… DEVIC…
 8 CHECKIN_000008            262 2018-11-06 07:10:18 LOCATION_0… PRECINC… DEVIC…
 9 CHECKIN_000009            245 2018-11-06 07:12:57 LOCATION_0… PRECINC… DEVIC…
10 CHECKIN_000010            260 2018-11-06 07:13:41 LOCATION_0… PRECINC… DEVIC…
# ℹ 638 more rows</code></pre>
</div>
<p>You can also use comparison operators within
<strong><code>filter()</code></strong> arguments! This includes
less-than (&lt;), less-than or equal-to (&lt;=), greater-than (&gt;),
greater-than or equal-to (&gt;=), or not-equal-to (!=).</p>
<p>For example, you could filter for all rows where the check-in length
is less-than or equal-to 20 seconds:</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#filters rows with the "less-than or equal-to"/"&lt;=" operator</span></span>
<span><span class="fu">filter</span><span class="op">(</span><span class="va">data</span>, <span class="va">checkin_length</span> <span class="op">&lt;=</span> <span class="fl">20</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 32,264 × 6
   checkin_id     checkin_length checkin_time        location    precinct device
   &lt;chr&gt;                   &lt;dbl&gt; &lt;dttm&gt;              &lt;chr&gt;       &lt;chr&gt;    &lt;chr&gt;
 1 CHECKIN_000005             17 2018-11-06 07:08:08 LOCATION_0… PRECINC… DEVIC…
 2 CHECKIN_000017             19 2018-11-06 07:20:40 LOCATION_0… PRECINC… DEVIC…
 3 CHECKIN_000059             19 2018-11-06 08:07:12 LOCATION_0… PRECINC… DEVIC…
 4 CHECKIN_000079             20 2018-11-06 08:25:41 LOCATION_0… PRECINC… DEVIC…
 5 CHECKIN_000092             18 2018-11-06 08:37:45 LOCATION_0… PRECINC… DEVIC…
 6 CHECKIN_000094             19 2018-11-06 08:39:38 LOCATION_0… PRECINC… DEVIC…
 7 CHECKIN_000119             17 2018-11-06 08:57:22 LOCATION_0… PRECINC… DEVIC…
 8 CHECKIN_000162             19 2018-11-06 09:30:57 LOCATION_0… PRECINC… DEVIC…
 9 CHECKIN_000163             20 2018-11-06 09:32:14 LOCATION_0… PRECINC… DEVIC…
10 CHECKIN_000190             18 2018-11-06 09:49:41 LOCATION_0… PRECINC… DEVIC…
# ℹ 32,254 more rows</code></pre>
</div>
<p>Similarly to the <strong><code>select()</code></strong> function, the
<strong><code>filter()</code></strong> function also allows us to
specify multiple conditions. However, instead of splitting these by
commas, conditions are combined using ‘and’, ‘or’, or comparison
statements.</p>
<p>In an ‘and’ statement, an observation (row) must meet <em>all</em>
criteria to be included in the resulting tibble. To form ‘and’
statements within dplyr, we can pass our desired conditions as arguments
in the <strong><code>filter()</code></strong> function, separated by an
ampersand (&amp;).</p>
<p>Below, let’s filter rows that include “PRECINCT_001” as the precinct
<em>and</em> “DEVICE_002” as the device:</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#filters rows with the "and"/"&amp;" logical operator</span></span>
<span><span class="fu">filter</span><span class="op">(</span><span class="va">data</span>, <span class="va">precinct</span> <span class="op">==</span> <span class="st">"PRECINCT_001"</span> <span class="op">&amp;</span> <span class="va">device</span> <span class="op">==</span> <span class="st">"DEVICE_002"</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 265 × 6
   checkin_id     checkin_length checkin_time        location    precinct device
   &lt;chr&gt;                   &lt;dbl&gt; &lt;dttm&gt;              &lt;chr&gt;       &lt;chr&gt;    &lt;chr&gt;
 1 CHECKIN_000006             56 2018-11-06 07:08:32 LOCATION_0… PRECINC… DEVIC…
 2 CHECKIN_000009            245 2018-11-06 07:12:57 LOCATION_0… PRECINC… DEVIC…
 3 CHECKIN_000019             41 2018-11-06 07:23:05 LOCATION_0… PRECINC… DEVIC…
 4 CHECKIN_000026             22 2018-11-06 07:33:38 LOCATION_0… PRECINC… DEVIC…
 5 CHECKIN_000028             21 2018-11-06 07:35:44 LOCATION_0… PRECINC… DEVIC…
 6 CHECKIN_000031             33 2018-11-06 07:37:36 LOCATION_0… PRECINC… DEVIC…
 7 CHECKIN_000041             56 2018-11-06 07:49:06 LOCATION_0… PRECINC… DEVIC…
 8 CHECKIN_000044             23 2018-11-06 07:52:08 LOCATION_0… PRECINC… DEVIC…
 9 CHECKIN_000046             24 2018-11-06 07:54:06 LOCATION_0… PRECINC… DEVIC…
10 CHECKIN_000057             48 2018-11-06 08:05:54 LOCATION_0… PRECINC… DEVIC…
# ℹ 255 more rows</code></pre>
</div>
<p>In an ‘or’ statement, an observation (row) must meet <em>at least
one</em> criteria to be included in the resulting tibble. To form ‘or’
statements within dplyr, we can pass our desired conditions as arguments
in the <strong><code>filter()</code></strong> function, separated by a
vertical bar (|).</p>
<p>Below, let’s filter rows that include “PRECINCT_001” <em>or</em>
“PRECINCT_002” as the precinct:</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#filters rows with the "or"/"|" logical operator</span></span>
<span><span class="fu">filter</span><span class="op">(</span><span class="va">data</span>, <span class="va">precinct</span> <span class="op">==</span> <span class="st">"PRECINCT_001"</span> <span class="op">|</span> <span class="va">precinct</span> <span class="op">==</span> <span class="st">"PRECINCT_002"</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 905 × 6
   checkin_id     checkin_length checkin_time        location    precinct device
   &lt;chr&gt;                   &lt;dbl&gt; &lt;dttm&gt;              &lt;chr&gt;       &lt;chr&gt;    &lt;chr&gt;
 1 CHECKIN_000001             45 2018-11-06 07:02:36 LOCATION_0… PRECINC… DEVIC…
 2 CHECKIN_000002             29 2018-11-06 07:04:09 LOCATION_0… PRECINC… DEVIC…
 3 CHECKIN_000003             65 2018-11-06 07:05:13 LOCATION_0… PRECINC… DEVIC…
 4 CHECKIN_000004             28 2018-11-06 07:06:26 LOCATION_0… PRECINC… DEVIC…
 5 CHECKIN_000005             17 2018-11-06 07:08:08 LOCATION_0… PRECINC… DEVIC…
 6 CHECKIN_000006             56 2018-11-06 07:08:32 LOCATION_0… PRECINC… DEVIC…
 7 CHECKIN_000007             64 2018-11-06 07:09:36 LOCATION_0… PRECINC… DEVIC…
 8 CHECKIN_000008            262 2018-11-06 07:10:18 LOCATION_0… PRECINC… DEVIC…
 9 CHECKIN_000009            245 2018-11-06 07:12:57 LOCATION_0… PRECINC… DEVIC…
10 CHECKIN_000010            260 2018-11-06 07:13:41 LOCATION_0… PRECINC… DEVIC…
# ℹ 895 more rows</code></pre>
</div>
<p>you can see a visualized examples of the
<strong><code>filter()</code></strong> function on <a href="https://tidydatatutor.com/vis.html#code=library%28dplyr%29%0Alibrary%28palmerpenguins%29%0A%0Aset.seed%282021-12-03%29%0A%0Asample_penguins%20%3C-%20penguins%20%25%3E%25%0A%20%20group_by%28species%29%20%25%3E%25%20%0A%20%20sample_n%283%29%20%25%3E%25%20%0A%20%20select%28species,%20bill_length_mm%29%20%25%3E%25%20%0A%20%20ungroup%28%29%0A%0Asample_penguins%20%25%3E%25%20%0A%20%20filter%28bill_length_mm%20%3E%2045%29&amp;d=2025-04-18&amp;lang=r&amp;v=v1" class="external-link">tidy
data tutor</a></p>
</section><section><h2 class="section-heading" id="using-pipes">Using Pipes<a class="anchor" aria-label="anchor" href="#using-pipes"></a>
</h2>
<hr class="half-width">
<p>In many cases, you will want to apply multiple functions at the same
time! Within dplyr, there are three ways to do this.</p>
<ol style="list-style-type: decimal">
<li>Intermediate Steps: Using this method, you apply the first function
to your data and save the result as a new object. After saving, the
second function is applied to your new object instead of the original
data. While this method is easy to understand, it can create many extra,
unnecessary objects in your R environment.</li>
</ol>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#step 1: apply filter function and save it to a new object (filtered_data)</span></span>
<span><span class="va">filtered_data</span> <span class="op">&lt;-</span> <span class="fu">filter</span><span class="op">(</span><span class="va">data</span>, <span class="va">precinct</span> <span class="op">==</span> <span class="st">"PRECINCT_005"</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#step 2: apply select function on the filtered_data object</span></span>
<span><span class="fu">select</span><span class="op">(</span><span class="va">filtered_data</span>, <span class="va">precinct</span>, <span class="va">checkin_time</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 762 × 2
   precinct     checkin_time
   &lt;chr&gt;        &lt;dttm&gt;
 1 PRECINCT_005 2018-11-06 11:39:28
 2 PRECINCT_005 2018-11-06 11:26:09
 3 PRECINCT_005 2018-11-06 18:25:45
 4 PRECINCT_005 2018-11-06 07:01:07
 5 PRECINCT_005 2018-11-06 07:01:22
 6 PRECINCT_005 2018-11-06 07:02:02
 7 PRECINCT_005 2018-11-06 07:02:02
 8 PRECINCT_005 2018-11-06 07:02:38
 9 PRECINCT_005 2018-11-06 07:02:50
10 PRECINCT_005 2018-11-06 07:03:23
# ℹ 752 more rows</code></pre>
</div>
<ol start="2" style="list-style-type: decimal">
<li>Nested Functions: Instead of saving intermediate results, you can
instead put your first function inside the second. This is called
nesting, and, while it works, can become confusing if more than two
functions are put together.</li>
</ol>
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Do it all in one go, nesting the functions</span></span>
<span><span class="fu">select</span><span class="op">(</span><span class="fu">filter</span><span class="op">(</span><span class="va">data</span>, <span class="va">precinct</span> <span class="op">==</span> <span class="st">"PRECINCT_005"</span><span class="op">)</span>, <span class="va">precinct</span>, <span class="va">checkin_time</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 762 × 2
   precinct     checkin_time
   &lt;chr&gt;        &lt;dttm&gt;
 1 PRECINCT_005 2018-11-06 11:39:28
 2 PRECINCT_005 2018-11-06 11:26:09
 3 PRECINCT_005 2018-11-06 18:25:45
 4 PRECINCT_005 2018-11-06 07:01:07
 5 PRECINCT_005 2018-11-06 07:01:22
 6 PRECINCT_005 2018-11-06 07:02:02
 7 PRECINCT_005 2018-11-06 07:02:02
 8 PRECINCT_005 2018-11-06 07:02:38
 9 PRECINCT_005 2018-11-06 07:02:50
10 PRECINCT_005 2018-11-06 07:03:23
# ℹ 752 more rows</code></pre>
</div>
<ol start="3" style="list-style-type: decimal">
<li>Using Pipes: <strong><code>Pipes</code></strong> allow you to
connect your commands in a simple, step-by-step way. These let you take
the output of one function and send it directly to the next, which is
useful when you need to do many things to the same data set! When
analyzing code with pipes, you can think of it as the word “then”.</li>
</ol>
<div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#takes the data THEN applies the filter function THEN applies the select function</span></span>
<span><span class="va">data</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">filter</span><span class="op">(</span><span class="va">precinct</span> <span class="op">==</span> <span class="st">"PRECINCT_005"</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="va">precinct</span>, <span class="va">checkin_time</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 762 × 2
   precinct     checkin_time
   &lt;chr&gt;        &lt;dttm&gt;
 1 PRECINCT_005 2018-11-06 11:39:28
 2 PRECINCT_005 2018-11-06 11:26:09
 3 PRECINCT_005 2018-11-06 18:25:45
 4 PRECINCT_005 2018-11-06 07:01:07
 5 PRECINCT_005 2018-11-06 07:01:22
 6 PRECINCT_005 2018-11-06 07:02:02
 7 PRECINCT_005 2018-11-06 07:02:02
 8 PRECINCT_005 2018-11-06 07:02:38
 9 PRECINCT_005 2018-11-06 07:02:50
10 PRECINCT_005 2018-11-06 07:03:23
# ℹ 752 more rows</code></pre>
</div>
<p>In the above code, you may have noticed that the <code>data</code>
data set was not included as an argument in either of the functions.
Since pipes take the object on its left and pass it as the first
argument to the function on its right, we don’t need to explicitly
include the tibble as an argument to the <code>filter()</code> and
<code>select()</code> functions anymore.</p>
<p>In R, there are two main types of pipe operators: 1.
<strong><code>|&gt;</code></strong>: called the <em>native</em> pipe —
included with base <strong><code>R</code></strong>. 2.
<strong><code>%&gt;%</code></strong>: called the <em>magrittr</em> pipe
— installed automatically with <strong><code>dplyr</code></strong>. This
pipe is the most common, and what we will be using throughout this
lesson.</p>
<p>Both pipes behave the exact same way, so the choice of which one to
use is a matter of taste.</p>
<div id="exercise" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="exercise" class="callout-inner">
<h3 class="callout-title">Exercise</h3>
<div class="callout-content">
<p>Using pipes, filter the <code>data</code> data set to include only
observations where the <code>device</code> is <code>"DEVICE_738"</code>
select only the columns <code>precinct</code>,
<code>checkin_time</code>, and <code>device</code>.</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb21">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">filter</span><span class="op">(</span><span class="va">device</span> <span class="op">==</span> <span class="st">"DEVICE_738"</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="va">precinct</span>, <span class="va">checkin_time</span>, <span class="va">device</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 134 × 3
   precinct     checkin_time        device
   &lt;chr&gt;        &lt;dttm&gt;              &lt;chr&gt;
 1 PRECINCT_332 2018-11-06 07:02:26 DEVICE_738
 2 PRECINCT_332 2018-11-06 07:03:10 DEVICE_738
 3 PRECINCT_332 2018-11-06 07:03:56 DEVICE_738
 4 PRECINCT_332 2018-11-06 07:04:27 DEVICE_738
 5 PRECINCT_332 2018-11-06 07:05:01 DEVICE_738
 6 PRECINCT_332 2018-11-06 07:06:00 DEVICE_738
 7 PRECINCT_332 2018-11-06 07:06:36 DEVICE_738
 8 PRECINCT_332 2018-11-06 07:07:03 DEVICE_738
 9 PRECINCT_332 2018-11-06 07:07:45 DEVICE_738
10 PRECINCT_332 2018-11-06 07:08:24 DEVICE_738
# ℹ 124 more rows</code></pre>
</div>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="split-apply-combine-data-analysis">Split-Apply-Combine Data Analysis<a class="anchor" aria-label="anchor" href="#split-apply-combine-data-analysis"></a>
</h2>
<hr class="half-width">
<p>Many data analysis tasks follow a pattern known as
<em>split-apply-combine</em>: 1. <strong>Split</strong> the data into
groups. 2. <strong>Apply</strong> some analysis or calculation to each
group. 3. <strong>Combine</strong> the results into a summary</p>
<p>The <strong><code>dplyr</code></strong> package makes this easy with
two main functions: - <code>group_by()</code> to define how you want to
split the data. - <code>summarize()</code> to apply one or more
calculations on each group and return a summary.</p>
<div class="section level3">
<h3 id="group_by">
<code>group_by()</code><a class="anchor" aria-label="anchor" href="#group_by"></a>
</h3>
<p>The <strong>`<code>group_by()</code></strong> function allows us to
treat parts of our data set as separate groups so other functions can
work within each group instead of on the entire data set. This function
accepts the one or more columns to group-by as arguments!</p>
<p>Below, we will be grouping the data by location, and filtering the
rows to only include the check-in(s) with the longest check-in length
for each location:</p>
<div class="codewrapper sourceCode" id="cb23">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#groups the data by location and applies filter</span></span>
<span><span class="va">data</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">group_by</span><span class="op">(</span><span class="va">location</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">filter</span><span class="op">(</span><span class="va">checkin_length</span> <span class="op">==</span> <span class="fu">max</span><span class="op">(</span><span class="va">checkin_length</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 561 × 6
# Groups:   location [417]
   checkin_id     checkin_length checkin_time        location    precinct device
   &lt;chr&gt;                   &lt;dbl&gt; &lt;dttm&gt;              &lt;chr&gt;       &lt;chr&gt;    &lt;chr&gt;
 1 CHECKIN_000032            300 2018-11-06 07:37:43 LOCATION_0… PRECINC… DEVIC…
 2 CHECKIN_000106            300 2018-11-06 08:51:39 LOCATION_0… PRECINC… DEVIC…
 3 CHECKIN_000640            300 2018-11-06 19:47:13 LOCATION_0… PRECINC… DEVIC…
 4 CHECKIN_000839            300 2018-11-06 16:50:29 LOCATION_0… PRECINC… DEVIC…
 5 CHECKIN_001137            299 2018-11-06 10:03:21 LOCATION_0… PRECINC… DEVIC…
 6 CHECKIN_002362            298 2018-11-06 19:09:12 LOCATION_0… PRECINC… DEVIC…
 7 CHECKIN_002572            299 2018-11-06 10:46:01 LOCATION_0… PRECINC… DEVIC…
 8 CHECKIN_003919            300 2018-11-06 18:05:53 LOCATION_0… PRECINC… DEVIC…
 9 CHECKIN_004805            298 2018-11-06 17:57:33 LOCATION_0… PRECINC… DEVIC…
10 CHECKIN_005944            300 2018-11-06 16:17:04 LOCATION_0… PRECINC… DEVIC…
# ℹ 551 more rows</code></pre>
</div>
<p>Additionally, when multiple columns are provided,
<strong>`<code>group_by()</code></strong> goes from left-to-right,
grouping by the first column, then within each group by the second, and
so on!</p>
<p>Below, we will be doing the same calculation that we did above, but
instead of grouping only by location, we will be grouping by location
<em>and</em> device:</p>
<div class="codewrapper sourceCode" id="cb25">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#groups the data by location and applies filter</span></span>
<span><span class="va">data</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">group_by</span><span class="op">(</span><span class="va">location</span>, <span class="va">device</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">filter</span><span class="op">(</span><span class="va">checkin_length</span> <span class="op">==</span> <span class="fu">max</span><span class="op">(</span><span class="va">checkin_length</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 1,344 × 6
# Groups:   location, device [1,215]
   checkin_id     checkin_length checkin_time        location    precinct device
   &lt;chr&gt;                   &lt;dbl&gt; &lt;dttm&gt;              &lt;chr&gt;       &lt;chr&gt;    &lt;chr&gt;
 1 CHECKIN_000032            300 2018-11-06 07:37:43 LOCATION_0… PRECINC… DEVIC…
 2 CHECKIN_000106            300 2018-11-06 08:51:39 LOCATION_0… PRECINC… DEVIC…
 3 CHECKIN_000640            300 2018-11-06 19:47:13 LOCATION_0… PRECINC… DEVIC…
 4 CHECKIN_000774            295 2018-11-06 12:52:23 LOCATION_0… PRECINC… DEVIC…
 5 CHECKIN_000839            300 2018-11-06 16:50:29 LOCATION_0… PRECINC… DEVIC…
 6 CHECKIN_001015            296 2018-11-06 08:36:18 LOCATION_0… PRECINC… DEVIC…
 7 CHECKIN_001137            299 2018-11-06 10:03:21 LOCATION_0… PRECINC… DEVIC…
 8 CHECKIN_001792            290 2018-11-06 08:00:47 LOCATION_0… PRECINC… DEVIC…
 9 CHECKIN_002210             75 2018-11-06 16:11:09 LOCATION_0… PRECINC… DEVIC…
10 CHECKIN_002362            298 2018-11-06 19:09:12 LOCATION_0… PRECINC… DEVIC…
# ℹ 1,334 more rows</code></pre>
</div>
<p>As you can see, there are additional rows, since we are looking at
the longest check-in times for each device within each location, instead
of just within each location!</p>
<p>After completing analysis, you may want to remove grouping! To do so,
you can use the <strong><code>ungroup()</code></strong> function:</p>
<div class="codewrapper sourceCode" id="cb27">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">group_by</span><span class="op">(</span><span class="va">location</span>, <span class="va">device</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">filter</span><span class="op">(</span><span class="va">checkin_length</span> <span class="op">==</span> <span class="fu">max</span><span class="op">(</span><span class="va">checkin_length</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">ungroup</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 1,344 × 6
   checkin_id     checkin_length checkin_time        location    precinct device
   &lt;chr&gt;                   &lt;dbl&gt; &lt;dttm&gt;              &lt;chr&gt;       &lt;chr&gt;    &lt;chr&gt;
 1 CHECKIN_000032            300 2018-11-06 07:37:43 LOCATION_0… PRECINC… DEVIC…
 2 CHECKIN_000106            300 2018-11-06 08:51:39 LOCATION_0… PRECINC… DEVIC…
 3 CHECKIN_000640            300 2018-11-06 19:47:13 LOCATION_0… PRECINC… DEVIC…
 4 CHECKIN_000774            295 2018-11-06 12:52:23 LOCATION_0… PRECINC… DEVIC…
 5 CHECKIN_000839            300 2018-11-06 16:50:29 LOCATION_0… PRECINC… DEVIC…
 6 CHECKIN_001015            296 2018-11-06 08:36:18 LOCATION_0… PRECINC… DEVIC…
 7 CHECKIN_001137            299 2018-11-06 10:03:21 LOCATION_0… PRECINC… DEVIC…
 8 CHECKIN_001792            290 2018-11-06 08:00:47 LOCATION_0… PRECINC… DEVIC…
 9 CHECKIN_002210             75 2018-11-06 16:11:09 LOCATION_0… PRECINC… DEVIC…
10 CHECKIN_002362            298 2018-11-06 19:09:12 LOCATION_0… PRECINC… DEVIC…
# ℹ 1,334 more rows</code></pre>
</div>
<p>The final table will no longer be considered “grouped”, which can be
helpful if you plan to do further operations that don’t rely on
grouping.</p>
</div>
<div class="section level3">
<h3 id="summarize">
<code>summarize()</code><a class="anchor" aria-label="anchor" href="#summarize"></a>
</h3>
<p>The
<strong><code>summarize()`** function is often used alongside **</code>group_by()`</strong>,
as it allows us to reduce a group of rows to a single row per group.
This function accepts one or more expressions that compute summary
statistics as arguments!</p>
<p>Some common <strong>`<code>summarize()</code></strong> summary
functions include: - mean(): calculates the average of a numeric column
- max()/min(): returns the maximum or minimum of a group - n(): counts
the number of rows in a group - n_distinct(): counts the number of
unique values in a column</p>
<p>Suppose we want to see how many total check-ins there were for each
precinct in our data set. We can do this by grouping the data by the
<code>precinct</code> column using
<strong><code>group_by()`** and then using the **</code>summarize()`</strong>
function to count each row within each precinct group, as seen
below:</p>
<div class="codewrapper sourceCode" id="cb29">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">group_by</span><span class="op">(</span><span class="va">precinct</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">summarize</span><span class="op">(</span>total_checkins <span class="op">=</span> <span class="fu">n</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 420 × 2
   precinct     total_checkins
   &lt;chr&gt;                 &lt;int&gt;
 1 PRECINCT_001            648
 2 PRECINCT_002            257
 3 PRECINCT_003            806
 4 PRECINCT_004            466
 5 PRECINCT_005            762
 6 PRECINCT_006            676
 7 PRECINCT_007           1347
 8 PRECINCT_008           1652
 9 PRECINCT_009            742
10 PRECINCT_010            882
# ℹ 410 more rows</code></pre>
</div>
<p>We can also apply <strong>`<code>summarize()</code></strong> on data
that has been grouped by multiple columns! Below, we will be grouping by
precinct and device, allowing us to see how many check-ins occurred for
each device within each precinct:</p>
<div class="codewrapper sourceCode" id="cb31">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">group_by</span><span class="op">(</span><span class="va">precinct</span>, <span class="va">device</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">summarize</span><span class="op">(</span>total_checkins <span class="op">=</span> <span class="fu">n</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>`summarise()` has grouped output by 'precinct'. You can override using the
`.groups` argument.</code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 1,778 × 3
# Groups:   precinct [420]
   precinct     device     total_checkins
   &lt;chr&gt;        &lt;chr&gt;               &lt;int&gt;
 1 PRECINCT_001 DEVICE_001            381
 2 PRECINCT_001 DEVICE_002            265
 3 PRECINCT_001 DEVICE_671              1
 4 PRECINCT_001 DEVICE_844              1
 5 PRECINCT_002 DEVICE_003            125
 6 PRECINCT_002 DEVICE_004            131
 7 PRECINCT_002 DEVICE_536              1
 8 PRECINCT_003 DEVICE_005            449
 9 PRECINCT_003 DEVICE_006            357
10 PRECINCT_004 DEVICE_006              1
# ℹ 1,768 more rows</code></pre>
</div>
<p>You’re not limited to a single summary statistic, either! For
example, you might want both the total number of check-ins <em>and</em>
the number of unique devices for each precinct. You can combine these in
one <strong><code>summarize()</code></strong> call:</p>
<div class="codewrapper sourceCode" id="cb34">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">group_by</span><span class="op">(</span><span class="va">precinct</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">summarize</span><span class="op">(</span></span>
<span>    total_checkins <span class="op">=</span> <span class="fu">n</span><span class="op">(</span><span class="op">)</span>,</span>
<span>    unique_devices <span class="op">=</span> <span class="fu">n_distinct</span><span class="op">(</span><span class="va">device</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 420 × 3
   precinct     total_checkins unique_devices
   &lt;chr&gt;                 &lt;int&gt;          &lt;int&gt;
 1 PRECINCT_001            648              4
 2 PRECINCT_002            257              3
 3 PRECINCT_003            806              2
 4 PRECINCT_004            466              5
 5 PRECINCT_005            762              5
 6 PRECINCT_006            676              2
 7 PRECINCT_007           1347              5
 8 PRECINCT_008           1652              5
 9 PRECINCT_009            742              7
10 PRECINCT_010            882              6
# ℹ 410 more rows</code></pre>
</div>
<p>Additionally, if you need to exclude certain rows before summarizing,
ensure you use <strong><code>filter()</code></strong> before grouping.
For example, to include only check-ins from a specific location, you can
do the following:</p>
<div class="codewrapper sourceCode" id="cb36">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">filter</span><span class="op">(</span><span class="va">location</span> <span class="op">==</span> <span class="st">"LOCATION_001"</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">group_by</span><span class="op">(</span><span class="va">precinct</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">summarize</span><span class="op">(</span>total_checkins <span class="op">=</span> <span class="fu">n</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 1 × 2
  precinct     total_checkins
  &lt;chr&gt;                 &lt;int&gt;
1 PRECINCT_001            646</code></pre>
</div>
<p>Additional examples of the <strong><code>group_by()</code></strong>
and <strong><code>summarize()</code></strong> functions can be found at
<a href="https://tidydatatutor.com/vis.html#code=library%28dplyr%29%0Alibrary%28palmerpenguins%29%0A%0Aset.seed%282021-12-03%29%0A%0Asample_penguins%20%3C-%20penguins%20%25%3E%25%0A%20%20group_by%28species%29%20%25%3E%25%20%0A%20%20sample_n%283%29%20%25%3E%25%20%0A%20%20select%28species,%20bill_length_mm%29%0A%0Asample_penguins%20%25%3E%25%20%0A%20%20summarise%28Avg_Bill_Length%20%3D%20mean%28bill_length_mm%29%29&amp;d=2025-04-18&amp;lang=r&amp;v=v1" class="external-link">tidy
data tutor</a></p>
</div>
<div class="section level3">
<h3 id="arrange">
<code>arrange()</code><a class="anchor" aria-label="anchor" href="#arrange"></a>
</h3>
<p>After summarizing, you may want to sort your results. To do so, you
can use the <strong><code>arrange()</code></strong> function to reorder
rows. For example, to list precincts from lowest to highest check-in
counts, you can do the following:</p>
<div class="codewrapper sourceCode" id="cb38">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">group_by</span><span class="op">(</span><span class="va">precinct</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">summarize</span><span class="op">(</span>total_checkins <span class="op">=</span> <span class="fu">n</span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">arrange</span><span class="op">(</span><span class="va">total_checkins</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 420 × 2
   precinct     total_checkins
   &lt;chr&gt;                 &lt;int&gt;
 1 PRECINCT_092              2
 2 PRECINCT_360             11
 3 PRECINCT_411             37
 4 PRECINCT_345             42
 5 PRECINCT_101             43
 6 PRECINCT_253             58
 7 PRECINCT_355             60
 8 PRECINCT_175             64
 9 PRECINCT_031             66
10 PRECINCT_403             68
# ℹ 410 more rows</code></pre>
</div>
<p>Or, to instead arrange from highest to lowest, include desc() around
the <strong><code>arrange()</code></strong> attribute, as seen below: #
<code>{r arrange-desc, purl=FALSE} data %&gt;%   group_by(precinct) %&gt;%   summarize(total_checkins = n()) %&gt;%   arrange(desc(total_checkins))</code></p>
<p>An additional example of the <strong><code>arrange()</code></strong>
function can be found <a href="https://tidydatatutor.com/vis.html#code=library%28dplyr%29%0Alibrary%28palmerpenguins%29%0A%0Aset.seed%282021-12-03%29%0A%0Asample_penguins%20%3C-%20penguins%20%25%3E%25%0A%20%20group_by%28species%29%20%25%3E%25%20%0A%20%20sample_n%283%29%20%25%3E%25%20%0A%20%20select%28species,%20bill_length_mm%29%20%25%3E%25%20%0A%20%20ungroup%28%29%0A%0Asample_penguins%20%25%3E%25%20%0A%20%20arrange%28bill_length_mm%29&amp;d=2025-04-18&amp;lang=r&amp;v=v1" class="external-link">at
tidy data tutor</a></p>
</div>
<div class="section level3">
<h3 id="count">
<code>count()</code><a class="anchor" aria-label="anchor" href="#count"></a>
</h3>
<p>When working with data, we often want to know how many observations
we have for each factor or combination of factors. As you saw above, we
were able to complete this using the
<strong><code>group_by()</code></strong> function, followed by the
<strong><code>summarize()</code></strong> function.</p>
<p>However, since this is such a common task,
<strong><code>dplyr</code></strong> provides the
<strong><code>count()</code></strong> function to make this task much
quicker and easier to write and perform!</p>
<p>For example, if we want to count the number of check-ins for each
precinct, instead of grouping by precinct and summarizing using the
<code>n()</code> function, we can do the following:</p>
<div class="codewrapper sourceCode" id="cb40">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data</span> <span class="op">%&gt;%</span></span>
<span>    <span class="fu">count</span><span class="op">(</span><span class="va">precinct</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 420 × 2
   precinct         n
   &lt;chr&gt;        &lt;int&gt;
 1 PRECINCT_001   648
 2 PRECINCT_002   257
 3 PRECINCT_003   806
 4 PRECINCT_004   466
 5 PRECINCT_005   762
 6 PRECINCT_006   676
 7 PRECINCT_007  1347
 8 PRECINCT_008  1652
 9 PRECINCT_009   742
10 PRECINCT_010   882
# ℹ 410 more rows</code></pre>
</div>
<p>Additionally, if you’d like your results sorted, instead of using the
<strong><code>arrange()</code></strong> function, you can add “sort =
TRUE” as an argument to the <strong><code>count()</code></strong>
function, as seen below:</p>
<div class="codewrapper sourceCode" id="cb42">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data</span> <span class="op">%&gt;%</span></span>
<span>    <span class="fu">count</span><span class="op">(</span><span class="va">precinct</span>, sort <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 420 × 2
   precinct         n
   &lt;chr&gt;        &lt;int&gt;
 1 PRECINCT_219  1968
 2 PRECINCT_016  1807
 3 PRECINCT_271  1798
 4 PRECINCT_317  1731
 5 PRECINCT_358  1717
 6 PRECINCT_239  1705
 7 PRECINCT_199  1700
 8 PRECINCT_323  1695
 9 PRECINCT_106  1680
10 PRECINCT_045  1671
# ℹ 410 more rows</code></pre>
</div>
<div id="exercise-1" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="exercise-1" class="callout-inner">
<h3 class="callout-title">Exercise</h3>
<div class="callout-content">
<p>Using what you’ve learned above, determine how many check-ins were
recorded for each device. Which device had the highest number of
check-ins?</p>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Show me the solution </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" aria-labelledby="headingSolution2" data-bs-parent="#accordionSolution2">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb44">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data</span> <span class="op">%&gt;%</span></span>
<span>    <span class="fu">count</span><span class="op">(</span><span class="va">device</span>, sort <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 1,215 × 2
   device         n
   &lt;chr&gt;      &lt;int&gt;
 1 DEVICE_255   898
 2 DEVICE_190   894
 3 DEVICE_642   887
 4 DEVICE_178   850
 5 DEVICE_435   821
 6 DEVICE_960   817
 7 DEVICE_959   812
 8 DEVICE_436   796
 9 DEVICE_641   782
10 DEVICE_822   769
# ℹ 1,205 more rows</code></pre>
</div>
<p>“DEVICE_255” has the highest number of check ins, with 898
recorded!</p>
</div>
</div>
</div>
</div>
<div id="exercise-1" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="exercise-1" class="callout-inner">
<h3 class="callout-title">Exercise<em> (continued)</em>
</h3>
<div class="callout-content">
<p>For “PRECINCT_007”, find the device that recorded the least amount of
check-ins.</p>
<p><strong>Hint:</strong> ensure you filter your data before applying
split-apply-combine!</p>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3"> Show me the solution </h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" aria-labelledby="headingSolution3" data-bs-parent="#accordionSolution3">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb46">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">filter</span><span class="op">(</span><span class="va">precinct</span> <span class="op">==</span> <span class="st">"PRECINCT_007"</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">group_by</span><span class="op">(</span><span class="va">device</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">summarize</span><span class="op">(</span>total_checkins <span class="op">=</span> <span class="fu">n</span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">arrange</span><span class="op">(</span><span class="fu">desc</span><span class="op">(</span><span class="va">total_checkins</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 5 × 2
  device     total_checkins
  &lt;chr&gt;               &lt;int&gt;
1 DEVICE_919            462
2 DEVICE_917            448
3 DEVICE_918            426
4 DEVICE_920             10
5 DEVICE_009              1</code></pre>
</div>
<p>“DEVICE_009” had the least amount of check-ins, recording only 1.</p>
</div>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="mutating-data">Mutating Data<a class="anchor" aria-label="anchor" href="#mutating-data"></a>
</h2>
<hr class="half-width">
<p>Sometimes, you may want to create new columns based on values in
existing columns. For example, if you have a column represented in
seconds, and you might want to add a new column with the same
information, but represented as minutes instead.</p>
<p>To complete this, we use the <strong>`<code>mutate()</code></strong>
function. This function allows us to create new columns OR modify
existing columns by applying operations to each row of the data set!</p>
<p>For example, let’s say that we want to create a new column that, as
mentioned above, converts the <code>checkin_length</code> column (which
is in seconds) into minutes by dividing each value by 60. Below, we can
use the mutate function to add this column to our data:</p>
<div class="codewrapper sourceCode" id="cb48">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data</span> <span class="op">%&gt;%</span></span>
<span>    <span class="fu">mutate</span><span class="op">(</span>checkin_length_min <span class="op">=</span> <span class="va">checkin_length</span> <span class="op">/</span> <span class="fl">60</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 352,112 × 7
   checkin_id     checkin_length checkin_time        location    precinct device
   &lt;chr&gt;                   &lt;dbl&gt; &lt;dttm&gt;              &lt;chr&gt;       &lt;chr&gt;    &lt;chr&gt;
 1 CHECKIN_000001             45 2018-11-06 07:02:36 LOCATION_0… PRECINC… DEVIC…
 2 CHECKIN_000002             29 2018-11-06 07:04:09 LOCATION_0… PRECINC… DEVIC…
 3 CHECKIN_000003             65 2018-11-06 07:05:13 LOCATION_0… PRECINC… DEVIC…
 4 CHECKIN_000004             28 2018-11-06 07:06:26 LOCATION_0… PRECINC… DEVIC…
 5 CHECKIN_000005             17 2018-11-06 07:08:08 LOCATION_0… PRECINC… DEVIC…
 6 CHECKIN_000006             56 2018-11-06 07:08:32 LOCATION_0… PRECINC… DEVIC…
 7 CHECKIN_000007             64 2018-11-06 07:09:36 LOCATION_0… PRECINC… DEVIC…
 8 CHECKIN_000008            262 2018-11-06 07:10:18 LOCATION_0… PRECINC… DEVIC…
 9 CHECKIN_000009            245 2018-11-06 07:12:57 LOCATION_0… PRECINC… DEVIC…
10 CHECKIN_000010            260 2018-11-06 07:13:41 LOCATION_0… PRECINC… DEVIC…
# ℹ 352,102 more rows
# ℹ 1 more variable: checkin_length_min &lt;dbl&gt;</code></pre>
</div>
<p>Admittedly, this operation doesn’t tell us anything additional about
our data, as it only converts part of our data into a different format.
But, with a more complex operation we could, for example, add a column
that says whether a check-in length is “abnormal” or not!</p>
<p>For the sake of the example, let’s say that any check-in length
greater-than or equal-to 200 seconds is abnormal:</p>
<div class="codewrapper sourceCode" id="cb50">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>checkin_category <span class="op">=</span> <span class="fu">ifelse</span><span class="op">(</span><span class="va">checkin_length</span> <span class="op">&gt;=</span> <span class="fl">200</span>, <span class="st">"abnormal"</span>, <span class="st">"normal"</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 352,112 × 7
   checkin_id     checkin_length checkin_time        location    precinct device
   &lt;chr&gt;                   &lt;dbl&gt; &lt;dttm&gt;              &lt;chr&gt;       &lt;chr&gt;    &lt;chr&gt;
 1 CHECKIN_000001             45 2018-11-06 07:02:36 LOCATION_0… PRECINC… DEVIC…
 2 CHECKIN_000002             29 2018-11-06 07:04:09 LOCATION_0… PRECINC… DEVIC…
 3 CHECKIN_000003             65 2018-11-06 07:05:13 LOCATION_0… PRECINC… DEVIC…
 4 CHECKIN_000004             28 2018-11-06 07:06:26 LOCATION_0… PRECINC… DEVIC…
 5 CHECKIN_000005             17 2018-11-06 07:08:08 LOCATION_0… PRECINC… DEVIC…
 6 CHECKIN_000006             56 2018-11-06 07:08:32 LOCATION_0… PRECINC… DEVIC…
 7 CHECKIN_000007             64 2018-11-06 07:09:36 LOCATION_0… PRECINC… DEVIC…
 8 CHECKIN_000008            262 2018-11-06 07:10:18 LOCATION_0… PRECINC… DEVIC…
 9 CHECKIN_000009            245 2018-11-06 07:12:57 LOCATION_0… PRECINC… DEVIC…
10 CHECKIN_000010            260 2018-11-06 07:13:41 LOCATION_0… PRECINC… DEVIC…
# ℹ 352,102 more rows
# ℹ 1 more variable: checkin_category &lt;chr&gt;</code></pre>
</div>
<p>This code filters out duplicate entries, showing just one record for
each unique precinct and the new column we just added.</p>
<p>Additional examples of the <strong><code>mutate()</code></strong>
function can be found at <a href="https://tidydatatutor.com/vis.html#code=library%28dplyr%29%0Alibrary%28palmerpenguins%29%0A%0Aset.seed%282021-12-03%29%0A%0Asample_penguins%20%3C-%20penguins%20%25%3E%25%0A%20%20group_by%28species%29%20%25%3E%25%20%0A%20%20sample_n%283%29%20%25%3E%25%20%0A%20%20select%28bill_length_mm,%20bill_depth_mm%29%20%25%3E%25%20%0A%20%20ungroup%28%29%20%25%3E%25%0A%20%20select%28bill_length_mm,%20bill_depth_mm%29%0A%0Asample_penguins%20%25%3E%25%20%0A%20%20mutate%28bill_volume%20%3D%20bill_length_mm%20*%20bill_depth_mm%29&amp;d=2025-04-18&amp;lang=r&amp;v=v1" class="external-link">tidy
data tutor</a></p>
<div id="exercise-2" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="exercise-2" class="callout-inner">
<h3 class="callout-title">Exercise</h3>
<div class="callout-content">
<p>Using what you’ve learned throughout this lesson, create a tibble
called “avg_checkins” that meets the following criteria: 1. Includes
only precincts from “PRECINCT_001” to “PRECINCT_035”. 2. Removes the
“PRECINCT_0” prefix from the precinct names and converts each precinct
name to a numeric value. 3. Calculates the average check-in length for
each precinct, ensuring this column is named “avg_checkin_length”. 4.
Contains two columns: “precinct” and “avg_checkin_length”. 5. Sorts the
tibble by precinct (1 to 35).</p>
</div>
</div>
</div>
<div id="accordionSolution4" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution4" aria-expanded="false" aria-controls="collapseSolution4">
  <h4 class="accordion-header" id="headingSolution4"> Show me the solution </h4>
</button>
<div id="collapseSolution4" class="accordion-collapse collapse" aria-labelledby="headingSolution4" data-bs-parent="#accordionSolution4">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb52">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">avg_checkins</span> <span class="op">&lt;-</span> <span class="va">data</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>precinct <span class="op">=</span> <span class="fu">as.numeric</span><span class="op">(</span><span class="fu">str_remove</span><span class="op">(</span><span class="va">precinct</span>, <span class="st">"PRECINCT_0"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">filter</span><span class="op">(</span><span class="va">precinct</span> <span class="op">&gt;=</span> <span class="fl">1</span> <span class="op">&amp;</span> <span class="va">precinct</span> <span class="op">&lt;=</span> <span class="fl">35</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">group_by</span><span class="op">(</span><span class="va">precinct</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">summarize</span><span class="op">(</span>avg_checkin_length <span class="op">=</span> <span class="fu">mean</span><span class="op">(</span><span class="va">checkin_length</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">arrange</span><span class="op">(</span><span class="va">precinct</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">WARNING<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="warning" tabindex="0"><code>Warning: There was 1 warning in `mutate()`.
ℹ In argument: `precinct = as.numeric(str_remove(precinct, "PRECINCT_0"))`.
Caused by warning:
! NAs introduced by coercion</code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="exercise-2" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="exercise-2" class="callout-inner">
<h3 class="callout-title">Exercise<em> (continued)</em>
</h3>
<div class="callout-content">
<p>Save your new “avg_checkins” into your data folder as
“avg_checkins.csv”!</p>
</div>
</div>
</div>
<div id="accordionSolution5" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution5" aria-expanded="false" aria-controls="collapseSolution5">
  <h4 class="accordion-header" id="headingSolution5"> Show me the solution </h4>
</button>
<div id="collapseSolution5" class="accordion-collapse collapse" aria-labelledby="headingSolution5" data-bs-parent="#accordionSolution5">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb54">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">write_csv</span><span class="op">(</span><span class="va">avg_checkins</span>, <span class="st">"data/avg_checkins.csv"</span><span class="op">)</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<span class="callout-header">Key Points</span>
<div class="callout-inner">
<div class="callout-content">
<ul>
<li>Use the <code>dplyr</code> package to manipulate tibbles.</li>
<li>Use <code>select()</code> to choose variables from a tibble.</li>
<li>Use <code>filter()</code> to choose data based on values.</li>
<li>Use <code>group_by()</code> and <code>summarize()</code> to work
with subsets of data.</li>
<li>Use <code>mutate()</code> to create new variables.</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></section><section id="aio-04-tidyr"><p>Content from <a href="04-tidyr.html">Data Wrangling with tidyr</a></p>
<hr>
<p>Last updated on 2025-11-11 |

        <a href="https://github.com/EngineeringForDemocracy/r-election-workers/edit/main/episodes/04-tidyr.Rmd" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How can I reformat a tibble to meet my needs?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Describe the concept of a wide and a long table format and for which
purpose those formats are useful.</li>
<li>Describe the roles of variable names and their associated values
when a table is reshaped.</li>
<li>Reshape a tibble from long to wide format and back with the
<code>pivot_wider</code> and <code>pivot_longer</code> commands from the
<strong><code>tidyr</code></strong> package.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p><strong><code>dplyr</code></strong> pairs nicely with
<strong><code>tidyr</code></strong>, a package that enables you to
swiftly convert between different data formats (long vs. wide) for
plotting and analysis. To learn more about
<strong><code>tidyr</code></strong> after the workshop, you may want to
check out this <a href="https://github.com/rstudio/cheatsheets/blob/main/tidyr.pdf" class="external-link">handy
data tidying with <strong><code>tidyr</code></strong>
cheatsheet</a>.</p>
<p>To make sure everyone will use the same data sets for this lesson,
we’ll be reading in the updated version of the Check-In Dataset (as
created in “Starting With Data”), as well as the Messy Dataset (which we
will cover at the end of this lesson).</p>
<section><h2 class="section-heading" id="reading-in-data">Reading in Data<a class="anchor" aria-label="anchor" href="#reading-in-data"></a>
</h2>
<hr class="half-width">
<p>To start, we will load in the <strong><code>tidyverse</code></strong>
and <strong><code>here</code></strong> packages so we can read in our
CSV files.</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">library</span><span class="op">(</span><span class="va">tidyverse</span><span class="op">)</span></span>
<span><span class="kw">library</span><span class="op">(</span><span class="va">here</span><span class="op">)</span></span></code></pre>
</div>
<p>Next, we will read in the Check-In Data:</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu">read_csv</span><span class="op">(</span><span class="fu">here</span><span class="op">(</span><span class="st">"data"</span>, <span class="st">"checkin_data_2.csv"</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
</section><section><h2 class="section-heading" id="reshaping-with-pivot_wider-and-pivot_longer">Reshaping with pivot_wider() and pivot_longer()<a class="anchor" aria-label="anchor" href="#reshaping-with-pivot_wider-and-pivot_longer"></a>
</h2>
<hr class="half-width">
<p>There are essentially three rules that define a “tidy” data set:</p>
<ol style="list-style-type: decimal">
<li>Each variable has its own column</li>
<li>Each observation has its own row</li>
<li>Each value must have its own cell</li>
</ol>
<p>This graphic visually represents the three rules that define a “tidy”
data set:</p>
<p><img src="fig/tidy-data-wickham.png" alt="A visual representation of the three rules that define a 'tidy' data set." class="figure"><em>R for Data Science</em>, Wickham H and Grolemund G (<a href="https://r4ds.had.co.nz/index.html" class="external-link">https://r4ds.had.co.nz/index.html</a>)
© Wickham, Grolemund 2017 This image is licensed under
Attribution-NonCommercial-NoDerivs 3.0 United States (CC-BY-NC-ND 3.0
US)</p>
<p>In this section we will explore how these rules are linked to the
different data formats researchers are often interested in: “wide” and
“long”. This tutorial will help you efficiently transform your data
shape, regardless of its original format.</p>
<p>First, we will explore qualities of the <code>data</code> data and
how they relate to these different types of data formats.</p>
<div class="section level3">
<h3 id="long-and-wide-data-formats">Long and Wide Data Formats<a class="anchor" aria-label="anchor" href="#long-and-wide-data-formats"></a>
</h3>
<p>In <code>data</code>, each row contains the values of variables
associated with each record collected (each ballot instance). As you may
recall from “Starting With Data”, it was stated that the
<code>checkin_id</code> was added to provide a “unique key/ID” for each
individual ballot.</p>
<p>Since <code>checkin_id</code> is unique to each instance, we can use
this variable as an identifier corresponding to each of the 352112
observations.</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="va">checkin_id</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">distinct</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">nrow</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 352112</code></pre>
</div>
<p>As seen in the code below, for each check-in time corresponding to
each device, no two <code>checkin_id</code>s are the same. Thus, this
format is what we call a “long” data format, where each observation
occupies only one row in the tibble.</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">filter</span><span class="op">(</span><span class="va">location</span> <span class="op">==</span> <span class="st">"LOCATION_001"</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="va">checkin_id</span>, <span class="va">checkin_time</span>, <span class="va">location</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">sample_n</span><span class="op">(</span>size <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 10 × 3
   checkin_id     checkin_time        location
   &lt;chr&gt;          &lt;dttm&gt;              &lt;chr&gt;
 1 CHECKIN_000627 2018-11-06 19:10:30 LOCATION_001
 2 CHECKIN_000022 2018-11-06 07:26:20 LOCATION_001
 3 CHECKIN_000412 2018-11-06 14:04:34 LOCATION_001
 4 CHECKIN_000545 2018-11-06 17:41:34 LOCATION_001
 5 CHECKIN_000418 2018-11-06 14:14:51 LOCATION_001
 6 CHECKIN_000392 2018-11-06 13:48:40 LOCATION_001
 7 CHECKIN_000108 2018-11-06 08:52:24 LOCATION_001
 8 CHECKIN_000048 2018-11-06 07:56:34 LOCATION_001
 9 CHECKIN_000618 2018-11-06 18:58:25 LOCATION_001
10 CHECKIN_000319 2018-11-06 11:51:51 LOCATION_001</code></pre>
</div>
<p>If you were to look at the entire <code>data</code> data set, you
would notice that the layout/format of the data adheres to rules 1-3,
where:</p>
<ol style="list-style-type: decimal">
<li>each column is a variable</li>
<li>each row is an observation</li>
<li>each value has its own cell</li>
</ol>
<p>As mentioned above, this is called a “long” data format.
Additionally, you may notice that each column represents a different
variable. In the “longest” data format there would only be three
columns, one for the id variable, one for the observed variable, and one
for the observed value (of that variable). This data format is quite
unsightly and difficult to work with, so you will rarely see it in
use.</p>
<p>Alternatively, in a “wide” data format we see modifications to rule
1, where each column no longer represents a single variable. Instead,
columns can represent different levels/values of a variable. For
instance, in some data you encounter, the researchers may have chosen
for every check-in hour to be a different column.</p>
<p>These may sound like dramatically different data layouts, but there
are some tools that make transitions between these layouts much simpler
than you might think! The GIF below shows how these two formats relate
to each other, and gives you an idea of how we can use R to shift from
one format to the other.</p>
<figure><img src="fig/tidyr-pivot_wider_longer.gif" alt="A gif showing how long and wide tibble layouts relate to each other." class="figure mx-auto d-block"><div class="figcaption">Animation showing pivot_wider and pivot_longer
functions transforming data between long and wide formats</div>
</figure><p>Long and wide tibble layouts mainly affect readability. You may find
that visually you may prefer the “wide” format, since you can see more
of the data on the screen. However, all of the R functions we have used
thus far expect for your data to be in a “long” data format. This is
because the long format is more machine readable and is closer to the
formatting of databases.</p>
</div>
<div class="section level3">
<h3 id="questions-that-warrant-different-data-formats">Questions That Warrant Different Data Formats<a class="anchor" aria-label="anchor" href="#questions-that-warrant-different-data-formats"></a>
</h3>
<p>In <code>data</code>, each row contains values associated with each
record (the unit). This may include values such as the ID of the ballot
box, the ballot box’s location, the precinct the ballot box belongs to,
or the arrival time of the person submitting the ballot. This format
allows for us to make comparisons across individual ballot
instances!</p>
<p>However, what if we wanted to look at how many check-ins occurred
each hour in regards to each polling location?</p>
<p>To facilitate this comparison, we would need to create a new table
where each row (the unit) represents a polling location (associated with
the <code>location</code> column), each column (after the first)
represents an hour of the day (associated with the <code>hour</code>
column), and the values of each row containing the number of check-ins
recorded at that location during that hour.</p>
<p>Once we we’ve created this new table, we can explore the
relationships within and between locations. The key point here is that
we are still following a tidy data structure, but we have
<strong>reshaped</strong> the data according to the observations of
interest.</p>
<p>Alternatively, let’s say the check-in times were originally spread
across multiple columns, and we were interested in visualizing, across
multiple locations, how check-in activity has changed over the course of
the day. This would require the check-in time to be included in a single
column rather than spread across multiple columns. Thus, we would need
to transform the column names into the values of a variable.</p>
<p>We can do both of these transformations with two
<strong><code>tidyr</code></strong> functions,
<code>pivot_wider()</code> and <code>pivot_longer()</code>.</p>
</div>
</section><section><h2 class="section-heading" id="pivoting-wider">Pivoting Wider<a class="anchor" aria-label="anchor" href="#pivoting-wider"></a>
</h2>
<hr class="half-width">
<p><code>pivot_wider()</code> takes in three principal arguments:</p>
<ol style="list-style-type: decimal">
<li>the data to be transformed</li>
<li>the <em>names_from</em> column variable (whose values will become
new column names).</li>
<li>the <em>values_from</em> column variable (whose values will fill the
new column variables).</li>
</ol>
<p>Further arguments include <code>values_fill</code> which, if set,
fills in missing values with the value provided, and
<code>names_sort</code>, which, if set, sorts the columns in
alphanumerical order.</p>
<p>Let’s use <code>pivot_wider()</code> to transform <code>data</code>
to create new columns for each hour represented within the data.</p>
<p>To help with understanding, we will be walking through the
transformation line-by-line.</p>
<p>First we create a new object (<code>data_tc</code>) based on the
<code>data</code> tibble:</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode r" tabindex="0"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a>data_tc <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span></span></code></pre>
</div>
<p>Our next step will be to get the values for each cell, so we will be
using the <code>count()</code> function from the
<strong><code>dplyr</code></strong> package. This is completed in the
next line, grouping by <code>location</code> and <code>hour</code>:</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode r" tabindex="0"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="fu">count</span>(location, hour) <span class="sc">%&gt;%</span></span></code></pre>
</div>
<p>Finally, we will be creating and populating the new, “wide” data
using the counts and the column values! This can be seen below:</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">pivot_wider</span><span class="op">(</span></span>
<span>  names_from <span class="op">=</span> <span class="va">hour</span>,</span>
<span>  values_from <span class="op">=</span> <span class="va">n</span>,</span>
<span>  values_fill <span class="op">=</span> <span class="fl">0</span></span>
<span><span class="op">)</span></span></code></pre>
</div>
<p>Now that we understand what’s going on, let’s combine all those
chunks together and look at what our completed tibble looks like!</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#create the object</span></span>
<span><span class="va">data_tc</span> <span class="op">&lt;-</span> <span class="va">data</span> <span class="op">%&gt;%</span></span>
<span>  <span class="co">#get the values</span></span>
<span>  <span class="fu">count</span><span class="op">(</span><span class="va">location</span>, <span class="va">hour</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="co">#pivot the data</span></span>
<span>  <span class="fu">pivot_wider</span><span class="op">(</span></span>
<span>  names_from <span class="op">=</span> <span class="va">hour</span>,</span>
<span>  values_from <span class="op">=</span> <span class="va">n</span>,</span>
<span>  values_fill <span class="op">=</span> <span class="fl">0</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">head</span><span class="op">(</span><span class="va">data_tc</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 6 × 16
  location       `7`   `8`   `9`  `10`  `11`  `12`  `13`  `14`  `15`  `16`  `17`
  &lt;chr&gt;        &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;
1 LOCATION_001    50    71    77    62    65    40    41    30    28    35    62
2 LOCATION_002    16    29    19    32    14    22    14    13    19    20    24
3 LOCATION_003    74    69    88   106    65    64    54    42    49    51    55
4 LOCATION_004    81    74    73    61    59    29    35    36    42    45    54
5 LOCATION_005    53    31    57    64    61    49    57    45    54    67    99
6 LOCATION_006   115    65    75    75    78    44    50    52    50    92    88
# ℹ 4 more variables: `18` &lt;int&gt;, `19` &lt;int&gt;, `6` &lt;int&gt;, `20` &lt;int&gt;</code></pre>
</div>
<p>Oh no! It looks like the hours columns are out of order, with 6
sitting between 19 and 20. If we were to perform data analysis, this
would not matter, but visually, this can be confusing or misleading,
since we expect time to move from left to right in ascending order.</p>
<p>In order to fix this, we can add the aforementioned
<code>names_sort</code> argument to the function to specify that the
columns should be in order. This line has been added to the code block
below:</p>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#create the object</span></span>
<span><span class="va">data_tc</span> <span class="op">&lt;-</span> <span class="va">data</span> <span class="op">%&gt;%</span></span>
<span>  <span class="co">#get the values</span></span>
<span>  <span class="fu">count</span><span class="op">(</span><span class="va">location</span>, <span class="va">hour</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="co">#pivot the data</span></span>
<span>  <span class="fu">pivot_wider</span><span class="op">(</span></span>
<span>  names_from <span class="op">=</span> <span class="va">hour</span>,</span>
<span>  values_from <span class="op">=</span> <span class="va">n</span>,</span>
<span>  values_fill <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  names_sort <span class="op">=</span> <span class="cn">TRUE</span> <span class="co">#sorts the columns from left to right</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">head</span><span class="op">(</span><span class="va">data_tc</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 6 × 16
  location       `6`   `7`   `8`   `9`  `10`  `11`  `12`  `13`  `14`  `15`  `16`
  &lt;chr&gt;        &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;
1 LOCATION_001     0    50    71    77    62    65    40    41    30    28    35
2 LOCATION_002     0    16    29    19    32    14    22    14    13    19    20
3 LOCATION_003     0    74    69    88   106    65    64    54    42    49    51
4 LOCATION_004     0    81    74    73    61    59    29    35    36    42    45
5 LOCATION_005     0    53    31    57    64    61    49    57    45    54    67
6 LOCATION_006     1   115    65    75    75    78    44    50    52    50    92
# ℹ 4 more variables: `17` &lt;int&gt;, `18` &lt;int&gt;, `19` &lt;int&gt;, `20` &lt;int&gt;</code></pre>
</div>
<p>As seen by the outputted tibble above, the hour columns now appear in
ascending order, making the table far easier to interpret at a
glance!</p>
<p>Now that we’ve used <code>pivot_wider()</code> to make our data
“wide”, let’s take a closer look at the resulting <code>data_tc</code>
tibble to gain a better understanding.</p>
<p>First, let’s check the dimensions:</p>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">dim</span><span class="op">(</span><span class="va">data_tc</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 417  16</code></pre>
</div>
<p>As we can see, there are 417 rows and 16 columns! Each row represents
a unique location within the data set. We can verify this by counting
the number of unique location values within <code>data</code>:</p>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">n_distinct</span><span class="op">(</span><span class="va">data</span><span class="op">$</span><span class="va">location</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 417</code></pre>
</div>
<p>This also returns 417, confirming that each row corresponds to a
single, unique location within the data.</p>
<p>Next, let’s look at the 16 columns of the tibble:</p>
<div class="codewrapper sourceCode" id="cb18">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">colnames</span><span class="op">(</span><span class="va">data_tc</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code> [1] "location" "6"        "7"        "8"        "9"        "10"
 [7] "11"       "12"       "13"       "14"       "15"       "16"
[13] "17"       "18"       "19"       "20"      </code></pre>
</div>
<p>Notice there is no longer a column titled <code>hour</code>. This is
because the <code>pivot_wider()</code> function, by default, removes the
original column that the new column values were taken from. In this
case, the values from the original <code>hour</code> column have now
become columns with names that range from 6 to 20, representing the
hours from 6AM to 8PM, and thus the <code>hour</code> column has been
dropped.</p>
<p>This new format of the data allows us to do interesting things, like
make a table showing the number of check-ins across all locations at a
particular time, with the rows being ordered from highest to lowest in
terms of count:</p>
<div class="codewrapper sourceCode" id="cb20">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data_tc</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="va">location</span>, <span class="va">`7`</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">arrange</span><span class="op">(</span><span class="fu">desc</span><span class="op">(</span><span class="va">`7`</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 417 × 2
   location       `7`
   &lt;chr&gt;        &lt;int&gt;
 1 LOCATION_233   234
 2 LOCATION_364   215
 3 LOCATION_258   212
 4 LOCATION_366   197
 5 LOCATION_417   197
 6 LOCATION_306   194
 7 LOCATION_317   193
 8 LOCATION_166   189
 9 LOCATION_403   188
10 LOCATION_386   183
# ℹ 407 more rows</code></pre>
</div>
<p>Or, we can calculate the total amount of check-ins for each location
across all hours, and sort the data to determine which location had the
least check-ins:</p>
<div class="codewrapper sourceCode" id="cb22">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data_tc</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>total_checkins <span class="op">=</span> <span class="fu">rowSums</span><span class="op">(</span><span class="va">data_tc</span><span class="op">[</span><span class="op">-</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="va">location</span>, <span class="va">total_checkins</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">arrange</span><span class="op">(</span><span class="va">total_checkins</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 417 × 2
   location     total_checkins
   &lt;chr&gt;                 &lt;dbl&gt;
 1 LOCATION_048              2
 2 LOCATION_308             11
 3 LOCATION_393             38
 4 LOCATION_103             42
 5 LOCATION_280             42
 6 LOCATION_164             58
 7 LOCATION_298             60
 8 LOCATION_101             64
 9 LOCATION_014             66
10 LOCATION_138             68
# ℹ 407 more rows</code></pre>
</div>
<div id="exercise" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="exercise" class="callout-inner">
<h3 class="callout-title">Exercise</h3>
<div class="callout-content">
<p>We created <code>data_tc</code> by reshaping the data. Replicate this
process to create a tibble named <code>data_total</code> that shows the
total number of check-ins for each hour, across all locations.</p>
<p>The resulting tibble should have columns for each hour, sorted from
earliest to latest similarly to the <code>data_tc</code> tibble. There
should only be one row, representative of all locations, and an extra
summary column, called <code>total_checkins</code>, that calculates the
total number of check ins across the entire <code>data</code> data
set.</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" data-bs-parent="#accordionSolution1" aria-labelledby="headingSolution1">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb24">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data_total</span> <span class="op">&lt;-</span> <span class="va">data</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">count</span><span class="op">(</span><span class="va">hour</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">pivot_wider</span><span class="op">(</span></span>
<span>    names_from <span class="op">=</span> <span class="va">hour</span>,</span>
<span>    values_from <span class="op">=</span> <span class="va">n</span>,</span>
<span>    values_fill <span class="op">=</span> <span class="fl">0</span>,</span>
<span>    names_sort <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>    <span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>total_checkins <span class="op">=</span> <span class="fu">rowSums</span><span class="op">(</span><span class="fu">across</span><span class="op">(</span><span class="fu">everything</span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">data_total</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 1 × 16
    `6`   `7`   `8`   `9`  `10`  `11`  `12`  `13`  `14`  `15`  `16`  `17`  `18`
  &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;
1   265 34918 29613 34076 35186 30909 23119 21751 20178 23233 28925 31774 25924
# ℹ 3 more variables: `19` &lt;int&gt;, `20` &lt;int&gt;, total_checkins &lt;dbl&gt;</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb26">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#alternative solution:</span></span>
<span><span class="va">data_total_2</span> <span class="op">&lt;-</span> <span class="va">data</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">count</span><span class="op">(</span><span class="va">hour</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">pivot_wider</span><span class="op">(</span></span>
<span>    names_from <span class="op">=</span> <span class="va">hour</span>,</span>
<span>    values_from <span class="op">=</span> <span class="va">n</span>,</span>
<span>    values_fill <span class="op">=</span> <span class="fl">0</span>,</span>
<span>    names_sort <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>    <span class="op">)</span></span>
<span></span>
<span><span class="va">data_total_2</span> <span class="op">&lt;-</span> <span class="va">data_total_2</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>total_checkins <span class="op">=</span> <span class="fu">rowSums</span><span class="op">(</span><span class="va">data_total_2</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">data_total_2</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 1 × 16
    `6`   `7`   `8`   `9`  `10`  `11`  `12`  `13`  `14`  `15`  `16`  `17`  `18`
  &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;
1   265 34918 29613 34076 35186 30909 23119 21751 20178 23233 28925 31774 25924
# ℹ 3 more variables: `19` &lt;int&gt;, `20` &lt;int&gt;, total_checkins &lt;dbl&gt;</code></pre>
</div>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="pivoting-longer">Pivoting Longer<a class="anchor" aria-label="anchor" href="#pivoting-longer"></a>
</h2>
<hr class="half-width">
<p>The opposing situation could occur if we had been provided with the
<code>data_tc</code> tibble, but instead of treating each hour as an
individual column, we instead wish to treat them as values of a variable
instead.</p>
<p>In this situation, we are gathering all of these columns and turning
them into a pair of new variables. One variable will include the column
names as values (<code>checkin_hour</code>), and the other will contain
the values in each cell previously associated with the column names
(<code>checkin_count</code>)!</p>
<p><code>pivot_longer()</code> takes four principal arguments:</p>
<ol style="list-style-type: decimal">
<li>the data to be transformed</li>
<li>the names of the columns we use to fill the a new values variable
(or to drop), referred to as <em>cols</em>.</li>
<li>the <em>names_to</em> column variable we wish to create from the
<em>cols</em> provided.</li>
<li>the <em>values_to</em> column variable we wish to create and fill
with values associated with the <em>cols</em> provided.</li>
</ol>
<div class="codewrapper sourceCode" id="cb28">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data_tc_long</span> <span class="op">&lt;-</span> <span class="va">data_tc</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">pivot_longer</span><span class="op">(</span>cols <span class="op">=</span> <span class="va">`6`</span><span class="op">:</span><span class="va">`20`</span>,</span>
<span>               names_to <span class="op">=</span> <span class="st">"checkin_hour"</span>,</span>
<span>               values_to <span class="op">=</span> <span class="st">"checkin_count"</span><span class="op">)</span></span></code></pre>
</div>
<p>Below, we will look at the two tibbles and compare their
structures:</p>
<div class="codewrapper sourceCode" id="cb29">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">head</span><span class="op">(</span><span class="va">data_tc</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 6 × 16
  location       `6`   `7`   `8`   `9`  `10`  `11`  `12`  `13`  `14`  `15`  `16`
  &lt;chr&gt;        &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;
1 LOCATION_001     0    50    71    77    62    65    40    41    30    28    35
2 LOCATION_002     0    16    29    19    32    14    22    14    13    19    20
3 LOCATION_003     0    74    69    88   106    65    64    54    42    49    51
4 LOCATION_004     0    81    74    73    61    59    29    35    36    42    45
5 LOCATION_005     0    53    31    57    64    61    49    57    45    54    67
6 LOCATION_006     1   115    65    75    75    78    44    50    52    50    92
# ℹ 4 more variables: `17` &lt;int&gt;, `18` &lt;int&gt;, `19` &lt;int&gt;, `20` &lt;int&gt;</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb31">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">head</span><span class="op">(</span><span class="va">data_tc_long</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 6 × 3
  location     checkin_hour checkin_count
  &lt;chr&gt;        &lt;chr&gt;                &lt;int&gt;
1 LOCATION_001 6                        0
2 LOCATION_001 7                       50
3 LOCATION_001 8                       71
4 LOCATION_001 9                       77
5 LOCATION_001 10                      62
6 LOCATION_001 11                      65</code></pre>
</div>
<p>As you can see, the hours and their corresponding counts for each
location are now separated into individual rows! Each location appears
multiple times – once for every hour – rather than appearing just once,
as in a wide-table format.</p>
<div id="exercise-1" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="exercise-1" class="callout-inner">
<h3 class="callout-title">Exercise</h3>
<div class="callout-content">
<p>In the last exercise, you created the wide tibble,
<code>data_total</code>. In this exercise, your goal is to reverse this
transformation using <code>pivot_longer()</code>.</p>
<p>Create a tibble called <code>data_total_long</code> that has two
columns: one for the hour, and one for the corresponding check-in count.
During your transformation, remove the <code>total_checkins</code>
column.</p>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Show me the solution </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" data-bs-parent="#accordionSolution2" aria-labelledby="headingSolution2">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb33">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data_total_long</span> <span class="op">&lt;-</span> <span class="va">data_total</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="op">-</span><span class="va">total_checkins</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">pivot_longer</span><span class="op">(</span></span>
<span>    cols <span class="op">=</span> <span class="fu">everything</span><span class="op">(</span><span class="op">)</span>,</span>
<span>    names_to <span class="op">=</span> <span class="st">"hour"</span>,</span>
<span>    values_to <span class="op">=</span> <span class="st">"checkin_count"</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="va">data_total_long</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 15 × 2
   hour  checkin_count
   &lt;chr&gt;         &lt;int&gt;
 1 6               265
 2 7             34918
 3 8             29613
 4 9             34076
 5 10            35186
 6 11            30909
 7 12            23119
 8 13            21751
 9 14            20178
10 15            23233
11 16            28925
12 17            31774
13 18            25924
14 19            12178
15 20               63</code></pre>
</div>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="other-useful-tidyr-functions">Other Useful tidyr Functions<a class="anchor" aria-label="anchor" href="#other-useful-tidyr-functions"></a>
</h2>
<hr class="half-width">
<p>Throughout this lesson, we used only a portion of the commands that
<strong><code>tidyr</code></strong> offers for data transformation.
Below, we will be briefly covering some other functions that may prove
useful throughout your future analyses (you can refer to the
<strong><code>tidyr</code></strong> cheat sheet linked at the beginning
of the lesson for more in-depth explanations):</p>
<ol style="list-style-type: decimal">
<li>
<code>separate_longer_delim()</code> – splits one column into many
rows, based on a delimiter.</li>
</ol>
<div class="codewrapper sourceCode" id="cb35">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">tibble</span><span class="op">(</span>location <span class="op">=</span> <span class="st">"1"</span>, count <span class="op">=</span> <span class="st">"1,2,3"</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">separate_longer_delim</span><span class="op">(</span><span class="va">count</span>, delim <span class="op">=</span> <span class="st">","</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 3 × 2
  location count
  &lt;chr&gt;    &lt;chr&gt;
1 1        1
2 1        2
3 1        3    </code></pre>
</div>
<ol start="2" style="list-style-type: decimal">
<li>
<code>separate_wider_delim()</code> – splits one column into
multiple columns, based on a delimiter.</li>
</ol>
<div class="codewrapper sourceCode" id="cb37">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">tibble</span><span class="op">(</span>date <span class="op">=</span> <span class="st">"01/01/2025"</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">separate_wider_delim</span><span class="op">(</span><span class="va">date</span>, delim <span class="op">=</span> <span class="st">"/"</span>, names <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="st">"month"</span>, <span class="st">"day"</span>, <span class="st">"year"</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 1 × 3
  month day   year
  &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;
1 01    01    2025 </code></pre>
</div>
<ol start="3" style="list-style-type: decimal">
<li>
<code>unite()</code> – combines multiple columns into one.</li>
</ol>
<div class="codewrapper sourceCode" id="cb39">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">tibble</span><span class="op">(</span>city <span class="op">=</span> <span class="st">"Providence"</span>, state <span class="op">=</span> <span class="st">"RI"</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">unite</span><span class="op">(</span><span class="st">"location"</span>, <span class="va">city</span>, <span class="va">state</span>, sep <span class="op">=</span> <span class="st">", "</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 1 × 1
  location
  &lt;chr&gt;
1 Providence, RI</code></pre>
</div>
<ol start="4" style="list-style-type: decimal">
<li>
<code>replace_na()</code> – fills in missing values
(<code>NA</code>) with a value of choice. The replacement must be in a
list.</li>
</ol>
<div class="codewrapper sourceCode" id="cb41">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">tibble</span><span class="op">(</span>count <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="fl">1</span>, <span class="cn">NA</span>, <span class="fl">3</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">replace_na</span><span class="op">(</span><span class="fu">list</span><span class="op">(</span>count <span class="op">=</span> <span class="fl">2</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 3 × 1
  count
  &lt;dbl&gt;
1     1
2     2
3     3</code></pre>
</div>
<ol start="5" style="list-style-type: decimal">
<li>
<code>drop_na()</code> – removes rows that contain missing values
(<code>NA</code>).</li>
</ol>
<div class="codewrapper sourceCode" id="cb43">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">tibble</span><span class="op">(</span>count <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="fl">1</span>, <span class="cn">NA</span>, <span class="fl">3</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">drop_na</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 2 × 1
  count
  &lt;dbl&gt;
1     1
2     3</code></pre>
</div>
<ol start="6" style="list-style-type: decimal">
<li>
<code>fill()</code> – fills in missing values (<code>NA</code>) with
the value either above (.direction = “down”) or below (.direction =
“up”) it.</li>
</ol>
<div class="codewrapper sourceCode" id="cb45">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#below</span></span>
<span><span class="fu">tibble</span><span class="op">(</span>count <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="fl">1</span>, <span class="cn">NA</span>, <span class="fl">3</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">fill</span><span class="op">(</span><span class="va">count</span>, .direction <span class="op">=</span> <span class="st">"up"</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 3 × 1
  count
  &lt;dbl&gt;
1     1
2     3
3     3</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb47">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#above</span></span>
<span><span class="fu">tibble</span><span class="op">(</span>count <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="fl">1</span>, <span class="cn">NA</span>, <span class="fl">3</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">fill</span><span class="op">(</span><span class="va">count</span>, .direction <span class="op">=</span> <span class="st">"down"</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 3 × 1
  count
  &lt;dbl&gt;
1     1
2     1
3     3</code></pre>
</div>
<ol start="7" style="list-style-type: decimal">
<li>
<code>complete()</code> – fills in all combinations of variables
that could exist, but don’t within the inputted data.</li>
</ol>
<div class="codewrapper sourceCode" id="cb49">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">tibble</span><span class="op">(</span>location <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="st">"A"</span>, <span class="st">"B"</span>, <span class="st">"B"</span><span class="op">)</span>, hour <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="fl">3</span>, <span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">complete</span><span class="op">(</span><span class="va">location</span>, <span class="va">hour</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 6 × 2
  location  hour
  &lt;chr&gt;    &lt;dbl&gt;
1 A            1
2 A            2
3 A            3
4 B            1
5 B            2
6 B            3</code></pre>
</div>
</section><section><h2 class="section-heading" id="applying-what-we-learned-to-clean-data">Applying What We Learned to Clean Data<a class="anchor" aria-label="anchor" href="#applying-what-we-learned-to-clean-data"></a>
</h2>
<hr class="half-width">
<div class="section level3">
<h3 id="introduction-to-the-messy-dataset">Introduction to the Messy Dataset<a class="anchor" aria-label="anchor" href="#introduction-to-the-messy-dataset"></a>
</h3>
<p>The Messy Dataset is an example of a “messy” data set that tracks
when people check-in to a voting location! In the context of the data
set, labels (“provisional”, “assistance”, and “provisional and
assistance”) are used to explain why check-in times may be longer than
average. If a check-in does not have a label, assistance was not needed,
and the check-in can be considered “normal”. Within this data set,
missing data is encoded as “NULL”.</p>
<p>The following is a visual representation of the data set’s
columns:</p>
<table class="table">
<colgroup>
<col width="25%">
<col width="74%">
</colgroup>
<thead><tr class="header">
<th>column_name</th>
<th>description</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>CheckIn_Duration_Provisional</td>
<td>Includes check-ins that fall under the “Provisional” label.</td>
</tr>
<tr class="even">
<td>CheckIn_Duration_Assistance</td>
<td>Includes check-ins that fall under the “Assistance” label.</td>
</tr>
<tr class="odd">
<td>CheckIn_Duration_Provisional_and_Assistance</td>
<td>Includes check-ins that fall under the “Provisional and Assistance”
label.</td>
</tr>
<tr class="even">
<td>CheckIn_Duration_</td>
<td>Includes check-ins that did not fall under any label, or in other
words, were normal.</td>
</tr>
</tbody>
</table>
<p>As mentioned above, missing information in data is encoded as “NULL”.
This requires us to specify <code>na = "NULL"</code> within the
<code>read_csv()</code> function, allowing R to automatically convert
all the “NULL” entries in the data set into <code>NA</code>.</p>
<p>Below, we will be reading in the Check-In Dataset using the
additional line:</p>
<div class="codewrapper sourceCode" id="cb51">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">messy_data</span> <span class="op">&lt;-</span> <span class="fu">read_csv</span><span class="op">(</span><span class="fu">here</span><span class="op">(</span><span class="st">"data"</span>, <span class="st">"messy_data.csv"</span><span class="op">)</span>, na <span class="op">=</span> <span class="st">"NULL"</span><span class="op">)</span></span></code></pre>
</div>
</div>
<div class="section level3">
<h3 id="tidying-the-data">Tidying the Data<a class="anchor" aria-label="anchor" href="#tidying-the-data"></a>
</h3>
<p>Throughout this next section, we’re going to be tidying/cleaning the
Check-In Data step-by-step to ensure understanding throughout!</p>
<p>We’ll start by looking at the data so we can understand what we’re
working with:</p>
<div class="codewrapper sourceCode" id="cb52">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">messy_data</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 514 × 4
   CheckIn_Duration_Provisional CheckIn_Duration_Assist…¹ CheckIn_Duration_Pro…²
                          &lt;dbl&gt;                     &lt;dbl&gt;                  &lt;dbl&gt;
 1                           NA                        NA                     NA
 2                           NA                        NA                     NA
 3                           NA                        NA                     NA
 4                           NA                        NA                     NA
 5                           NA                        NA                     NA
 6                           NA                        NA                     NA
 7                           NA                        NA                     NA
 8                           NA                        NA                     NA
 9                           NA                        NA                     NA
10                           NA                        NA                     NA
# ℹ 504 more rows
# ℹ abbreviated names: ¹​CheckIn_Duration_Assistance,
#   ²​CheckIn_Duration_Provisional_and_Assistance
# ℹ 1 more variable: CheckIn_Duration_ &lt;dbl&gt;</code></pre>
</div>
<p>At first glance, we can see this data set is wide, with each label
tacked onto the end of the phrase “CheckIn_Duration_” and underscores
replacing spaces. Additionally, there is no label after
“CheckIn_Duration_”, which indicates this is likely representative of
the normal check-ins!</p>
<p>However, looking at how many missing values there are, it may be a
better choice to turn the data into “long” data, instead of “wide” data,
with a <code>duration</code> column, and a <code>label</code> column.
Let’s apply this pivot to a new tibble, named <code>clean_data</code>,
below:</p>
<div class="codewrapper sourceCode" id="cb54">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">clean_data</span> <span class="op">&lt;-</span> <span class="va">messy_data</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">pivot_longer</span><span class="op">(</span>cols <span class="op">=</span> <span class="fu">everything</span><span class="op">(</span><span class="op">)</span>,</span>
<span>               names_to <span class="op">=</span> <span class="st">"label"</span>,</span>
<span>               values_to <span class="op">=</span> <span class="st">"duration"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">head</span><span class="op">(</span><span class="va">clean_data</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 6 × 2
  label                                       duration
  &lt;chr&gt;                                          &lt;dbl&gt;
1 CheckIn_Duration_Provisional                      NA
2 CheckIn_Duration_Assistance                       NA
3 CheckIn_Duration_Provisional_and_Assistance       NA
4 CheckIn_Duration_                                 80
5 CheckIn_Duration_Provisional                      NA
6 CheckIn_Duration_Assistance                       NA</code></pre>
</div>
<p>Oh no! That’s a lot of <code>NA</code> values. Taking a closer look
at the original data, we can see the first value within the data set
consists of a duration of <code>80</code> underneath the
<code>"CheckIn_Duration_"</code> column. Looking at our in-progress,
“clean” data set, we can see the labels that do not apply to this
duration are listed as <code>NA</code>.</p>
<p>Since the labels that have a duration of <code>NA</code> do not
matter within our data set, we can drop them from the tibble
completely:</p>
<div class="codewrapper sourceCode" id="cb56">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">clean_data</span> <span class="op">&lt;-</span> <span class="va">clean_data</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">drop_na</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">head</span><span class="op">(</span><span class="va">clean_data</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 6 × 2
  label             duration
  &lt;chr&gt;                &lt;dbl&gt;
1 CheckIn_Duration_       80
2 CheckIn_Duration_       55
3 CheckIn_Duration_       61
4 CheckIn_Duration_       58
5 CheckIn_Duration_       63
6 CheckIn_Duration_       64</code></pre>
</div>
<p>Now we’re getting somewhere! Next, when we loaded in the data set, it
was noted that underscores replaced spaces throughout the data. As seen
below, the next step is to revert that change:</p>
<div class="codewrapper sourceCode" id="cb58">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">clean_data</span> <span class="op">&lt;-</span> <span class="va">clean_data</span> <span class="op">%&gt;%</span></span>
<span>  <span class="co">#including "all" in the str replace call ensures both underscores are replaced</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>label <span class="op">=</span> <span class="fu">str_replace_all</span><span class="op">(</span><span class="va">label</span>, <span class="st">"_"</span>, <span class="st">" "</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">head</span><span class="op">(</span><span class="va">clean_data</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 6 × 2
  label               duration
  &lt;chr&gt;                  &lt;dbl&gt;
1 "CheckIn Duration "       80
2 "CheckIn Duration "       55
3 "CheckIn Duration "       61
4 "CheckIn Duration "       58
5 "CheckIn Duration "       63
6 "CheckIn Duration "       64</code></pre>
</div>
<p>Our next step is removing the “CheckIn Duration” phrase from each
label, which we will be completing below:</p>
<div class="codewrapper sourceCode" id="cb60">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">clean_data</span> <span class="op">&lt;-</span> <span class="va">clean_data</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>label <span class="op">=</span> <span class="fu">str_remove</span><span class="op">(</span><span class="va">label</span>, <span class="st">"CheckIn Duration "</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">head</span><span class="op">(</span><span class="va">clean_data</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 6 × 2
  label duration
  &lt;chr&gt;    &lt;dbl&gt;
1 ""          80
2 ""          55
3 ""          61
4 ""          58
5 ""          63
6 ""          64</code></pre>
</div>
<p>After removing the “CheckIn Duration” prefix, we can see that some of
our labels are now an empty strings. However, as you may recall from our
initial analysis of the data, empty labels indicate that the check-in
was normal! So, our next step will be replacing the empty labels with
“Normal” labels:</p>
<div class="codewrapper sourceCode" id="cb62">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">clean_data</span> <span class="op">&lt;-</span> <span class="va">clean_data</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>label <span class="op">=</span> <span class="fu">ifelse</span><span class="op">(</span><span class="va">label</span> <span class="op">==</span> <span class="st">""</span>, <span class="st">"Normal"</span>, <span class="va">label</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">head</span><span class="op">(</span><span class="va">clean_data</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 6 × 2
  label  duration
  &lt;chr&gt;     &lt;dbl&gt;
1 Normal       80
2 Normal       55
3 Normal       61
4 Normal       58
5 Normal       63
6 Normal       64</code></pre>
</div>
<p>Now, our data is clean! In practice, all of these functions can (and
should!) be chained together using pipes (and comments), as seen in the
code block below:</p>
<div class="codewrapper sourceCode" id="cb64">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">clean_data_final</span> <span class="op">&lt;-</span> <span class="va">messy_data</span> <span class="op">%&gt;%</span></span>
<span>  <span class="co">#pivot longer by label</span></span>
<span>  <span class="fu">pivot_longer</span><span class="op">(</span>cols <span class="op">=</span> <span class="fu">everything</span><span class="op">(</span><span class="op">)</span>,</span>
<span>               names_to <span class="op">=</span> <span class="st">"label"</span>,</span>
<span>               values_to <span class="op">=</span> <span class="st">"duration"</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="co">#remove rows with missing values</span></span>
<span>  <span class="fu">drop_na</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="co">#replace underscores with spaces</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>label <span class="op">=</span> <span class="fu">str_replace_all</span><span class="op">(</span><span class="va">label</span>, <span class="st">"_"</span>, <span class="st">" "</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="co">#remove "CheckIn Duration " from each label</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>label <span class="op">=</span> <span class="fu">str_remove</span><span class="op">(</span><span class="va">label</span>, <span class="st">"CheckIn Duration "</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="co">#replace empty labels with "Normal"</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>label <span class="op">=</span> <span class="fu">ifelse</span><span class="op">(</span><span class="va">label</span> <span class="op">==</span> <span class="st">""</span>, <span class="st">"Normal"</span>, <span class="va">label</span><span class="op">)</span><span class="op">)</span></span>
<span>  </span>
<span><span class="fu">head</span><span class="op">(</span><span class="va">clean_data_final</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 6 × 2
  label  duration
  &lt;chr&gt;     &lt;dbl&gt;
1 Normal       80
2 Normal       55
3 Normal       61
4 Normal       58
5 Normal       63
6 Normal       64</code></pre>
</div>
<p>Since our data has been cleaned, we can now export it as
<code>clean_data.csv</code> for use in future analysis. As you may
recall from “Starting with Data”, we will be using the
<code>write_csv()</code> function, specifying that we want our csv to go
into our data folder:</p>
<div class="codewrapper sourceCode" id="cb66">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">write_csv</span><span class="op">(</span><span class="va">clean_data_final</span>, <span class="st">"data/clean_data.csv"</span><span class="op">)</span></span></code></pre>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<span class="callout-header">Key Points</span>
<div class="callout-inner">
<div class="callout-content">
<ul>
<li>Use the <code>tidyr</code> package to change the layout of
tibbles.</li>
<li>Use <code>pivot_wider()</code> to go from long to wide format.</li>
<li>Use <code>pivot_longer()</code> to go from wide to long format.</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</div>
</section></section><section id="aio-05-ggplot2"><p>Content from <a href="05-ggplot2.html">Data Visualisation with ggplot2</a></p>
<hr>
<p>Last updated on 2025-11-11 |

        <a href="https://github.com/EngineeringForDemocracy/r-election-workers/edit/main/episodes/05-ggplot2.Rmd" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>What are the components of a ggplot?</li>
<li>How can I visualize check-in patterns over time?</li>
<li>How can I compare check-in frequencies across locations and
devices?</li>
<li>What are the main differences between R base plots, lattice, and
ggplot?</li>
<li>How can I visualize location data on maps with ggplot2?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Produce scatter plots, box plots, and bar plots using ggplot.</li>
<li>Create time series plots for temporal check-in data.</li>
<li>Set universal plot settings.</li>
<li>Describe what faceting is and apply faceting in ggplot.</li>
<li>Modify the aesthetics of an existing ggplot plot (including axis
labels and color).</li>
<li>Build complex and customized plots from data in a tibble.</li>
<li>Create maps with ggplot2 to visualize location-based data.</li>
<li>Recognize the differences between base R, lattice, and ggplot
visualizations.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>We start by loading the required packages:
<strong><code>tidyverse</code></strong> and
<strong><code>lubridate</code></strong>. As you may recall,
<strong><code>ggplot2</code></strong> is included in the
<strong><code>tidyverse</code></strong> package, so we do not need to
load <strong><code>ggplot2</code></strong> in separately.</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">library</span><span class="op">(</span><span class="va">tidyverse</span><span class="op">)</span></span>
<span><span class="kw">library</span><span class="op">(</span><span class="va">here</span><span class="op">)</span></span>
<span><span class="kw">library</span><span class="op">(</span><span class="va">lubridate</span><span class="op">)</span> </span></code></pre>
</div>
<p>Next, let’s load in our data! Throughout this lesson, we will be
using a sampled version of the data we created at the end of “Starting
With Data”. In practice, sampling data before visualization is NOT
required; however, due to the size of our original data set, using a
smaller, sampled data set will allow us to generate plots much
faster!</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu">read_csv</span><span class="op">(</span><span class="fu">here</span><span class="op">(</span><span class="st">"data"</span>, <span class="st">"checkin_sample_plotting.csv"</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<p>Before we continue, let’s take a look at the structure and size of
our data set to see what we’ll be working with in detail:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">glimpse</span><span class="op">(</span><span class="va">data</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in glimpse(data): could not find function "glimpse"</code></pre>
</div>
<p>As you may notice, the house exceeds 12, meaning this data is in 24
hour time! If you are unfamiliar, this means 13 represents 1PM, 14
represents 2PM, and so on.</p>
<p>Additionally, for those curious, the original data set had
approximately 352k lines, which means this data set is less than 10% of
the size!</p>
<section><h2 class="section-heading" id="visualization-options-in-r">Visualization Options in R<a class="anchor" aria-label="anchor" href="#visualization-options-in-r"></a>
</h2>
<hr class="half-width">
<p>Before we start with <strong><code>ggplot2</code></strong>, it’s
helpful to know that there are several ways to create visualizations in
R. While <strong><code>ggplot2</code></strong> is great for building
complex and highly customizable plots, there are simpler and quicker
alternatives that you might encounter or use depending on the context.
Let’s briefly explore a few of them:</p>
<div class="section level3">
<h3 id="base-r-plots">Base-R Plots<a class="anchor" aria-label="anchor" href="#base-r-plots"></a>
</h3>
<p>Base R plots are the simplest form of visualization and are great for
quick, exploratory analysis. You can create plots with very little code,
but customizing them can be cumbersome compared to
<strong><code>ggplot2</code></strong>.</p>
<p>Example of a simple <span class="glosario_def"><a href="https://glosario.carpentries.org/en/#time_series" class="external-link">time
series</a></span> plot in base R showing the number of check-ins by
hour:</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">hourly_counts</span> <span class="op">&lt;-</span> <span class="va">data</span> <span class="op">%&gt;%</span></span>
<span>                 <span class="fu">count</span><span class="op">(</span><span class="va">hour</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">plot</span><span class="op">(</span><span class="va">hourly_counts</span><span class="op">$</span><span class="va">hour</span>, <span class="va">hourly_counts</span><span class="op">$</span><span class="va">n</span>,</span>
<span>     main <span class="op">=</span> <span class="st">"Base R Plot: Check-Ins by Hour"</span>,</span>
<span>     xlab <span class="op">=</span> <span class="st">"Hour of Day"</span>,</span>
<span>     ylab <span class="op">=</span> <span class="st">"Number of Check-Ins"</span>,</span>
<span>     type <span class="op">=</span> <span class="st">"l"</span><span class="op">)</span>  <span class="co">#'l' for line</span></span></code></pre>
</div>
</div>
<div class="section level3">
<h3 id="lattice">
<strong><code>Lattice</code></strong><a class="anchor" aria-label="anchor" href="#lattice"></a>
</h3>
<p>Lattice is another plotting system in R, which allows for creating
multi-panel plots easily. It’s different from ggplot2 because you define
the entire plot in a single function call, and modifications after
plotting are limited.</p>
<p>Example of a lattice plot showing check-ins by device for different
locations:</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">library</span><span class="op">(</span><span class="va">lattice</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#grabs specific locations (so the graph isn't giant) and converts locations + devices to factors</span></span>
<span><span class="va">checkins_lattice</span> <span class="op">&lt;-</span> <span class="va">data</span> <span class="op">%&gt;%</span></span>
<span>                    <span class="fu">filter</span><span class="op">(</span><span class="va">location</span> <span class="op">%in%</span> <span class="fu">c</span><span class="op">(</span><span class="st">"LOCATION_001"</span>, <span class="st">"LOCATION_002"</span>, <span class="st">"LOCATION_003"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>                    <span class="co">#we're removing "DEVICE_" because it causes overlap within the plot</span></span>
<span>                    <span class="co">#if you're curious, remove this line and regenerate the plot!</span></span>
<span>                    <span class="fu">mutate</span><span class="op">(</span>device <span class="op">=</span> <span class="fu">str_remove</span><span class="op">(</span><span class="va">device</span>, <span class="st">"DEVICE_"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>                    <span class="fu">mutate</span><span class="op">(</span></span>
<span>                      device <span class="op">=</span> <span class="fu">as.factor</span><span class="op">(</span><span class="va">device</span><span class="op">)</span>,</span>
<span>                      location <span class="op">=</span> <span class="fu">as.factor</span><span class="op">(</span><span class="va">location</span><span class="op">)</span></span>
<span>                    <span class="op">)</span></span>
<span></span>
<span><span class="co">#creates a lattice boxplot (bwplot)</span></span>
<span><span class="fu">bwplot</span><span class="op">(</span><span class="va">hour</span> <span class="op">~</span> <span class="va">device</span> <span class="op">|</span> <span class="va">location</span>, data <span class="op">=</span> <span class="va">checkins_lattice</span>,</span>
<span>       main <span class="op">=</span> <span class="st">"Lattice Plot: Check-in Hour Distribution by Device and Location"</span>,</span>
<span>       xlab <span class="op">=</span> <span class="st">"Device"</span>,</span>
<span>       ylab <span class="op">=</span> <span class="st">"Hour of Check-in"</span>,</span>
<span>       layout <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="fu">length</span><span class="op">(</span><span class="fu">unique</span><span class="op">(</span><span class="va">checkins_lattice</span><span class="op">$</span><span class="va">location</span><span class="op">)</span><span class="op">)</span>, <span class="fl">1</span><span class="op">)</span>, <span class="co">#adjusts layout for multiple locations</span></span>
<span>       strip <span class="op">=</span> <span class="fu">strip.custom</span><span class="op">(</span>bg<span class="op">=</span><span class="st">"lightgrey"</span><span class="op">)</span>,</span>
<span>       scales <span class="op">=</span> <span class="fu">list</span><span class="op">(</span>y <span class="op">=</span> <span class="fu">list</span><span class="op">(</span>at <span class="op">=</span> <span class="fl">0</span><span class="op">:</span><span class="fl">24</span><span class="op">)</span><span class="op">)</span>, <span class="co">#adds all hours on y, not just even numbers</span></span>
<span>       panel <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span>, <span class="va">...</span><span class="op">)</span> <span class="op">{</span></span>
<span>         <span class="fu">panel.bwplot</span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span>, <span class="va">...</span><span class="op">)</span></span>
<span>       <span class="op">}</span><span class="op">)</span></span></code></pre>
</div>
</div>
</section><section><h2 class="section-heading" id="plotting-with-ggplot2">Plotting with <strong><code>ggplot2</code></strong>
<a class="anchor" aria-label="anchor" href="#plotting-with-ggplot2"></a>
</h2>
<hr class="half-width">
<p><strong><code>ggplot2</code></strong> is a plotting package that
makes creating complex plots from data stored in a tibble simpler. It
provides a programmatic interface for specifying what variables to plot,
how they are displayed, and general visual properties. As a result, if
the underlying data changes or if we decide to switch from a bar plot to
a scatter plot, we only have to make minimal adjustments to the
code!</p>
<p><strong><code>ggplot2</code></strong> functions work best with data
in the ‘long’ format. As you may recall from “Data Wrangling with
tidyr”, this consists of a column for every dimension, and a row for
every observation. Ensuring you use well-structured data will save you
lots of time when making figures with
<strong><code>ggplot2</code></strong></p>
<p><strong><code>ggplot2</code></strong> graphics are built step by step
by adding new elements. Adding layers in this fashion allows for
extensive flexibility and customization of plots.</p>
<p>Each chart built with <strong><code>ggplot2</code></strong> must
include the following: - Data - Aesthetic mapping (aes) - Describes how
variables are mapped onto graphical attributes - Visual attribute of
data including x-y axes, color, fill, shape, and alpha - Geometric
objects (geom) - Determines how values are rendered graphically, as bars
(<code>geom_bar</code>), scatterplot (<code>geom_point</code>), line
(<code>geom_line</code>), etc.</p>
<p>Thus, the template for graphic in ggplot2 is:</p>
<pre><code>&lt;DATA&gt; %&gt;%
    ggplot(aes(&lt;MAPPINGS&gt;)) +
    &lt;GEOM_FUNCTION&gt;()</code></pre>
<p>Remember that the pipe operator <code>%&gt;%</code> places the result
of the previous line(s) into the first argument of the function. The
<strong><code>ggplot</code></strong> function expects a data frame to be
the first argument, which allows us to change from specifying the
<code>data =</code> argument within the <code>ggplot</code> function to
instead piping the data into the function.</p>
<p>To create a chart with <strong><code>ggplot2</code></strong>, follow
the steps below:</p>
<ol style="list-style-type: decimal">
<li>use the <code>ggplot()</code> function and bind the plot to a
specific tibble.</li>
</ol>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">ggplot</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<ol start="2" style="list-style-type: decimal">
<li>Using the aesthetic (<code>aes</code>) function, define your mapping
by selecting the variables to be plotted and specifying how to present
them in the graph, e.g. as x/y positions or characteristics such as
size, shape, color, etc.</li>
</ol>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">precinct</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<ol start="3" style="list-style-type: decimal">
<li>Add ‘geoms’ – graphical representations of the data in the plot
(points, lines, bars). <strong><code>ggplot2</code></strong> offers many
different geoms; we will use some common ones today, including:
<ul>
<li>
<code>geom_bar()</code> for counting observations in categories</li>
<li>
<code>geom_histogram()</code> for showing distributions</li>
<li>
<code>geom_boxplot()</code> for statistical summaries</li>
<li>
<code>geom_line()</code> for trend lines, time series, etc.</li>
</ul>
</li>
</ol>
<p>To add a geom to the plot use the <code>+</code> operator. Let’s
start by creating a bar chart showing the distribution of check-ins
across precincts:</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">precinct</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_bar</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<p>The <code>+</code> in the <strong><code>ggplot2</code></strong>
package is particularly useful because it allows you to modify existing
<code>ggplot</code> objects. This means you can easily set up plot
templates and conveniently explore different types of plots! Using this
idea, the above plot can also be generated with code like this, similar
to the “intermediate steps” approach:</p>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#assign the plot to a variable</span></span>
<span><span class="va">plot</span> <span class="op">&lt;-</span> <span class="va">data</span> <span class="op">%&gt;%</span></span>
<span>        <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">precinct</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#draw the plot as a bar plot</span></span>
<span><span class="va">plot</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_bar</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<div id="notes" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<span class="callout-header">Callout</span>
<div id="notes" class="callout-inner">
<h3 class="callout-title">Notes</h3>
<div class="callout-content">
<ul>
<li>Anything you put in the <code>ggplot()</code> function can be seen
by any geom layers that you add (i.e., these are universal plot
settings). This includes the x- and y-axis mapping you set up in
<code>aes()</code>.</li>
<li>You can also specify mappings for a given geom independently of the
mapping defined globally in the <code>ggplot()</code> function.</li>
<li>The <code>+</code> sign used to add new layers must be placed at the
end of the line containing the <em>previous</em> layer. If, instead, the
<code>+</code> sign is added at the beginning of the line containing the
new layer, <strong><code>ggplot2</code></strong> will not add the new
layer and will return an error message.</li>
</ul>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## This is the correct syntax for adding layers</span></span>
<span><span class="va">checkins_plot</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_point</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## This will not add the new layer and will return an error message</span></span>
<span><span class="va">checkins_plot</span></span>
<span><span class="op">+</span> <span class="fu">geom_point</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="building-your-plots-iteratively">Building Your Plots Iteratively<a class="anchor" aria-label="anchor" href="#building-your-plots-iteratively"></a>
</h2>
<hr class="half-width">
<p>Building plots with <strong><code>ggplot2</code></strong> is
typically an iterative process. We start by defining the data set we’ll
use, lay out the axes, and choose a geom.</p>
<p>Let’s re-create the time-series plot we made for the Base-R
demonstration:</p>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#using the hourly_counts we created, generate a time-series plot</span></span>
<span><span class="va">hourly_counts</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">hour</span>, y <span class="op">=</span> <span class="va">n</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_line</span><span class="op">(</span><span class="op">)</span> <span class="co">#creates a line plot using the x and y from the ggplot above!</span></span></code></pre>
</div>
<p>Now that we have a baseline plot to start from, we can start
modifying it to extract additional information! For instance, when
inspecting the plot, we can notice that it’s a bit difficult to tell at
first glance where each hour sits on the line.</p>
<p>To resolve this, we will add points to the line to clearly indicate
each hour:</p>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">hourly_counts</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">hour</span>, y <span class="op">=</span> <span class="va">n</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_line</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_point</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<p>Next, we will add colors for all of the points by specifying a
<code>color</code> argument inside the <code>geom_point</code>
function:</p>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">hourly_counts</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">hour</span>, y <span class="op">=</span> <span class="va">n</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_line</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_point</span><span class="op">(</span>color <span class="op">=</span> <span class="st">"blue"</span><span class="op">)</span></span></code></pre>
</div>
<p>To color each point in the plot differently, you <em>could</em> use a
vector as an input to the <code>color</code> argument; however, because
we are now mapping features of the data to a color, instead of setting
one color for all points, the color of the points now needs to be set
inside a call to the <code>aes</code> function. When we map a variable
in our data to the color of the points,
<strong><code>ggplot2</code></strong> will provide a different color
corresponding to the different values of the variable.</p>
<p>Let’s apply this to our plot below, changing the color of each point
based on the hour:</p>
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">hourly_counts</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">hour</span>, y <span class="op">=</span> <span class="va">n</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_line</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_point</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>color <span class="op">=</span> <span class="va">hour</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<p>Unfortunately, this doesn’t tell us much about our data, just that
each point represents a different hour (which we already knew!).
Additionally, you may notice that after adding conditional coloring
using <code>aes()</code>, ggplot automatically added a legend to explain
what the different colors represent/mean!</p>
<p>Now, instead of coloring each point based on one of the variables we
already have, we’re going to calculate the average hourly count and set
the point to green if the count at that hour is <em>above</em> average
and red if the count at that hour is <em>below</em> average!</p>
<p>To do this, we will calculate the average hourly count and, using
mutate, add a column to our hourly_counts tibble that indicates whether
the count at that hour is above or below the calculated average! Then,
we will use the <code>scale_color_manual</code> function to manually
color these points green and red instead of the default (which, when
writing this lesson, was red and blue, respectively).</p>
<div class="codewrapper sourceCode" id="cb18">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#calculate average</span></span>
<span><span class="va">average</span> <span class="op">&lt;-</span> <span class="fu">mean</span><span class="op">(</span><span class="va">hourly_counts</span><span class="op">$</span><span class="va">n</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#plot</span></span>
<span><span class="va">hourly_counts</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>avg_color <span class="op">=</span> <span class="fu">ifelse</span><span class="op">(</span><span class="va">n</span> <span class="op">&gt;</span> <span class="va">average</span>, <span class="st">"Above"</span>, <span class="st">"Below"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="co">#adds the additional column</span></span>
<span>  <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">hour</span>, y <span class="op">=</span> <span class="va">n</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_line</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_point</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>color <span class="op">=</span> <span class="va">avg_color</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> <span class="co">#colors the points</span></span>
<span>  <span class="fu">scale_color_manual</span><span class="op">(</span>values <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="st">"Above"</span> <span class="op">=</span> <span class="st">"green"</span>, <span class="st">"Below"</span> <span class="op">=</span> <span class="st">"red"</span><span class="op">)</span><span class="op">)</span> <span class="co">#chooses the colors</span></span></code></pre>
</div>
<p>Additionally, you may want to increase the size of the points! This
can be accomplished using the <code>size</code> argument within the
<code>geom_point</code> function, as seen below:</p>
<div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#calculate average</span></span>
<span><span class="va">average</span> <span class="op">&lt;-</span> <span class="fu">mean</span><span class="op">(</span><span class="va">hourly_counts</span><span class="op">$</span><span class="va">n</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#plot</span></span>
<span><span class="va">hourly_counts</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>avg_color <span class="op">=</span> <span class="fu">ifelse</span><span class="op">(</span><span class="va">n</span> <span class="op">&gt;</span> <span class="va">average</span>, <span class="st">"Above"</span>, <span class="st">"Below"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="co">#adds the additional column</span></span>
<span>  <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">hour</span>, y <span class="op">=</span> <span class="va">n</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_line</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_point</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>color <span class="op">=</span> <span class="va">avg_color</span><span class="op">)</span>, size <span class="op">=</span> <span class="fl">2</span><span class="op">)</span> <span class="op">+</span> <span class="co">#colors the points</span></span>
<span>  <span class="fu">scale_color_manual</span><span class="op">(</span>values <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="st">"Above"</span> <span class="op">=</span> <span class="st">"green"</span>, <span class="st">"Below"</span> <span class="op">=</span> <span class="st">"red"</span><span class="op">)</span><span class="op">)</span> <span class="co">#chooses the colors</span></span></code></pre>
</div>
<p>At this point, our plot is mostly completed! The only remaining issue
is the lack of proper titling and labeling.</p>
<p>By default, the axes labels on a plot are determined by the name of
the variable being plotted. However,
<strong><code>ggplot2</code></strong> offers lots of customization
options, like specifying the axes labels and adding a title to the plot,
with relatively few lines of code. We will add more informative x-and
y-axis labels to our plot, a more explanatory label to the legend, and a
plot title.</p>
<p>The <code>labs</code> function takes the following arguments:</p>
<ul>
<li>
<code>title</code> – to produce a plot title</li>
<li>
<code>subtitle</code> – to produce a plot subtitle (smaller text
placed beneath the title)</li>
<li>
<code>caption</code> – a caption for the plot</li>
<li>
<code>...</code> – any pair of name and value for aesthetics used in
the plot (e.g., <code>x</code>, <code>y</code>, <code>fill</code>,
<code>color</code>, <code>size</code>)</li>
</ul>
<div class="codewrapper sourceCode" id="cb20">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">hourly_counts</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>avg_color <span class="op">=</span> <span class="fu">ifelse</span><span class="op">(</span><span class="va">n</span> <span class="op">&gt;</span> <span class="va">average</span>, <span class="st">"Above"</span>, <span class="st">"Below"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">hour</span>, y <span class="op">=</span> <span class="va">n</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_line</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_point</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>color <span class="op">=</span> <span class="va">avg_color</span><span class="op">)</span>, size <span class="op">=</span> <span class="fl">2</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">scale_color_manual</span><span class="op">(</span>values <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="st">"Above"</span> <span class="op">=</span> <span class="st">"green"</span>, <span class="st">"Below"</span> <span class="op">=</span> <span class="st">"red"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">labs</span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Check-In Count per Hour"</span>,</span>
<span>       x <span class="op">=</span> <span class="st">"Hour (24H Format)"</span>,</span>
<span>       y <span class="op">=</span> <span class="st">"Count"</span>,</span>
<span>       color <span class="op">=</span> <span class="st">"Relation to Average"</span><span class="op">)</span></span></code></pre>
</div>
<p>Our final step will be to improve the x-axis to include <em>all</em>
hours, not just 10, 15, and 20! This can be achieved using the
<code>scale_x_continuous</code> function.</p>
<p>The <code>scale_x_continuous</code> function is used to customize the
x-axis when the x-axis is numeric (or continuous!). Within this
function, you can control the axis limit (or range) and breaks (where
tick marks appear).</p>
<p>Let’s finish our plot using this function:</p>
<div class="codewrapper sourceCode" id="cb21">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">hourly_counts</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>avg_color <span class="op">=</span> <span class="fu">ifelse</span><span class="op">(</span><span class="va">n</span> <span class="op">&gt;</span> <span class="va">average</span>, <span class="st">"Above"</span>, <span class="st">"Below"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">hour</span>, y <span class="op">=</span> <span class="va">n</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_line</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_point</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>color <span class="op">=</span> <span class="va">avg_color</span><span class="op">)</span>, size <span class="op">=</span> <span class="fl">2</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">scale_color_manual</span><span class="op">(</span>values <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="st">"Above"</span> <span class="op">=</span> <span class="st">"green"</span>, <span class="st">"Below"</span> <span class="op">=</span> <span class="st">"red"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">labs</span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Check-In Count per Hour"</span>,</span>
<span>       x <span class="op">=</span> <span class="st">"Hour (24H Format)"</span>,</span>
<span>       y <span class="op">=</span> <span class="st">"Count"</span>,</span>
<span>       color <span class="op">=</span> <span class="st">"Relation to Average"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">scale_x_continuous</span><span class="op">(</span>breaks <span class="op">=</span> <span class="fu">seq</span><span class="op">(</span><span class="fl">0</span>, <span class="fl">24</span>, by <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<p>While the plot above gives information on the number of check-ins
across <em>all</em> locations, we may want information unique to
individual locations instead. To achieve this, using the information
above, we can calculate the amount of check-ins every hour and add a
line for each of the first five locations below:</p>
<div class="codewrapper sourceCode" id="cb22">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#calculate check-ins per hour for each location</span></span>
<span><span class="va">hourly_count</span> <span class="op">&lt;-</span> <span class="va">data</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">count</span><span class="op">(</span><span class="va">location</span>, <span class="va">hour</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#plot multiple lines, changing the color for each</span></span>
<span><span class="va">hourly_count</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">filter</span><span class="op">(</span><span class="va">location</span> <span class="op">%in%</span> <span class="fu">c</span><span class="op">(</span><span class="st">"LOCATION_001"</span>, <span class="st">"LOCATION_002"</span>, <span class="st">"LOCATION_003"</span>, <span class="st">"LOCATION_004"</span>, <span class="st">"LOCATION_005"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">hour</span>, y <span class="op">=</span> <span class="va">n</span>, color <span class="op">=</span> <span class="va">location</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> <span class="co">#Note: putting color in ggplot applies to all plots (geom_line AND geom_point)!</span></span>
<span>  <span class="fu">geom_line</span><span class="op">(</span>size <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_point</span><span class="op">(</span>size <span class="op">=</span> <span class="fl">3</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">labs</span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Hourly Check-In Count by Location"</span>,</span>
<span>       x <span class="op">=</span> <span class="st">"Hour (24H Format)"</span>,</span>
<span>       y <span class="op">=</span> <span class="st">"Count"</span>,</span>
<span>       color <span class="op">=</span> <span class="st">"Location"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">scale_x_continuous</span><span class="op">(</span>breaks <span class="op">=</span> <span class="fu">seq</span><span class="op">(</span><span class="fl">0</span>, <span class="fl">24</span>, by <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<p>As you can see, LOCATION_003 is very popular at 10AM (and may benefit
from additional support from employees/volunteers), whereas LOCATION_002
dies down after 11AM.</p>
</section><section><h2 class="section-heading" id="boxplot">Boxplot<a class="anchor" aria-label="anchor" href="#boxplot"></a>
</h2>
<hr class="half-width">
<p>We can use box plots to visualize the distribution of check-in times
for specific locations:</p>
<div class="codewrapper sourceCode" id="cb23">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">filter</span><span class="op">(</span><span class="va">location</span> <span class="op">%in%</span> <span class="fu">c</span><span class="op">(</span><span class="st">"LOCATION_001"</span>, <span class="st">"LOCATION_002"</span>, <span class="st">"LOCATION_003"</span>, <span class="st">"LOCATION_004"</span>, <span class="st">"LOCATION_005"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">location</span>, y <span class="op">=</span> <span class="va">hour</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_boxplot</span><span class="op">(</span>fill <span class="op">=</span> <span class="st">"lightblue"</span>, color <span class="op">=</span> <span class="st">"black"</span><span class="op">)</span></span></code></pre>
</div>
<p>As you may notice, it’s a bit difficult to understand this plot at
first glance! To resolve this, let’s begin by adding all of the hours on
the y-axis using the <code>scale_y_continuous</code> function! This
function behaves the exact same as the <code>scale_x_continuous</code>
function, but it applies to the y-axis instead:</p>
<div class="codewrapper sourceCode" id="cb24">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">filter</span><span class="op">(</span><span class="va">location</span> <span class="op">%in%</span> <span class="fu">c</span><span class="op">(</span><span class="st">"LOCATION_001"</span>, <span class="st">"LOCATION_002"</span>, <span class="st">"LOCATION_003"</span>, <span class="st">"LOCATION_004"</span>, <span class="st">"LOCATION_005"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">location</span>, y <span class="op">=</span> <span class="va">hour</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_boxplot</span><span class="op">(</span>fill <span class="op">=</span> <span class="st">"lightblue"</span>, color <span class="op">=</span> <span class="st">"black"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">scale_y_continuous</span><span class="op">(</span>breaks <span class="op">=</span> <span class="fu">seq</span><span class="op">(</span><span class="fl">0</span>, <span class="fl">23</span>, by <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span> </span></code></pre>
</div>
<p>By adding points to a box plot, we can have a better idea of the
number of measurements and of their distribution:</p>
<div class="codewrapper sourceCode" id="cb25">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">filter</span><span class="op">(</span><span class="va">location</span> <span class="op">%in%</span> <span class="fu">c</span><span class="op">(</span><span class="st">"LOCATION_001"</span>, <span class="st">"LOCATION_002"</span>, <span class="st">"LOCATION_003"</span>, <span class="st">"LOCATION_004"</span>, <span class="st">"LOCATION_005"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">location</span>, y <span class="op">=</span> <span class="va">hour</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_boxplot</span><span class="op">(</span>fill <span class="op">=</span> <span class="st">"lightblue"</span>, color <span class="op">=</span> <span class="st">"black"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_point</span><span class="op">(</span>color <span class="op">=</span> <span class="st">"tomato"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">scale_y_continuous</span><span class="op">(</span>breaks <span class="op">=</span> <span class="fu">seq</span><span class="op">(</span><span class="fl">0</span>, <span class="fl">23</span>, by <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<p>Looking at this plot, from a rough estimate, it looks like there are
far fewer dots on the plot than there rows in our tibble. This should
lead us to believe that there may be multiple observations plotted on
top of each other (e.g. three observations where <code>hour</code> is 12
and <code>location</code> is LOCATION_001). This is known as
“overplotting” and occurs when multiple data points share the same x and
y coordinates.</p>
<p>There are two main ways to alleviate overplotting issues: 1. changing
the transparency of the points 2. jittering the location of the
points</p>
<p>Let’s first explore option 1, or changing the transparency of the
points. When we say “transparency”, we mean the opacity/your ability to
see through the point. We can control the transparency of the points
with the <code>alpha</code> argument! Values of <code>alpha</code> range
from 0 to 1, with lower values corresponding to more transparent colors
(an <code>alpha</code> of 1 is the default value). Specifically, an
alpha of 0.1, would make a point one-tenth as opaque as a normal point.
Stated differently ten points stacked on top of each other would
correspond to a normal point.</p>
<p>With that being said, we’re going to change the <code>alpha</code> to
0.5. in an attempt to help fix the overplotting. As you may quickly
notice, the overplotting is not solved, but adding transparency begins
to address this problem, as the points where there are more overlapping
observations are darker (as opposed to lighter red):</p>
<div class="codewrapper sourceCode" id="cb26">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">filter</span><span class="op">(</span><span class="va">location</span> <span class="op">%in%</span> <span class="fu">c</span><span class="op">(</span><span class="st">"LOCATION_001"</span>, <span class="st">"LOCATION_002"</span>, <span class="st">"LOCATION_003"</span>, <span class="st">"LOCATION_004"</span>, <span class="st">"LOCATION_005"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">location</span>, y <span class="op">=</span> <span class="va">hour</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_boxplot</span><span class="op">(</span>fill <span class="op">=</span> <span class="st">"lightblue"</span>, color <span class="op">=</span> <span class="st">"black"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_point</span><span class="op">(</span>color <span class="op">=</span> <span class="st">"tomato"</span>, alpha <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">scale_y_continuous</span><span class="op">(</span>breaks <span class="op">=</span> <span class="fu">seq</span><span class="op">(</span><span class="fl">0</span>, <span class="fl">23</span>, by <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<p>Since that only helped a little bit with the overplotting problem,
let’s try option two and jitter the points on the plot, allowing us to
see each point. This is due to jittering introducing a little bit of
randomness into the position of our points. You can think of this
process as taking the overplotted graph and giving it a tiny shake! The
points will move a little bit side-to-side and up-and-down, but their
position in comparison to the original plot won’t dramatically
change.</p>
<p>Note that this solution is only suitable for plotting integer
figures! For numeric figures with decimals, geom_jitter() becomes
inappropriate because it obscures the true value of the observation.</p>
<p>We can jitter our points using the <code>geom_jitter()</code>
function instead of the <code>geom_point()</code> function, as seen
below:</p>
<div class="codewrapper sourceCode" id="cb27">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">filter</span><span class="op">(</span><span class="va">location</span> <span class="op">%in%</span> <span class="fu">c</span><span class="op">(</span><span class="st">"LOCATION_001"</span>, <span class="st">"LOCATION_002"</span>, <span class="st">"LOCATION_003"</span>, <span class="st">"LOCATION_004"</span>, <span class="st">"LOCATION_005"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">location</span>, y <span class="op">=</span> <span class="va">hour</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_boxplot</span><span class="op">(</span>fill <span class="op">=</span> <span class="st">"lightblue"</span>, color <span class="op">=</span> <span class="st">"black"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_jitter</span><span class="op">(</span>color <span class="op">=</span> <span class="st">"tomato"</span>, alpha <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">scale_y_continuous</span><span class="op">(</span>breaks <span class="op">=</span> <span class="fu">seq</span><span class="op">(</span><span class="fl">0</span>, <span class="fl">23</span>, by <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<p>As you can see, the points have been moved dramatically! Thankfully,
the <code>geom_jitter()</code> function allows for us to specify the
amount of random motion in the jitter by using the <code>width</code>
and <code>height</code> arguments. When we don’t specify values for
<code>width</code> and <code>height</code>, <code>geom_jitter()</code>
defaults to 40% of the resolution of the data (the smallest change that
can be measured). Hence, if we would like <em>less</em> spread in our
jitter than the default, we should pick values between 0.1 and 0.4.
Experiment with the values to see how your plot changes!</p>
<p>Here, we initially chose a height of 0.05 (as too much variation in
height may suggest different times at first glance) and a width of
0.2:</p>
<div class="codewrapper sourceCode" id="cb28">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">filter</span><span class="op">(</span><span class="va">location</span> <span class="op">%in%</span> <span class="fu">c</span><span class="op">(</span><span class="st">"LOCATION_001"</span>, <span class="st">"LOCATION_002"</span>, <span class="st">"LOCATION_003"</span>, <span class="st">"LOCATION_004"</span>, <span class="st">"LOCATION_005"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">location</span>, y <span class="op">=</span> <span class="va">hour</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_boxplot</span><span class="op">(</span>fill <span class="op">=</span> <span class="st">"lightblue"</span>, color <span class="op">=</span> <span class="st">"black"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_jitter</span><span class="op">(</span>color <span class="op">=</span> <span class="st">"tomato"</span>, alpha <span class="op">=</span> <span class="fl">0.5</span>, height <span class="op">=</span> <span class="fl">0.05</span>, width <span class="op">=</span> <span class="fl">0.2</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">scale_y_continuous</span><span class="op">(</span>breaks <span class="op">=</span> <span class="fu">seq</span><span class="op">(</span><span class="fl">0</span>, <span class="fl">23</span>, by <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<p>For our final step, let’s add a title, appropriate labels, and
improve the visuals of the plot overall! Additionally, to clean the
location names on the x-axis, we’ll be using the <code>mutate</code>
function (recall from Data Wrangling with dplyr) to remove the
“LOCATION_” prefix from each name (since the axis label will indicate
that these are locations!):</p>
<div class="codewrapper sourceCode" id="cb29">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">filter</span><span class="op">(</span><span class="va">location</span> <span class="op">%in%</span> <span class="fu">c</span><span class="op">(</span><span class="st">"LOCATION_001"</span>, <span class="st">"LOCATION_002"</span>, <span class="st">"LOCATION_003"</span>, <span class="st">"LOCATION_004"</span>, <span class="st">"LOCATION_005"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>location <span class="op">=</span> <span class="fu">str_remove</span><span class="op">(</span><span class="va">location</span>, <span class="st">"LOCATION_"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="co">#removes prefix</span></span>
<span>  <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">location</span>, y <span class="op">=</span> <span class="va">hour</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_boxplot</span><span class="op">(</span>fill <span class="op">=</span> <span class="st">"lightblue"</span>, color <span class="op">=</span> <span class="st">"black"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_jitter</span><span class="op">(</span>color <span class="op">=</span> <span class="st">"tomato"</span>, alpha <span class="op">=</span> <span class="fl">0.5</span>, height <span class="op">=</span> <span class="fl">0.05</span>, width <span class="op">=</span> <span class="fl">0.2</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">scale_y_continuous</span><span class="op">(</span>breaks <span class="op">=</span> <span class="fu">seq</span><span class="op">(</span><span class="fl">0</span>, <span class="fl">23</span>, by <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="co">#adds labels to the plot</span></span>
<span>  <span class="fu">labs</span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Distribution of Check-in Times by Location"</span>,</span>
<span>       x <span class="op">=</span> <span class="st">"Location"</span>,</span>
<span>       y <span class="op">=</span> <span class="st">"Hour (24-hour Format)"</span><span class="op">)</span></span></code></pre>
</div>
<div id="exercise" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="exercise" class="callout-inner">
<h3 class="callout-title">Exercise</h3>
<div class="callout-content">
<p>Box plots are useful summaries, but hide the <em>shape</em> of the
distribution. For example, if the distribution is bi-modal, we would not
see it in a box plot. An alternative to the box plot is the violin plot,
where the shape (of the density of points) is drawn.</p>
<p>Start by replacing the box plot with a violin plot; see
<code>geom_violin()</code>.</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb30">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">filter</span><span class="op">(</span><span class="va">location</span> <span class="op">%in%</span> <span class="fu">c</span><span class="op">(</span><span class="st">"LOCATION_001"</span>, <span class="st">"LOCATION_002"</span>, <span class="st">"LOCATION_003"</span>, <span class="st">"LOCATION_004"</span>, <span class="st">"LOCATION_005"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>location <span class="op">=</span> <span class="fu">str_remove</span><span class="op">(</span><span class="va">location</span>, <span class="st">"LOCATION_"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">location</span>, y <span class="op">=</span> <span class="va">hour</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_violin</span><span class="op">(</span>fill <span class="op">=</span> <span class="st">"lightblue"</span>, color <span class="op">=</span> <span class="st">"black"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_jitter</span><span class="op">(</span>color <span class="op">=</span> <span class="st">"tomato"</span>, alpha <span class="op">=</span> <span class="fl">0.5</span>, height <span class="op">=</span> <span class="fl">0.05</span>, width <span class="op">=</span> <span class="fl">0.2</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">scale_y_continuous</span><span class="op">(</span>breaks <span class="op">=</span> <span class="fu">seq</span><span class="op">(</span><span class="fl">0</span>, <span class="fl">23</span>, by <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu">labs</span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Distribution of Check-in Times by Location"</span>,</span>
<span>       x <span class="op">=</span> <span class="st">"Location"</span>,</span>
<span>       y <span class="op">=</span> <span class="st">"Hour (24-hour Format)"</span><span class="op">)</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="exercise" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="exercise" class="callout-inner">
<h3 class="callout-title">Exercise<em> (continued)</em>
</h3>
<div class="callout-content">
<p>So far, we’ve looked at the distribution of check-in times between
locations. Next, you’re going to try making a new plot to explore the
distribution of another variable between locations.</p>
<p>Create a box plot for <code>minute</code> for the locations above.
Overlay a jitter layer to on the box plot layer to display the
distributions more accurately. Feel free to select any fill, color,
alpha, height, and width! Ensure a title and proper axis labels are
added.</p>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Show me the solution </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" aria-labelledby="headingSolution2" data-bs-parent="#accordionSolution2">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb31">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">filter</span><span class="op">(</span><span class="va">location</span> <span class="op">%in%</span> <span class="fu">c</span><span class="op">(</span><span class="st">"LOCATION_001"</span>, <span class="st">"LOCATION_002"</span>, <span class="st">"LOCATION_003"</span>, <span class="st">"LOCATION_004"</span>, <span class="st">"LOCATION_005"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>location <span class="op">=</span> <span class="fu">str_remove</span><span class="op">(</span><span class="va">location</span>, <span class="st">"LOCATION_"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">location</span>, y <span class="op">=</span> <span class="va">minute</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_boxplot</span><span class="op">(</span>alpha <span class="op">=</span> <span class="fl">0</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_jitter</span><span class="op">(</span>color <span class="op">=</span> <span class="st">"navy"</span>, alpha <span class="op">=</span> <span class="fl">0.5</span>, height <span class="op">=</span> <span class="fl">0</span>, width <span class="op">=</span> <span class="fl">0.2</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">labs</span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Distribution of Check-in Minutes by Location"</span>,</span>
<span>       x <span class="op">=</span> <span class="st">"Location"</span>,</span>
<span>       y <span class="op">=</span> <span class="st">"Minute of Check-in"</span><span class="op">)</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="exercise" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="exercise" class="callout-inner">
<h3 class="callout-title">Exercise<em> (continued)</em>
</h3>
<div class="callout-content">
<p>Lastly, color each point according to the device used! Ensure you
change the name of the legend as well and remove “DEVICE_” from all
device names (to ensure a clean legend).</p>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3"> Show me the solution </h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" aria-labelledby="headingSolution3" data-bs-parent="#accordionSolution3">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb32">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">filter</span><span class="op">(</span><span class="va">location</span> <span class="op">%in%</span> <span class="fu">c</span><span class="op">(</span><span class="st">"LOCATION_001"</span>, <span class="st">"LOCATION_002"</span>, <span class="st">"LOCATION_003"</span>, <span class="st">"LOCATION_004"</span>, <span class="st">"LOCATION_005"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>location <span class="op">=</span> <span class="fu">str_remove</span><span class="op">(</span><span class="va">location</span>, <span class="st">"LOCATION_"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>device <span class="op">=</span> <span class="fu">str_remove</span><span class="op">(</span><span class="va">device</span>, <span class="st">"DEVICE_"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">location</span>, y <span class="op">=</span> <span class="va">minute</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_boxplot</span><span class="op">(</span>alpha <span class="op">=</span> <span class="fl">0</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_jitter</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>color <span class="op">=</span> <span class="va">device</span><span class="op">)</span>, alpha <span class="op">=</span> <span class="fl">1</span>, width <span class="op">=</span> <span class="fl">0.2</span>, height <span class="op">=</span> <span class="fl">0.2</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">labs</span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Distribution of Check-in Minutes by Location"</span>,</span>
<span>       x <span class="op">=</span> <span class="st">"Location"</span>,</span>
<span>       y <span class="op">=</span> <span class="st">"Minute of Check-in"</span>,</span>
<span>       color <span class="op">=</span> <span class="st">"Device"</span><span class="op">)</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="bar-plot">Bar Plot<a class="anchor" aria-label="anchor" href="#bar-plot"></a>
</h2>
<hr class="half-width">
<p>Bar plots are great for visualizing categorical data, such as
counting the number of check-ins per device, per location, or per
precinct. By default, <code>geom_bar</code> accepts a variable for x,
and plots the number of instances of each value of x (in this case,
location) within the data set.</p>
<p>Let’s create a bar plot displaying check-in counts for the first five
locations:</p>
<div class="codewrapper sourceCode" id="cb33">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">filter</span><span class="op">(</span><span class="va">location</span> <span class="op">%in%</span> <span class="fu">c</span><span class="op">(</span><span class="st">"LOCATION_001"</span>, <span class="st">"LOCATION_002"</span>, <span class="st">"LOCATION_003"</span>, <span class="st">"LOCATION_004"</span>, <span class="st">"LOCATION_005"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>location <span class="op">=</span> <span class="fu">str_remove</span><span class="op">(</span><span class="va">location</span>, <span class="st">"LOCATION_"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">location</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_bar</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">labs</span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Check-In Count by Location"</span>,</span>
<span>       x <span class="op">=</span> <span class="st">"Location"</span>,</span>
<span>       y <span class="op">=</span> <span class="st">"Count"</span><span class="op">)</span></span></code></pre>
</div>
<p>Next, let’s use the <code>fill</code> aesthetic for the
<code>geom_bar()</code> geom to color bars by the device used for
check-in:</p>
<div class="codewrapper sourceCode" id="cb34">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">filter</span><span class="op">(</span><span class="va">location</span> <span class="op">%in%</span> <span class="fu">c</span><span class="op">(</span><span class="st">"LOCATION_001"</span>, <span class="st">"LOCATION_002"</span>, <span class="st">"LOCATION_003"</span>, <span class="st">"LOCATION_004"</span>, <span class="st">"LOCATION_005"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>location <span class="op">=</span> <span class="fu">str_remove</span><span class="op">(</span><span class="va">location</span>, <span class="st">"LOCATION_"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>device <span class="op">=</span> <span class="fu">str_remove</span><span class="op">(</span><span class="va">device</span>, <span class="st">"DEVICE_"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">location</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_bar</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>fill <span class="op">=</span> <span class="va">device</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">labs</span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Check-In Count by Location"</span>,</span>
<span>       x <span class="op">=</span> <span class="st">"Location"</span>,</span>
<span>       y <span class="op">=</span> <span class="st">"Count"</span>,</span>
<span>       fill <span class="op">=</span> <span class="st">"Device"</span><span class="op">)</span></span></code></pre>
</div>
<p>This creates a stacked bar chart. Unfortunately, as you may notice,
this is a bit difficult to read. Instead, we can separate the portions
of the stacked bar that correspond to each device and put them
side-by-side by using the <code>position</code> argument for
<code>geom_bar()</code> and setting it to “dodge”.</p>
<p>Let’s apply this concept to the code below, changing the title for
clarity:</p>
<div class="codewrapper sourceCode" id="cb35">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">filter</span><span class="op">(</span><span class="va">location</span> <span class="op">%in%</span> <span class="fu">c</span><span class="op">(</span><span class="st">"LOCATION_001"</span>, <span class="st">"LOCATION_002"</span>, <span class="st">"LOCATION_003"</span>, <span class="st">"LOCATION_004"</span>, <span class="st">"LOCATION_005"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>location <span class="op">=</span> <span class="fu">str_remove</span><span class="op">(</span><span class="va">location</span>, <span class="st">"LOCATION_"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>device <span class="op">=</span> <span class="fu">str_remove</span><span class="op">(</span><span class="va">device</span>, <span class="st">"DEVICE_"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">location</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_bar</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>fill <span class="op">=</span> <span class="va">device</span><span class="op">)</span>, position <span class="op">=</span> <span class="st">"dodge"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">labs</span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Count of Check-Ins by Location for Each Device"</span>,</span>
<span>       x <span class="op">=</span> <span class="st">"Location"</span>,</span>
<span>       y <span class="op">=</span> <span class="st">"Count"</span>,</span>
<span>       fill <span class="op">=</span> <span class="st">"Device"</span><span class="op">)</span></span></code></pre>
</div>
<p>As you can see, this is much easier to read and interpret!</p>
<p>In some cases, we may be more interested in the <em>proportion</em>
of each individual device at each location rather than the actual
<em>count</em> of each device. Proportions are helpful because they
account for differences in sample sizes, and instead focus on
distribution within specific locations! To compare proportions, we will
first create a new tibble (<code>prop_device</code>) with a new column
named “prop”, representing the percent of each device within each
location.</p>
<div class="codewrapper sourceCode" id="cb36">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">prop_device</span> <span class="op">&lt;-</span> <span class="va">data</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">filter</span><span class="op">(</span><span class="va">location</span> <span class="op">%in%</span> <span class="fu">c</span><span class="op">(</span><span class="st">"LOCATION_001"</span>, <span class="st">"LOCATION_002"</span>, <span class="st">"LOCATION_003"</span>, <span class="st">"LOCATION_004"</span>, <span class="st">"LOCATION_005"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">count</span><span class="op">(</span><span class="va">location</span>, <span class="va">device</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">group_by</span><span class="op">(</span><span class="va">location</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>prop <span class="op">=</span> <span class="va">n</span> <span class="op">/</span> <span class="fu">sum</span><span class="op">(</span><span class="va">n</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">ungroup</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<p>Now, we can use this new tibble to create our plot showing the
<em>proportion</em> of each device at each location! When creating your
plot, ensure you include <code>y = prop</code> within the initial ggplot
call AND <code>stat = "identity"</code> to tell ggplot to use the y
values instead of the count, and adjust labels/titles for clarity:</p>
<div class="codewrapper sourceCode" id="cb37">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">prop_device</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">filter</span><span class="op">(</span><span class="va">location</span> <span class="op">%in%</span> <span class="fu">c</span><span class="op">(</span><span class="st">"LOCATION_001"</span>, <span class="st">"LOCATION_002"</span>, <span class="st">"LOCATION_003"</span>, <span class="st">"LOCATION_004"</span>, <span class="st">"LOCATION_005"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>location <span class="op">=</span> <span class="fu">str_remove</span><span class="op">(</span><span class="va">location</span>, <span class="st">"LOCATION_"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>device <span class="op">=</span> <span class="fu">str_remove</span><span class="op">(</span><span class="va">device</span>, <span class="st">"DEVICE_"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">location</span>, y <span class="op">=</span> <span class="va">prop</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_bar</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>fill <span class="op">=</span> <span class="va">device</span><span class="op">)</span>, position <span class="op">=</span> <span class="st">"dodge"</span>, stat <span class="op">=</span> <span class="st">"identity"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">labs</span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Proportion of Check-Ins by Location for Each Device"</span>,</span>
<span>       x <span class="op">=</span> <span class="st">"Location"</span>,</span>
<span>       y <span class="op">=</span> <span class="st">"Proportion"</span>,</span>
<span>       fill <span class="op">=</span> <span class="st">"Device"</span><span class="op">)</span></span></code></pre>
</div>
<p>Looking at this graph, we can see that all of the devices (except
DEVICE_012) have similar proportions (aka. usage rates) when sample
sizes are taken into consideration!</p>
<div id="note" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<span class="callout-header">Callout</span>
<div id="note" class="callout-inner">
<h3 class="callout-title">Note</h3>
<div class="callout-content">
<p>If you’d prefer to visualize percentages instead of proportions, you
can multiply the prop column by 100! For example:</p>
<div class="codewrapper sourceCode" id="cb38">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">prop_device</span> <span class="op">&lt;-</span> <span class="va">prop_device</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>prop <span class="op">=</span> <span class="op">(</span><span class="va">prop</span> <span class="op">*</span> <span class="fl">100</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<p>If you adjust to percentages, however, please ensure you adjust
titles and axis labels accordingly!</p>
</div>
</div>
</div>
<div id="exercise-1" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="exercise-1" class="callout-inner">
<h3 class="callout-title">Exercise</h3>
<div class="callout-content">
<p>Using the information you learned above, create a bar plot showing
the proportion (or percentages, if you’d like) of check-ins by hour for
the first four devices (ie. “DEVICE_001”, “DEVICE_002”, “DEVICE_003”,
and “DEVICE_004”). Which hours had the highest proportion of check-ins
from DEVICE_001 and DEVICE_002?</p>
</div>
</div>
</div>
<div id="accordionSolution4" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution4" aria-expanded="false" aria-controls="collapseSolution4">
  <h4 class="accordion-header" id="headingSolution4"> Show me the solution </h4>
</button>
<div id="collapseSolution4" class="accordion-collapse collapse" aria-labelledby="headingSolution4" data-bs-parent="#accordionSolution4">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb39">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#calculate proportions</span></span>
<span><span class="va">prop_hour_device</span> <span class="op">&lt;-</span> <span class="va">data</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">filter</span><span class="op">(</span><span class="va">device</span> <span class="op">%in%</span> <span class="fu">c</span><span class="op">(</span><span class="st">"DEVICE_001"</span>, <span class="st">"DEVICE_002"</span>, <span class="st">"DEVICE_003"</span>, <span class="st">"DEVICE_004"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">count</span><span class="op">(</span><span class="va">hour</span>, <span class="va">device</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">group_by</span><span class="op">(</span><span class="va">hour</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>prop <span class="op">=</span> <span class="va">n</span> <span class="op">/</span> <span class="fu">sum</span><span class="op">(</span><span class="va">n</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">ungroup</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#generate plot</span></span>
<span><span class="va">prop_hour_device</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>device <span class="op">=</span> <span class="fu">str_remove</span><span class="op">(</span><span class="va">device</span>, <span class="st">"DEVICE_"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">hour</span>, y <span class="op">=</span> <span class="va">prop</span>, fill <span class="op">=</span> <span class="va">device</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_bar</span><span class="op">(</span>stat <span class="op">=</span> <span class="st">"identity"</span>, position <span class="op">=</span> <span class="st">"dodge"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">labs</span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Proportion of Check-Ins by Hour for Each Device"</span>,</span>
<span>       x <span class="op">=</span> <span class="st">"Hour (24H Format)"</span>,</span>
<span>       y <span class="op">=</span> <span class="st">"Proportion"</span>,</span>
<span>       fill <span class="op">=</span> <span class="st">"Device"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">scale_x_continuous</span><span class="op">(</span>breaks <span class="op">=</span> <span class="fu">seq</span><span class="op">(</span><span class="fl">0</span>, <span class="fl">24</span>, by <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="co">#note: you can remove 6 and 20 by using this line instead: </span></span>
<span>  <span class="co">#scale_x_continuous(breaks = seq(7, 19, by = 1))</span></span></code></pre>
</div>
<p>From this plot, we can identify that DEVICE_001 has the highest
proportion at 7:00/7AM and DEVICE_002 has the highest proportion at
19:00/7PM.</p>
</div>
</div>
</div>
</div>
<div id="exercise-1" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="exercise-1" class="callout-inner">
<h3 class="callout-title">Exercise<em> (continued)</em>
</h3>
<div class="callout-content">
<div id="challenge-exercise" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="challenge-exercise" class="callout-inner">
<h3 class="callout-title">Challenge Exercise</h3>
<div class="callout-content">
<p>Create a bar plot showing the check-in counts for the ten devices
with the highest number of check-ins. Color each bar according to the
device, title it appropriately, and use proper axis labels!</p>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="accordionSolution5" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution5" aria-expanded="false" aria-controls="collapseSolution5">
  <h4 class="accordion-header" id="headingSolution5"> Show me the solution </h4>
</button>
<div id="collapseSolution5" class="accordion-collapse collapse" aria-labelledby="headingSolution5" data-bs-parent="#accordionSolution5">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb40">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#retrieve top devices</span></span>
<span><span class="va">top_devices</span> <span class="op">&lt;-</span> <span class="va">data</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">count</span><span class="op">(</span><span class="va">device</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">top_n</span><span class="op">(</span><span class="fl">10</span>, <span class="va">n</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">pull</span><span class="op">(</span><span class="va">device</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#create plot</span></span>
<span><span class="va">data</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">filter</span><span class="op">(</span><span class="va">device</span> <span class="op">%in%</span> <span class="va">top_devices</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>device <span class="op">=</span> <span class="fu">str_remove</span><span class="op">(</span><span class="va">device</span>, <span class="st">"DEVICE_"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">device</span>, fill <span class="op">=</span> <span class="va">device</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_bar</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">labs</span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Top 10 Devices by Number of Check-ins"</span>,</span>
<span>       x <span class="op">=</span> <span class="st">"Device"</span>,</span>
<span>       y <span class="op">=</span> <span class="st">"Count"</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu">theme_classic</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="faceting" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<span class="callout-header">Discussion</span>
<div id="faceting" class="callout-inner">
<h3 class="callout-title">Faceting</h3>
<div class="callout-content">
<p>Rather than creating a single plot with side-by-side bars for each
device, we may want to create multiple plots, where each plot shows the
data for a single device. This would be especially useful if we had a
large number of devices that we had sampled (like 5 or 10), as
side-by-side bars become harder to read as the number of bars
increase.</p>
<p><strong><code>ggplot2</code></strong> has a special technique called
<em>faceting</em> that allows the user to split one plot into multiple
plots based on a factor included in the data set. Below, we can use this
technique to split our bar plot of check-in proportions by hour for each
device so each device has its own panel:</p>
<div class="codewrapper sourceCode" id="cb41">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#generate plot</span></span>
<span><span class="va">prop_hour_device</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>device <span class="op">=</span> <span class="fu">str_remove</span><span class="op">(</span><span class="va">device</span>, <span class="st">"DEVICE_"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">hour</span>, y <span class="op">=</span> <span class="va">prop</span>, fill <span class="op">=</span> <span class="va">device</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_bar</span><span class="op">(</span>stat <span class="op">=</span> <span class="st">"identity"</span>, position <span class="op">=</span> <span class="st">"dodge"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">labs</span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Proportion of Check-Ins by Hour for Each Device"</span>,</span>
<span>       x <span class="op">=</span> <span class="st">"Hour (24H Format)"</span>,</span>
<span>       y <span class="op">=</span> <span class="st">"Proportion"</span>,</span>
<span>       fill <span class="op">=</span> <span class="st">"Device"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">scale_x_continuous</span><span class="op">(</span>breaks <span class="op">=</span> <span class="fu">seq</span><span class="op">(</span><span class="fl">0</span>, <span class="fl">24</span>, by <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">facet_wrap</span><span class="op">(</span><span class="op">~</span> <span class="va">device</span>, scales <span class="op">=</span> <span class="st">"free_y"</span><span class="op">)</span> <span class="co">#here, we specify we want to facet wrap by device</span></span></code></pre>
</div>
<p>You can click the “Zoom” button in your RStudio plots panel to view a
larger version of this plot.</p>
<p>Usually plots with white background look more readable when printed.
We can set the background to white using the function
<code>theme_bw()</code>. Additionally, we can remove the grid:</p>
<div class="codewrapper sourceCode" id="cb42">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">prop_hour_device</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>device <span class="op">=</span> <span class="fu">str_remove</span><span class="op">(</span><span class="va">device</span>, <span class="st">"DEVICE_"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">hour</span>, y <span class="op">=</span> <span class="va">prop</span>, fill <span class="op">=</span> <span class="va">device</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_bar</span><span class="op">(</span>stat <span class="op">=</span> <span class="st">"identity"</span>, position <span class="op">=</span> <span class="st">"dodge"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">labs</span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Proportion of Check-Ins by Hour for Each Device"</span>,</span>
<span>       x <span class="op">=</span> <span class="st">"Hour (24H Format)"</span>,</span>
<span>       y <span class="op">=</span> <span class="st">"Proportion"</span>,</span>
<span>       fill <span class="op">=</span> <span class="st">"Device"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">scale_x_continuous</span><span class="op">(</span>breaks <span class="op">=</span> <span class="fu">seq</span><span class="op">(</span><span class="fl">0</span>, <span class="fl">24</span>, by <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">facet_wrap</span><span class="op">(</span><span class="op">~</span> <span class="va">device</span>, scales <span class="op">=</span> <span class="st">"free_y"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme_bw</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme</span><span class="op">(</span>panel.grid <span class="op">=</span> <span class="fu">element_blank</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<p>We can also facet by location to see patterns of device proportions
within different locations:</p>
<div class="codewrapper sourceCode" id="cb43">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#creates new data using location information</span></span>
<span><span class="va">prop_hour_device_loc</span> <span class="op">&lt;-</span> <span class="va">data</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">filter</span><span class="op">(</span><span class="va">device</span> <span class="op">%in%</span> <span class="fu">c</span><span class="op">(</span><span class="st">"DEVICE_001"</span>, <span class="st">"DEVICE_002"</span>, <span class="st">"DEVICE_003"</span>, <span class="st">"DEVICE_004"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">count</span><span class="op">(</span><span class="va">hour</span>, <span class="va">location</span>, <span class="va">device</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">group_by</span><span class="op">(</span><span class="va">hour</span>, <span class="va">location</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="co">#this specifies to calculate within locations as well</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>prop <span class="op">=</span> <span class="va">n</span> <span class="op">/</span> <span class="fu">sum</span><span class="op">(</span><span class="va">n</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">ungroup</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#generates plot</span></span>
<span><span class="va">prop_hour_device_loc</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>device <span class="op">=</span> <span class="fu">str_remove</span><span class="op">(</span><span class="va">device</span>, <span class="st">"DEVICE_"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">hour</span>, y <span class="op">=</span> <span class="va">prop</span>, fill <span class="op">=</span> <span class="va">device</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_bar</span><span class="op">(</span>stat <span class="op">=</span> <span class="st">"identity"</span>, position <span class="op">=</span> <span class="st">"dodge"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">labs</span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Hourly Distribution of Device Check-Ins, Faceted by Location"</span>,</span>
<span>       x <span class="op">=</span> <span class="st">"Hour (24H Format)"</span>,</span>
<span>       y <span class="op">=</span> <span class="st">"Proportion"</span>,</span>
<span>       fill <span class="op">=</span> <span class="st">"Device"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">scale_x_continuous</span><span class="op">(</span>breaks <span class="op">=</span> <span class="fu">seq</span><span class="op">(</span><span class="fl">0</span>, <span class="fl">24</span>, by <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">facet_wrap</span><span class="op">(</span><span class="op">~</span> <span class="va">location</span>, scales <span class="op">=</span> <span class="st">"free_y"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme_bw</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme</span><span class="op">(</span>panel.grid <span class="op">=</span> <span class="fu">element_blank</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<p>Looking at the graph above, we can see that at LOCATION_001, devices
have varying rates of usage throughout the day, and at LOCATION_002,
devices are often used the same amount!</p>
<div class="section level2">
<h2 id="histograms">Histograms<a class="anchor" aria-label="anchor" href="#histograms"></a>
</h2>
<p>When working with election data, understanding the distribution of
check-ins over time is crucial! As seen above, bar plots allow us to
look at general peaks and overall trends using the <code>hour</code>
variable. However, if we wanted to look at the distribution of check-ins
at a more detailed level (like by minute intervals), bar plots become
much less effective.</p>
<p>In these cases, <span class="glosario_def"><a href="https://glosario.carpentries.org/en/#histogram" class="external-link">histograms</a></span>
are more appropriate to use! This is due to histograms’unique ability to
allow for the sorting of continuous variables into bins, making it
easier to identify trends.</p>
<p>First, let’s look at the bar chart below:</p>
<div class="codewrapper sourceCode" id="cb44">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">hour</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_bar</span><span class="op">(</span>color <span class="op">=</span> <span class="st">"black"</span>, fill <span class="op">=</span> <span class="st">"lightblue"</span>, <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">scale_x_continuous</span><span class="op">(</span>breaks <span class="op">=</span> <span class="fu">seq</span><span class="op">(</span><span class="fl">0</span>, <span class="fl">24</span>, by <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">labs</span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Check-In Distribution by Hour"</span>,</span>
<span>       x <span class="op">=</span> <span class="st">"Hour (24H Format)"</span>,</span>
<span>       y <span class="op">=</span> <span class="st">"Count"</span><span class="op">)</span></span></code></pre>
</div>
<p>Now, let’s create a similar plot displaying the distribution of
check-ins by hour using a histogram instead of a bar plot:</p>
<div class="codewrapper sourceCode" id="cb45">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">hour</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_histogram</span><span class="op">(</span>color <span class="op">=</span> <span class="st">"black"</span>, fill <span class="op">=</span> <span class="st">"lightblue"</span>, binwidth <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">scale_x_continuous</span><span class="op">(</span>breaks <span class="op">=</span> <span class="fu">seq</span><span class="op">(</span><span class="fl">0</span>, <span class="fl">24</span>, by <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">labs</span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Check-In Distribution by Hour"</span>,</span>
<span>       x <span class="op">=</span> <span class="st">"Hour (24H Format)"</span>,</span>
<span>       y <span class="op">=</span> <span class="st">"Count"</span><span class="op">)</span></span></code></pre>
</div>
<p>As you may see, the plots look almost identical, save for the
histogram having bars that touch (since the data is continuous and not
discrete/categorical).</p>
<p>With histograms, however, we can create a more granular view by using
smaller bins:</p>
<div class="codewrapper sourceCode" id="cb46">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#create a decimal representation of the data (hour + minutes)</span></span>
<span><span class="va">checkins_with_dec_hour</span> <span class="op">&lt;-</span> <span class="va">data</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>dec_hour <span class="op">=</span> <span class="va">hour</span> <span class="op">+</span> <span class="va">minute</span><span class="op">/</span><span class="fl">60</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#plot with 15 minute bins (0.25 minute bins)</span></span>
<span><span class="va">checkins_with_dec_hour</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">dec_hour</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_histogram</span><span class="op">(</span>color <span class="op">=</span> <span class="st">"black"</span>, fill <span class="op">=</span> <span class="st">"lightblue"</span>, binwidth <span class="op">=</span> <span class="fl">0.25</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">scale_x_continuous</span><span class="op">(</span>breaks <span class="op">=</span> <span class="fu">seq</span><span class="op">(</span><span class="fl">0</span>, <span class="fl">24</span>, by <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">labs</span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Check-In Distribution by Hour (15-Minute Intervals)"</span>,</span>
<span>       x <span class="op">=</span> <span class="st">"Hour (24H Format)"</span>,</span>
<span>       y <span class="op">=</span> <span class="st">"Count"</span><span class="op">)</span></span></code></pre>
</div>
<p>Looking at this graph, it’s clearer that there is a large spike of
check-ins early in the morning (between 7AM and 8AM). If you were to
only look at the bar plot or 1-bin histogram, however, you may have
assumed check-ins kept about the same rate throughout the whole morning
(7AM - 10AM)!</p>
</div>
<div class="section level2">
<h2 id="visualizing-location-data-with-maps">Visualizing Location Data with Maps<a class="anchor" aria-label="anchor" href="#visualizing-location-data-with-maps"></a>
</h2>
<p>When working with geographic or location data, it’s often useful to
visualize it on a map. Throughout the next section, we’ll demonstrate
ways to work with spacial data using the Game of Thrones Dataset!</p>
<p>First, let’s load the <code>sf</code> package. This package allows
gpplot2 to work with spacial data (like shape files):</p>
<div class="codewrapper sourceCode" id="cb47">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">library</span><span class="op">(</span><span class="va">sf</span><span class="op">)</span></span></code></pre>
</div>
<p>Next, let’s load in the map data containing our map polygons:</p>
<div class="codewrapper sourceCode" id="cb48">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#read in data and save to object</span></span>
<span><span class="va">westeros_map</span> <span class="op">&lt;-</span> <span class="fu">st_read</span><span class="op">(</span><span class="fu">here</span><span class="op">(</span><span class="st">"data"</span>, <span class="st">"polygons_GoT.geojson"</span><span class="op">)</span>, quiet <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#look at the data structure</span></span>
<span><span class="fu">head</span><span class="op">(</span><span class="va">westeros_map</span>, <span class="fl">3</span><span class="op">)</span></span></code></pre>
</div>
<p>Finally, let’s load the voting data and link it to our map data using
the <code>merge</code> function. This function allows for two tibbles to
be linked based off of a specified variable (in our case, the “id”):</p>
<div class="codewrapper sourceCode" id="cb49">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#read in data and save to object</span></span>
<span><span class="va">got_votes</span> <span class="op">&lt;-</span> <span class="fu">read_csv</span><span class="op">(</span><span class="fu">here</span><span class="op">(</span><span class="st">"data"</span>, <span class="st">"voting_GoT.csv"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#look at the data structure</span></span>
<span><span class="fu">head</span><span class="op">(</span><span class="va">got_votes</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#join data using the merge function</span></span>
<span><span class="va">westeros_voting</span> <span class="op">&lt;-</span> <span class="fu">merge</span><span class="op">(</span><span class="va">westeros_map</span>, <span class="va">got_votes</span>, by <span class="op">=</span> <span class="st">"id"</span><span class="op">)</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="map-introduction">Map Introduction<a class="anchor" aria-label="anchor" href="#map-introduction"></a>
</h3>
<p>Now that our data is ready to be mapped, let’s start by visualizing
which regions favor Jon Snow over Daenerys Targaryen.</p>
<p>When using spacial data, we use a special ggplot function called
<code>geom_sf</code>. Simply, this tells ggplot to look at the simple
features (like lines or polygons) in your data and use that for the
graph!</p>
<p>Below, we will be using <code>geom_sf</code> on our combined data and
use Jon_Snow_pct to determine the level of support Jon Snow is getting
from each region:</p>
<div class="codewrapper sourceCode" id="cb50">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_sf</span><span class="op">(</span>data <span class="op">=</span> <span class="va">westeros_voting</span>, <span class="fu">aes</span><span class="op">(</span>fill <span class="op">=</span> <span class="va">Jon_Snow_pct</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">scale_fill_gradient</span><span class="op">(</span>low <span class="op">=</span> <span class="st">"lightblue"</span>, high <span class="op">=</span> <span class="st">"darkblue"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">labs</span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Support for Jon Snow across Westeros"</span>,</span>
<span>       fill <span class="op">=</span> <span class="st">"Support %"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme_bw</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<p>Next, let’s do the same for Daenerys Targaryen, but with red instead
of blue for the color scale:</p>
<div class="codewrapper sourceCode" id="cb51">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create a map colored by Daenerys support</span></span>
<span><span class="fu">ggplot</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_sf</span><span class="op">(</span>data <span class="op">=</span> <span class="va">westeros_voting</span>, <span class="fu">aes</span><span class="op">(</span>fill <span class="op">=</span> <span class="va">Daenerys_Targaryen_pct</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">scale_fill_gradient</span><span class="op">(</span>low <span class="op">=</span> <span class="st">"pink"</span>, high <span class="op">=</span> <span class="st">"darkred"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">labs</span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Support for Daenerys Targaryen across Westeros"</span>,</span>
<span>       fill <span class="op">=</span> <span class="st">"Support %"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme_bw</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
</div>
<div class="section level3">
<h3 id="conditional-map-coloring">Conditional Map Coloring<a class="anchor" aria-label="anchor" href="#conditional-map-coloring"></a>
</h3>
<p>Often, it may be more beneficial to color each part of the map
according to the candidate that received the most votes, rather than
displaying the amount of support a single candidate received.</p>
<p>This can be achieved by determining which candidate received the most
votes and filling that section with that candidate’s color using the
<code>scale_fill_manual</code> function:</p>
<div class="codewrapper sourceCode" id="cb52">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#create a column with the name of the dominant candidate</span></span>
<span><span class="va">westeros_voting</span><span class="op">$</span><span class="va">dominant</span> <span class="op">&lt;-</span> <span class="fu">ifelse</span><span class="op">(</span><span class="va">westeros_voting</span><span class="op">$</span><span class="va">Jon_Snow_pct</span> <span class="op">&gt;</span> <span class="va">westeros_voting</span><span class="op">$</span><span class="va">Daenerys_Targaryen_pct</span>, </span>
<span>                                  <span class="st">"Jon Snow"</span>, <span class="st">"Daenerys Targaryen"</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#pick fill colors based on the dominant candidate</span></span>
<span><span class="va">dom_color</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span><span class="st">"Jon Snow"</span> <span class="op">=</span> <span class="st">"steelblue"</span>, </span>
<span>               <span class="st">"Daenerys Targaryen"</span> <span class="op">=</span> <span class="st">"firebrick"</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#create a map with the specified coloring</span></span>
<span><span class="fu">ggplot</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_sf</span><span class="op">(</span>data <span class="op">=</span> <span class="va">westeros_voting</span>, <span class="fu">aes</span><span class="op">(</span>fill <span class="op">=</span> <span class="va">dominant</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">scale_fill_manual</span><span class="op">(</span>name <span class="op">=</span> <span class="st">"Dominant Candidate"</span>, values <span class="op">=</span> <span class="va">dom_color</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">labs</span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Dominant Candidate by Region"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme_bw</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<p>In some cases, you may not just be interested in who won each region,
but additionally by how much. To map this, first determine the margin of
victory and add a column containing how strong of a victory they
had:</p>
<div class="codewrapper sourceCode" id="cb53">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#calculate margin of victory</span></span>
<span><span class="va">westeros_voting</span><span class="op">$</span><span class="va">margin</span> <span class="op">&lt;-</span> <span class="fu">abs</span><span class="op">(</span><span class="va">westeros_voting</span><span class="op">$</span><span class="va">Jon_Snow_pct</span> <span class="op">-</span> <span class="va">westeros_voting</span><span class="op">$</span><span class="va">Daenerys_Targaryen_pct</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#bin the margin into three levels (low, med, high)</span></span>
<span><span class="va">westeros_voting</span><span class="op">$</span><span class="va">margin_bin</span> <span class="op">&lt;-</span> <span class="fu">ifelse</span><span class="op">(</span></span>
<span>  <span class="va">westeros_voting</span><span class="op">$</span><span class="va">margin</span> <span class="op">&lt;=</span> <span class="fl">5</span>, <span class="st">"Low"</span>,</span>
<span>  <span class="fu">ifelse</span><span class="op">(</span><span class="va">westeros_voting</span><span class="op">$</span><span class="va">margin</span> <span class="op">&lt;=</span> <span class="fl">20</span>, <span class="st">"Med"</span>,</span>
<span>         <span class="st">"High"</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre>
</div>
<p>Using the information you gained above, you can now develop your
“fill rule” and select the color that corresponds to each instance. In
this case, your “fill rule” consists of the winner of each region (ie.
Jon Snow) and how high of a margin of victory they had (ie. High):</p>
<div class="codewrapper sourceCode" id="cb54">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#make a fill rule (ie. Jon Snow - High)</span></span>
<span><span class="va">westeros_voting</span><span class="op">$</span><span class="va">marg_fill</span> <span class="op">&lt;-</span> <span class="fu">paste</span><span class="op">(</span><span class="va">westeros_voting</span><span class="op">$</span><span class="va">dominant</span>, <span class="va">westeros_voting</span><span class="op">$</span><span class="va">margin_bin</span>, sep <span class="op">=</span> <span class="st">" - "</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#pick fill colors based on the fill rule!</span></span>
<span><span class="va">marg_color</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span></span>
<span>  <span class="st">"Daenerys Targaryen - High"</span> <span class="op">=</span> <span class="st">"brown4"</span>,</span>
<span>  <span class="st">"Daenerys Targaryen - Med"</span> <span class="op">=</span> <span class="st">"firebrick"</span>,</span>
<span>  <span class="st">"Daenerys Targaryen - Low"</span> <span class="op">=</span> <span class="st">"pink"</span>,</span>
<span>  <span class="st">"Jon Snow - High"</span> <span class="op">=</span> <span class="st">"darkblue"</span>,</span>
<span>  <span class="st">"Jon Snow - Med"</span> <span class="op">=</span> <span class="st">"royalblue"</span>,</span>
<span>  <span class="st">"Jon Snow - Low"</span> <span class="op">=</span> <span class="st">"lightblue"</span></span>
<span><span class="op">)</span></span></code></pre>
</div>
<p>Your final step is to combine your fill rule and chosen colors with
your mapping information, creating your margin of victory map:</p>
<div class="codewrapper sourceCode" id="cb55">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#create margin of victory map</span></span>
<span><span class="fu">ggplot</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_sf</span><span class="op">(</span>data <span class="op">=</span> <span class="va">westeros_voting</span>, <span class="fu">aes</span><span class="op">(</span>fill <span class="op">=</span> <span class="va">marg_fill</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">scale_fill_manual</span><span class="op">(</span>name <span class="op">=</span> <span class="st">"Winner &amp; Margin"</span>, values <span class="op">=</span> <span class="va">marg_color</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">labs</span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Margin of Victory in Each Region"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme_bw</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
</div>
<div class="section level3">
<h3 id="adding-map-labels">Adding Map Labels<a class="anchor" aria-label="anchor" href="#adding-map-labels"></a>
</h3>
<p>After ensuring your map includes all the information required, the
final step is adding region labels! Unfortunately, due to the nature of
polygons, this is a bit more difficult than simply using the
<code>labs</code> function.</p>
<p>To add region labels, your first step is to convert your data to an
simple feature, also known as an sf, object. This will allow for the
calculation of where your labels will sit on your map:</p>
<div class="codewrapper sourceCode" id="cb56">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#convert to sf</span></span>
<span><span class="va">westeros_voting_sf</span> <span class="op">&lt;-</span> <span class="fu">st_as_sf</span><span class="op">(</span><span class="va">westeros_voting</span><span class="op">)</span></span></code></pre>
</div>
<p>Your second step is to determine where your region labels will sit on
your map! This is completed by calculating
the<code>r</code>gdef(‘centroid’, ‘centroids’)`, or center points, of
each region. Below, we will calculate the centroid of each region and
convert its x and y coordinates to columns for easier access:</p>
<div class="codewrapper sourceCode" id="cb57">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#calculate centroid</span></span>
<span><span class="va">region_centroids</span> <span class="op">&lt;-</span> <span class="fu">st_centroid</span><span class="op">(</span><span class="va">westeros_voting_sf</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#extract the coordinates</span></span>
<span><span class="va">coords</span> <span class="op">&lt;-</span> <span class="fu">st_coordinates</span><span class="op">(</span><span class="va">region_centroids</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#convert coordinates to columns coords.X and coords.Y</span></span>
<span><span class="va">region_centroids</span><span class="op">$</span><span class="va">coords.X</span> <span class="op">&lt;-</span> <span class="va">coords</span><span class="op">[</span>, <span class="fl">1</span><span class="op">]</span></span>
<span><span class="va">region_centroids</span><span class="op">$</span><span class="va">coords.Y</span> <span class="op">&lt;-</span> <span class="va">coords</span><span class="op">[</span>, <span class="fl">2</span><span class="op">]</span></span></code></pre>
</div>
<p>Now that we have determined where the region labels will be placed,
we can finally add the region labels onto the map using the
<code>geom_text</code> function.</p>
<p>Within this function, we can specify the data used (in this case,
<code>region_centroids</code>), the coordinates, the information that
will be used for the label, and text formatting information (like size
and bold/italics)!</p>
<p>Additionally, it’s important to note that we need to use
<code>westeros_voting_sf</code> as the data for the map instead of
<code>westeros_voting</code>. This will ensure that the region labels
will properly sit on their proper locations!</p>
<div class="codewrapper sourceCode" id="cb58">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#create a map with the specified coloring</span></span>
<span><span class="fu">ggplot</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_sf</span><span class="op">(</span>data <span class="op">=</span> <span class="va">westeros_voting_sf</span>, <span class="fu">aes</span><span class="op">(</span>fill <span class="op">=</span> <span class="va">dominant</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_text</span><span class="op">(</span>data <span class="op">=</span> <span class="va">region_centroids</span>, </span>
<span>            <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">coords.X</span>, y <span class="op">=</span> <span class="va">coords.Y</span>, label <span class="op">=</span> <span class="va">Name</span><span class="op">)</span>,</span>
<span>            size <span class="op">=</span> <span class="fl">2</span>, fontface <span class="op">=</span> <span class="st">"bold"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">scale_fill_manual</span><span class="op">(</span>name <span class="op">=</span> <span class="st">"Dominant Candidate"</span>, values <span class="op">=</span> <span class="va">dom_color</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">labs</span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Dominant Candidate by Region"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme_bw</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<p>As you may notice, some labels in dense areas are overlapping a lot!
This is due to the size of the map in your local version of R. To
resolve this, you can export the map at a larger size using
<code>ggsave</code> (which will be covered at the end of this
lesson!).</p>
</div>
</div>
</div>
</div>
</div>
<div id="exercise-2" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="exercise-2" class="callout-inner">
<h3 class="callout-title">Exercise</h3>
<div class="callout-content">
<p>Using what you’ve learned above, create a map displaying the peak
check-in wait times across the first 35 precincts. For this lesson, we
will be using the <code>avg_checkins.csv</code> file we created within
“Data Wrangling with dplyr”!</p>
<p>To complete this map, use the following steps: 1. Read in your data
as “checkin_data”. 2. Using the <code>merge</code> function, link
together your “checkin_data” with the “westeros_map”, creating a
“westeros_checkins” dataframe. Hint: if the linking columns are named
differently, use by.x and by.y to specify the two names (with x being
the first data and y being the second). 3. Generate your map based on
the “westeros_checkins” data, filling each region based on the
avg_checkin_length. 4. Choose a title and change the name of the legend
to “Check-In Times”.</p>
</div>
</div>
</div>
<div id="accordionSolution6" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution6" aria-expanded="false" aria-controls="collapseSolution6">
  <h4 class="accordion-header" id="headingSolution6"> Show me the solution </h4>
</button>
<div id="collapseSolution6" class="accordion-collapse collapse" aria-labelledby="headingSolution6" data-bs-parent="#accordionSolution6">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb59">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#read in data</span></span>
<span><span class="va">checkin_data</span> <span class="op">&lt;-</span> <span class="fu">read_csv</span><span class="op">(</span><span class="fu">here</span><span class="op">(</span><span class="st">"data"</span>, <span class="st">"avg_checkins.csv"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#link together map and checkin_data</span></span>
<span><span class="va">westeros_checkins</span> <span class="op">&lt;-</span> <span class="fu">merge</span><span class="op">(</span><span class="va">westeros_map</span>, <span class="va">checkin_data</span>, by.x <span class="op">=</span> <span class="st">"id"</span>, by.y <span class="op">=</span> <span class="st">"precinct"</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#generate map with labels</span></span>
<span><span class="fu">ggplot</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_sf</span><span class="op">(</span>data <span class="op">=</span> <span class="va">westeros_checkins</span>, <span class="fu">aes</span><span class="op">(</span>fill <span class="op">=</span> <span class="va">avg_checkin_length</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">labs</span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Average Check-In Times Across Westeros"</span>,</span>
<span>       fill <span class="op">=</span> <span class="st">"Check-In Times"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme_bw</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="customization">Customization<a class="anchor" aria-label="anchor" href="#customization"></a>
</h2>
<hr class="half-width">
<div class="section level3">
<h3 id="ggplot2-themes">
<strong><code>ggplot2</code></strong> Themes<a class="anchor" aria-label="anchor" href="#ggplot2-themes"></a>
</h3>
<p>In addition to <code>theme_bw()</code>, which changes the plot
background to white, <strong><code>ggplot2</code></strong> comes with
several other themes which can be useful to quickly change the look of
your visualization. The complete list of themes is available at <a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">https://ggplot2.tidyverse.org/reference/ggtheme.html</a>.
<code>theme_minimal()</code> and <code>theme_light()</code> are popular,
and <code>theme_void()</code> can be useful as a starting point to
create a new hand-crafted theme.</p>
<p>The <a href="https://jrnold.github.io/ggthemes/reference/index.html" class="external-link">ggthemes</a>
package provides a wide variety of options (including an Excel 2003
theme). The <a href="https://exts.ggplot2.tidyverse.org/" class="external-link"><strong><code>ggplot2</code></strong>
extensions website</a> provides a list of packages that extend the
capabilities of <strong><code>ggplot2</code></strong>, including
additional themes.</p>
</div>
<div class="section level3">
<h3 id="custom-themes">Custom Themes<a class="anchor" aria-label="anchor" href="#custom-themes"></a>
</h3>
<p>If you do not like the themes offered, or you’d like to change a
portion of a theme, you can use the <code>theme()</code> function to
manually customize your maps and plots!</p>
<p>The <code>theme()</code> function allows you to customize all
portions of a ggplot, including the text, title, subtitle, and grids.
You can find the <a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">full list in
the documentation</a> or by using the panel on the right and navigating
to the <code>theme</code> help page (Help &gt; Packages &gt; ggplot2
&gt; theme).</p>
<p>Below, we will be applying a few of these customizations to a plot
from earlier in the lesson:</p>
<div class="codewrapper sourceCode" id="cb60">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">prop_device</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">filter</span><span class="op">(</span><span class="va">location</span> <span class="op">%in%</span> <span class="fu">c</span><span class="op">(</span><span class="st">"LOCATION_001"</span>, <span class="st">"LOCATION_002"</span>, <span class="st">"LOCATION_003"</span>, <span class="st">"LOCATION_004"</span>, <span class="st">"LOCATION_005"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>location <span class="op">=</span> <span class="fu">str_remove</span><span class="op">(</span><span class="va">location</span>, <span class="st">"LOCATION_"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>device <span class="op">=</span> <span class="fu">str_remove</span><span class="op">(</span><span class="va">device</span>, <span class="st">"DEVICE_"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">location</span>, y <span class="op">=</span> <span class="va">prop</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_bar</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>fill <span class="op">=</span> <span class="va">device</span><span class="op">)</span>, position <span class="op">=</span> <span class="st">"dodge"</span>, stat <span class="op">=</span> <span class="st">"identity"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">labs</span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Proportion of Check-Ins by Location for Each Device"</span>,</span>
<span>       x <span class="op">=</span> <span class="st">"Location"</span>,</span>
<span>       y <span class="op">=</span> <span class="st">"Proportion"</span>,</span>
<span>       fill <span class="op">=</span> <span class="st">"Device"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme_bw</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme</span><span class="op">(</span></span>
<span>    text <span class="op">=</span> <span class="fu">element_text</span><span class="op">(</span>size <span class="op">=</span> <span class="fl">12</span><span class="op">)</span>,</span>
<span>    plot.title <span class="op">=</span> <span class="fu">element_text</span><span class="op">(</span>size <span class="op">=</span> <span class="fl">16</span>, face <span class="op">=</span> <span class="st">"bold"</span>, hjust <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span>,</span>
<span>    axis.title <span class="op">=</span> <span class="fu">element_text</span><span class="op">(</span>face <span class="op">=</span> <span class="st">"italic"</span><span class="op">)</span>,</span>
<span>    panel.grid.minor <span class="op">=</span> <span class="fu">element_blank</span><span class="op">(</span><span class="op">)</span>,</span>
<span>    panel.grid.major.x <span class="op">=</span> <span class="fu">element_blank</span><span class="op">(</span><span class="op">)</span>,</span>
<span>    panel.border <span class="op">=</span> <span class="fu">element_rect</span><span class="op">(</span>color <span class="op">=</span> <span class="st">"grey70"</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span></code></pre>
</div>
<p>Note: it is also possible to change the fonts of your plots! If you
are on Windows, you will have to install the <a href="https://github.com/wch/extrafont" class="external-link"><strong><code>extrafont</code></strong>
package</a> before doing so..</p>
<p>Additionally, you like the changes you created better than the
default themes, you can save your changes as a custom theme for
application to other plots:</p>
<div class="codewrapper sourceCode" id="cb61">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_theme</span> <span class="op">&lt;-</span> <span class="fu">theme_bw</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme</span><span class="op">(</span></span>
<span>    text <span class="op">=</span> <span class="fu">element_text</span><span class="op">(</span>size <span class="op">=</span> <span class="fl">12</span><span class="op">)</span>,</span>
<span>    plot.title <span class="op">=</span> <span class="fu">element_text</span><span class="op">(</span>size <span class="op">=</span> <span class="fl">16</span>, face <span class="op">=</span> <span class="st">"bold"</span>, hjust <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span>,</span>
<span>    axis.title <span class="op">=</span> <span class="fu">element_text</span><span class="op">(</span>face <span class="op">=</span> <span class="st">"italic"</span><span class="op">)</span>,</span>
<span>    panel.grid.minor <span class="op">=</span> <span class="fu">element_blank</span><span class="op">(</span><span class="op">)</span>,</span>
<span>    panel.grid.major.x <span class="op">=</span> <span class="fu">element_blank</span><span class="op">(</span><span class="op">)</span>,</span>
<span>    panel.border <span class="op">=</span> <span class="fu">element_rect</span><span class="op">(</span>color <span class="op">=</span> <span class="st">"grey70"</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="va">prop_hour_device</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>device <span class="op">=</span> <span class="fu">str_remove</span><span class="op">(</span><span class="va">device</span>, <span class="st">"DEVICE_"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">hour</span>, y <span class="op">=</span> <span class="va">prop</span>, fill <span class="op">=</span> <span class="va">device</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_bar</span><span class="op">(</span>stat <span class="op">=</span> <span class="st">"identity"</span>, position <span class="op">=</span> <span class="st">"dodge"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">labs</span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Proportion of Check-Ins by Hour for Each Device"</span>,</span>
<span>       x <span class="op">=</span> <span class="st">"Hour (24H Format)"</span>,</span>
<span>       y <span class="op">=</span> <span class="st">"Proportion"</span>,</span>
<span>       fill <span class="op">=</span> <span class="st">"Device"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">scale_x_continuous</span><span class="op">(</span>breaks <span class="op">=</span> <span class="fu">seq</span><span class="op">(</span><span class="fl">0</span>, <span class="fl">24</span>, by <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="va">my_theme</span></span></code></pre>
</div>
<p>These themes can also be applied to maps, as seen below:</p>
<div class="codewrapper sourceCode" id="cb62">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_sf</span><span class="op">(</span>data <span class="op">=</span> <span class="va">westeros_voting</span>, <span class="fu">aes</span><span class="op">(</span>fill <span class="op">=</span> <span class="va">dominant</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">scale_fill_manual</span><span class="op">(</span>name <span class="op">=</span> <span class="st">"Dominant Candidate"</span>, values <span class="op">=</span> <span class="va">dom_color</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">labs</span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Dominant Candidate by Region"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="va">my_theme</span></span></code></pre>
</div>
<div id="exercise-3" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<span class="callout-header">Discussion</span>
<div id="exercise-3" class="callout-inner">
<h3 class="callout-title">Exercise</h3>
<div class="callout-content">
<p>With all of this information in hand, please take another five
minutes to either improve one of the plots generated in this exercise or
create a beautiful graph of your own using any of the data used
throughout this lesson.</p>
<p>You can use the RStudio <a href="https://github.com/rstudio/cheatsheets/blob/main/data-visualization-2.1.pdf" class="external-link"><strong><code>ggplot2</code></strong>
cheat sheet</a> for inspiration.</p>
<p>Here are some ideas: - Make a line plot showing the cumulative number
of check-ins over the course of the day. - Try using a different color
palette for your device comparison. - Generate a new map using the GoT
data.</p>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="plot-output">Plot Output<a class="anchor" aria-label="anchor" href="#plot-output"></a>
</h2>
<hr class="half-width">
<p>After creating a plot, you may want to save it as a png (or other
format). To do this, you can use the use the <code>ggsave()</code>
function, which allows you to easily change the dimension and resolution
of your plot by adjusting the appropriate arguments (<code>width</code>,
<code>height</code> and <code>dpi</code>) before saving the plot to the
specified directory.</p>
<p>Here, we will save one of the plots we customized above:</p>
<div class="codewrapper sourceCode" id="cb63">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">plot</span> <span class="op">&lt;-</span> <span class="va">prop_device</span> <span class="op">%&gt;%</span></span>
<span>        <span class="fu">filter</span><span class="op">(</span><span class="va">location</span> <span class="op">%in%</span> <span class="fu">c</span><span class="op">(</span><span class="st">"LOCATION_001"</span>, <span class="st">"LOCATION_002"</span>, <span class="st">"LOCATION_003"</span>, <span class="st">"LOCATION_004"</span>, <span class="st">"LOCATION_005"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>        <span class="fu">mutate</span><span class="op">(</span>location <span class="op">=</span> <span class="fu">str_remove</span><span class="op">(</span><span class="va">location</span>, <span class="st">"LOCATION_"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>        <span class="fu">mutate</span><span class="op">(</span>device <span class="op">=</span> <span class="fu">str_remove</span><span class="op">(</span><span class="va">device</span>, <span class="st">"DEVICE_"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>        <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">location</span>, y <span class="op">=</span> <span class="va">prop</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>        <span class="fu">geom_bar</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>fill <span class="op">=</span> <span class="va">device</span><span class="op">)</span>, position <span class="op">=</span> <span class="st">"dodge"</span>, stat <span class="op">=</span> <span class="st">"identity"</span><span class="op">)</span> <span class="op">+</span></span>
<span>        <span class="fu">labs</span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Proportion of Check-Ins by Location for Each Device"</span>,</span>
<span>             x <span class="op">=</span> <span class="st">"Location"</span>,</span>
<span>             y <span class="op">=</span> <span class="st">"Proportion"</span>,</span>
<span>             fill <span class="op">=</span> <span class="st">"Device"</span><span class="op">)</span> <span class="op">+</span></span>
<span>        <span class="fu">theme_bw</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>        <span class="fu">theme</span><span class="op">(</span></span>
<span>          text <span class="op">=</span> <span class="fu">element_text</span><span class="op">(</span>size <span class="op">=</span> <span class="fl">12</span><span class="op">)</span>,</span>
<span>          plot.title <span class="op">=</span> <span class="fu">element_text</span><span class="op">(</span>size <span class="op">=</span> <span class="fl">16</span>, face <span class="op">=</span> <span class="st">"bold"</span>, hjust <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span>,</span>
<span>          axis.title <span class="op">=</span> <span class="fu">element_text</span><span class="op">(</span>face <span class="op">=</span> <span class="st">"italic"</span><span class="op">)</span>,</span>
<span>          panel.grid.minor <span class="op">=</span> <span class="fu">element_blank</span><span class="op">(</span><span class="op">)</span>,</span>
<span>          panel.grid.major.x <span class="op">=</span> <span class="fu">element_blank</span><span class="op">(</span><span class="op">)</span>,</span>
<span>          panel.border <span class="op">=</span> <span class="fu">element_rect</span><span class="op">(</span>color <span class="op">=</span> <span class="st">"grey70"</span><span class="op">)</span></span>
<span>        <span class="op">)</span></span>
<span></span>
<span><span class="fu">ggsave</span><span class="op">(</span><span class="st">"fig-output/device_prop.png"</span>, <span class="va">plot</span>, width <span class="op">=</span> <span class="fl">10</span>, height <span class="op">=</span> <span class="fl">6</span>, dpi <span class="op">=</span> <span class="fl">300</span><span class="op">)</span></span></code></pre>
</div>
<p>You can find the png generated in your data folder!</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<span class="callout-header">Key Points</span>
<div class="callout-inner">
<div class="callout-content">
<ul>
<li>
<code>ggplot2</code> is a flexible and useful tool for creating
plots in R.</li>
<li>The data set and coordinate system can be defined using the
<code>ggplot</code> function.</li>
<li>Additional layers, including geoms, are added using the
<code>+</code> operator.</li>
<li>Time-series data can be visualized using <code>geom_line()</code>
and <code>geom_point()</code>.</li>
<li>Box plots are useful for visualizing the distribution of check-in
times by location.</li>
<li>Bar plots are useful for visualizing counts of check-ins by
categorical variables.</li>
<li>Faceting allows you to generate multiple plots based on a
categorical variable like device.</li>
<li>Spatial data can be visualized on maps using the <code>sf</code> and
<code>ggplot2</code> packages.</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></section><section id="aio-06-rmarkdown"><p>Content from <a href="06-rmarkdown.html">Getting Started with R Markdown (optional)</a></p>
<hr>
<p>Last updated on 2025-11-11 |

        <a href="https://github.com/EngineeringForDemocracy/r-election-workers/edit/main/episodes/06-rmarkdown.Rmd" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>What is R Markdown?</li>
<li>How can I integrate my R code with text and plots?</li>
<li>How can I convert .Rmd files to .html, .pdf, or .docx?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Create a .Rmd document containing R code, text, and plots</li>
<li>Create a YAML header to control output</li>
<li>Understand basic syntax of R Markdown</li>
<li>Customize code chunks to control formatting</li>
<li>Use code chunks and in-line code to create dynamic, reproducible
documents</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="r-markdown">R Markdown<a class="anchor" aria-label="anchor" href="#r-markdown"></a>
</h2>
<hr class="half-width">
<p>R Markdown is a flexible type of document that allows you to
seamlessly combine executable R code (and its output) with text and
images in a single document. These documents can be readily converted to
multiple static and dynamic output formats, including PDF (.pdf), Word
(.docx), and HTML (.html).</p>
<p>The benefit of a well-prepared R Markdown document is full
reproducibility! This also means that, if you notice a data
transcription error or you are able to add more data to your analysis,
you will be able to recompile the report without making any changes in
the actual document.</p>
<p>The <strong>rmarkdown</strong> package comes pre-installed with
RStudio, so no action is necessary to begin using R Markdown
documents.</p>
<figure><figure><img src="fig/rmarkdown_wizards.png" alt="R Markdown wizard monsters creating a R Markdown document from a recipe. Art by Allison Horst" width="100%" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><figcaption>
Image credit:
<a href="https://github.com/allisonhorst/stats-illustrations" class="external-link">Allison
Horst</a>
</figcaption></figure></section><section><h2 class="section-heading" id="creating-an-r-markdown-file">Creating an R Markdown File<a class="anchor" aria-label="anchor" href="#creating-an-r-markdown-file"></a>
</h2>
<hr class="half-width">
<p>To create a new R Markdown document in RStudio, click File -&gt; New
File -&gt; R Markdown:</p>
<figure><img src="fig/new-rmd.png" alt="Screenshot of the New R Markdown file dialogue box in RStudio" class="figure mx-auto d-block"></figure><p>Then, click on ‘Create Empty Document’ to generate your R Markdown
file.</p>
<p>In practice, you can enter the title of your document, your name
(Author), and select the type of output. However, in this lesson, we
will be learning how to start from a blank document.</p>
</section><section><h2 class="section-heading" id="basic-components-of-r-markdown">Basic Components of R Markdown<a class="anchor" aria-label="anchor" href="#basic-components-of-r-markdown"></a>
</h2>
<hr class="half-width">
<p>To control the output, a YAML header is needed. YAML (which stands
for YAML Ain’t Markup Language) is a human-readable serialization
language that helps with the configuration of files!</p>
<p>An example of a YAML header can be seen below:</p>
<pre><code>---
title: "My Awesome Report"
author: "Emmet Brickowski"
date: ""
output: html_document
---</code></pre>
<p>In R Markdown, the header is defined by the three hyphens at the
beginning (<code>---</code>) and the three hyphens at the end
(<code>---</code>).</p>
<p>Within this header, the only required field is the
<code>output</code>, which specifies the type of output you want. This
can be an <code>html_document</code>, a <code>pdf_document</code>, or a
<code>word_document</code>. We will start with an HTML document and
discuss the other options later.</p>
<p>Since the other fields are not required, you can delete them if they
are unneeded!</p>
<p>To begin the body of your document, start typing after the end of the
YAML header (i.e. after the second <code>---</code>).</p>
</section><section><h2 class="section-heading" id="markdown-syntax">Markdown Syntax<a class="anchor" aria-label="anchor" href="#markdown-syntax"></a>
</h2>
<hr class="half-width">
<p>Markdown is a popular markup language that allows you to add
formatting elements to text, such as <strong>bold</strong>,
<em>italics</em>, and <code>code</code>. However, the formatting will
not be immediately visible in your markdown (.md) document, like you
would see in a Word document. Rather, Markdown syntax applied to text
within your file is converted into formatted elements <em>upon
output</em>. Markdown is useful because it is lightweight, flexible, and
platform independent.</p>
<p>Some platforms provide a real time preview of the formatting, like
RStudio’s visual markdown editor (available from version 1.4).</p>
<p>First, let’s create a heading! A <code>#</code> in front of text
indicates to Markdown that this text is a heading. Adding more
<code>#</code>s make the heading smaller, i.e. one <code>#</code> is a
first level heading, two <code>##</code>s is a second level heading,
etc. This can be repeated up until the 6th level heading.</p>
<pre><code><span><span class="co"># Title</span></span>
<span><span class="co">## Section</span></span>
<span><span class="co">### Sub-section</span></span>
<span><span class="co">#### Sub-sub section</span></span>
<span><span class="co">##### Sub-sub-sub section</span></span>
<span><span class="co">###### Sub-sub-sub-sub section</span></span></code></pre>
<p>Please note that you should only use a level if the one above it is
also in use! For example, you should not create a header using
<code>####</code> unless headers at <code>###</code> and <em>all</em>
higher levels are present earlier in the document.</p>
<p>Since we have already defined our title in the YAML header, we will
use a section heading to create an Introduction section.</p>
<pre><code><span><span class="co">## Introduction</span></span></code></pre>
<p>You can make things <strong>bold</strong> by surrounding the word
with double asterisks, <code>**bold**</code>, or double underscores,
<code>__bold__</code>. <em>Italics</em> can be applied using single
asterisks, <code>*italics*</code>, or single underscores,
<code>_italics_</code>.</p>
<p>You can also combine <strong>bold</strong> and <em>italics</em> to
write something <strong><em>really</em></strong> important with
triple-asterisks, <code>***really***</code>, or underscores,
<code>___really___</code>. If you’re feeling bold (pun intended), you
can also use a combination of asterisks and underscores,
<code>**_really_**</code>, <code>*__really__*</code>.</p>
<p>To create <code>code-type</code> font, surround the word with
back-ticks, <code>`code-type`</code>.</p>
<p>Now, let’s apply everything we’ve learned about markdown syntax thus
far:</p>
<pre><code>## Introduction

This report uses the **tidyverse** package along with the *Check-In* Dataset,
which has columns that include:</code></pre>
<p>Then we can create a list for the variables using <code>-</code>,
<code>+</code>, or <code>*</code> keys.</p>
<pre><code>## Introduction

This report uses the **tidyverse** package along with the *Check-In* Dataset,
which has columns that include:

- checkin\_id
- checkin\_length
- checkin\_time
- location
- precinct
- device </code></pre>
<p>You can also create an ordered list using numbers:</p>
<pre><code>1. checkin\_id
2 checkin\_length
3. checkin\_time
4. location
5. precinct
6. device</code></pre>
<p>And nested items by tab-indenting:</p>
<pre><code>- checkin\_id
  + Unique key/ID for each ballot instance
- checkin\_length
  + Number of seconds it took for the person submitting the ballot to check-in
- checkin\_time
  + Arrival time of the person submitting the ballot
- location
  + Anonymized ID for the location of the ballot box
- precinct
  + Anonymized ID for the precinct that the ballot box belongs to
- device
  + Anonymized ID for each ballot box</code></pre>
<p>For more Markdown syntax see <a href="https://www.markdownguide.org/basic-syntax" class="external-link">the following
reference guide</a>.</p>
<p>To render your document into HTML, click the <strong>Knit</strong>
button at the top of the Source panel (top left), or use the keyboard
shortcut <kbd>Ctrl</kbd>+<kbd>Shift</kbd>+<kbd>K</kbd> for Windows and
Linux or <kbd>Cmd</kbd>+<kbd>Shift</kbd>+<kbd>K</kbd> for Mac. If you
haven’t saved the document yet, you will be prompted to do so when you
<strong>Knit</strong> for the first time.</p>
<figure><img src="fig/rmd-rmd_to_html.png" alt="The 'knitting' process: First, R Markdown is converted to Markdown, which is then converted (via pandoc) to .html, .pdf, .docx, etc." class="figure mx-auto d-block"></figure></section><section><h2 class="section-heading" id="writing-an-r-markdown-report">Writing an R Markdown Report<a class="anchor" aria-label="anchor" href="#writing-an-r-markdown-report"></a>
</h2>
<hr class="half-width">
<p>Next, we will add some R code from our previous data wrangling and
visualization, which means we need to make sure
<strong>tidyverse</strong> is loaded. However, it is no longer enough to
just load <strong>tidyverse</strong> from the console – when working
with R Markdown, you must ensure any necessary packages are loaded
within the document itself. The same applies to our data. To do so, we
will need to create a ‘code chunk’ at the top of our document (below the
YAML header).</p>
<p>A code chunk can be inserted by clicking Code -&gt; Insert Chunk, or
by using the keyboard shortcuts
<kbd>Ctrl</kbd>+<kbd>Alt</kbd>+<kbd>I</kbd> for Windows and Linux or
<kbd>Cmd</kbd>+<kbd>Option</kbd>+<kbd>I</kbd> for Mac.</p>
<p>The syntax of a code chunk is:</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">MARKDOWN<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode markdown" tabindex="0"><code class="sourceCode markdown"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="in">```{r chunk-name}</span></span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a><span class="in">"This is where you would place your R code!"</span></span>
<span id="cb8-3"><a href="#cb8-3" tabindex="-1"></a><span class="in">```</span></span></code></pre>
</div>
<p>An R Markdown document knows that this text is not part of the report
from the <code>```</code> that begins and ends the chunk. It also knows
that the code inside of the chunk is written in R from the
<code>r</code> inside of the curly braces (<code>{}</code>). After the
<code>r</code>, you can add a name for the code chunk. Naming a chunk is
optional, but recommended for organizational purposes. When naming
chunks, each chunk name must be unique, and only contain alphanumeric
characters and <code>-</code>.</p>
<p>To load <strong>tidyverse</strong> and our
<code>checkin_data.csv</code> file, we will insert a chunk and call it
‘setup’. Since we don’t want this code or the output to show in our
knitted HTML document, we add an <code>include = FALSE</code> option
after the code chunk name (<code>{r setup, include = FALSE}</code>).</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">MARKDOWN<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode markdown" tabindex="0"><code class="sourceCode markdown"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="in">```{r setup, include = FALSE}</span></span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a><span class="in">#loads in the tidyverse and here packages</span></span>
<span id="cb9-3"><a href="#cb9-3" tabindex="-1"></a><span class="in">library(tidyverse)</span></span>
<span id="cb9-4"><a href="#cb9-4" tabindex="-1"></a><span class="in">library(here)</span></span>
<span id="cb9-5"><a href="#cb9-5" tabindex="-1"></a></span>
<span id="cb9-6"><a href="#cb9-6" tabindex="-1"></a><span class="in">#reads in data and assigns it to the 'data' variable using 'here'</span></span>
<span id="cb9-7"><a href="#cb9-7" tabindex="-1"></a><span class="in">data &lt;- read_csv(here("data", "checkin_data.csv"))</span></span>
<span id="cb9-8"><a href="#cb9-8" tabindex="-1"></a><span class="in">```</span></span></code></pre>
</div>
<div id="important-note" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<span class="callout-header">Callout</span>
<div id="important-note" class="callout-inner">
<h3 class="callout-title">Important Note!</h3>
<div class="callout-content">
<p>The file paths you give in a .Rmd document, e.g. to load a .csv file,
are relative to the .Rmd document, <strong>not</strong> the project
root.</p>
<p>As suggested in the Starting with Data episode, we highly recommend
the use of the <code>here()</code> function to keep the file paths
consistent within your project.</p>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="insert-table">Insert Table<a class="anchor" aria-label="anchor" href="#insert-table"></a>
</h2>
<hr class="half-width">
<p>Next, we will re-create a table from the Data Wrangling episode which
shows the total number of check-ins grouped by <code>precinct</code>. We
can do this by creating a new code chunk and calling it ‘anon-tbl’.
Alternatively, you can come up with something more creative (just
remember to stick to the naming rules).</p>
<p>When writing code chunks, unlike text, it isn’t necessary to
<strong>Knit</strong> your document every time you want to see the
output. Instead you can run the code chunk with the green triangle in
the top right corner of the the chunk, or by using the keyboard
shortcuts <kbd>Ctrl</kbd>+<kbd>Alt</kbd>+<kbd>C</kbd> for Windows and
Linux or <kbd>Cmd</kbd>+<kbd>Option</kbd>+<kbd>C</kbd> for Mac.</p>
<p>To make sure the table is formatted nicely in our output document, we
will need to use the <code>kable()</code> function from the
<strong>knitr</strong> package. The <code>kable()</code> function takes
the output of your R code and knits it into a nice looking HTML table.
You can also specify different aspects of the table (i.e., the column
names or the caption).</p>
<p>Run the code chunk below to ensure you get the desired output:</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">group_by</span><span class="op">(</span><span class="va">precinct</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">summarize</span><span class="op">(</span>total_checkins <span class="op">=</span> <span class="fu">n</span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">arrange</span><span class="op">(</span><span class="fu">desc</span><span class="op">(</span><span class="va">total_checkins</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">knitr</span><span class="fu">::</span><span class="fu">kable</span><span class="op">(</span>caption <span class="op">=</span> <span class="st">"We can also add a caption."</span>, </span>
<span>               col.names <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="st">"Precinct"</span>, </span>
<span>                             <span class="st">"Total Check-Ins"</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<table class="table">
<caption>We can also add a caption.</caption>
<thead><tr class="header">
<th align="left">Precinct</th>
<th align="right">Total Check-Ins</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">PRECINCT_219</td>
<td align="right">1968</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_016</td>
<td align="right">1807</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_271</td>
<td align="right">1798</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_317</td>
<td align="right">1731</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_358</td>
<td align="right">1717</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_239</td>
<td align="right">1705</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_199</td>
<td align="right">1700</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_323</td>
<td align="right">1695</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_106</td>
<td align="right">1680</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_045</td>
<td align="right">1671</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_008</td>
<td align="right">1652</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_051</td>
<td align="right">1652</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_046</td>
<td align="right">1640</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_133</td>
<td align="right">1640</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_408</td>
<td align="right">1636</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_119</td>
<td align="right">1633</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_254</td>
<td align="right">1630</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_242</td>
<td align="right">1628</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_047</td>
<td align="right">1621</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_386</td>
<td align="right">1617</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_315</td>
<td align="right">1611</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_367</td>
<td align="right">1607</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_307</td>
<td align="right">1600</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_215</td>
<td align="right">1598</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_134</td>
<td align="right">1592</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_294</td>
<td align="right">1585</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_136</td>
<td align="right">1584</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_340</td>
<td align="right">1584</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_376</td>
<td align="right">1583</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_387</td>
<td align="right">1580</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_309</td>
<td align="right">1568</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_246</td>
<td align="right">1565</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_319</td>
<td align="right">1564</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_105</td>
<td align="right">1561</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_395</td>
<td align="right">1554</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_306</td>
<td align="right">1550</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_027</td>
<td align="right">1539</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_251</td>
<td align="right">1527</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_210</td>
<td align="right">1519</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_211</td>
<td align="right">1507</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_308</td>
<td align="right">1507</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_146</td>
<td align="right">1500</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_039</td>
<td align="right">1489</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_161</td>
<td align="right">1483</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_266</td>
<td align="right">1479</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_262</td>
<td align="right">1478</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_258</td>
<td align="right">1475</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_297</td>
<td align="right">1470</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_324</td>
<td align="right">1466</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_263</td>
<td align="right">1464</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_179</td>
<td align="right">1459</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_200</td>
<td align="right">1459</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_035</td>
<td align="right">1448</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_022</td>
<td align="right">1436</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_235</td>
<td align="right">1432</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_335</td>
<td align="right">1427</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_256</td>
<td align="right">1417</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_177</td>
<td align="right">1415</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_121</td>
<td align="right">1402</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_398</td>
<td align="right">1402</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_217</td>
<td align="right">1392</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_018</td>
<td align="right">1380</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_193</td>
<td align="right">1380</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_084</td>
<td align="right">1370</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_158</td>
<td align="right">1360</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_196</td>
<td align="right">1358</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_204</td>
<td align="right">1352</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_007</td>
<td align="right">1347</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_225</td>
<td align="right">1344</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_150</td>
<td align="right">1336</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_066</td>
<td align="right">1334</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_044</td>
<td align="right">1332</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_128</td>
<td align="right">1328</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_070</td>
<td align="right">1317</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_320</td>
<td align="right">1317</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_282</td>
<td align="right">1314</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_303</td>
<td align="right">1314</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_237</td>
<td align="right">1313</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_336</td>
<td align="right">1306</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_399</td>
<td align="right">1306</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_036</td>
<td align="right">1291</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_117</td>
<td align="right">1278</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_178</td>
<td align="right">1278</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_236</td>
<td align="right">1268</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_412</td>
<td align="right">1268</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_331</td>
<td align="right">1265</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_050</td>
<td align="right">1262</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_124</td>
<td align="right">1251</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_096</td>
<td align="right">1246</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_109</td>
<td align="right">1246</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_037</td>
<td align="right">1241</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_280</td>
<td align="right">1236</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_157</td>
<td align="right">1232</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_371</td>
<td align="right">1232</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_290</td>
<td align="right">1225</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_375</td>
<td align="right">1220</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_404</td>
<td align="right">1219</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_216</td>
<td align="right">1212</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_054</td>
<td align="right">1211</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_356</td>
<td align="right">1203</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_041</td>
<td align="right">1201</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_126</td>
<td align="right">1199</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_328</td>
<td align="right">1198</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_332</td>
<td align="right">1198</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_351</td>
<td align="right">1188</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_065</td>
<td align="right">1187</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_195</td>
<td align="right">1187</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_125</td>
<td align="right">1185</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_406</td>
<td align="right">1183</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_055</td>
<td align="right">1179</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_098</td>
<td align="right">1179</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_048</td>
<td align="right">1174</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_339</td>
<td align="right">1173</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_038</td>
<td align="right">1171</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_139</td>
<td align="right">1170</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_191</td>
<td align="right">1168</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_011</td>
<td align="right">1167</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_014</td>
<td align="right">1161</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_270</td>
<td align="right">1154</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_110</td>
<td align="right">1149</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_118</td>
<td align="right">1130</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_153</td>
<td align="right">1127</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_015</td>
<td align="right">1125</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_097</td>
<td align="right">1122</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_341</td>
<td align="right">1122</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_257</td>
<td align="right">1119</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_281</td>
<td align="right">1114</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_052</td>
<td align="right">1109</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_318</td>
<td align="right">1109</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_255</td>
<td align="right">1105</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_159</td>
<td align="right">1102</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_396</td>
<td align="right">1101</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_333</td>
<td align="right">1096</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_174</td>
<td align="right">1092</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_312</td>
<td align="right">1091</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_079</td>
<td align="right">1090</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_353</td>
<td align="right">1089</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_269</td>
<td align="right">1082</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_220</td>
<td align="right">1079</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_067</td>
<td align="right">1074</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_230</td>
<td align="right">1063</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_137</td>
<td align="right">1062</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_160</td>
<td align="right">1056</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_033</td>
<td align="right">1054</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_313</td>
<td align="right">1050</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_260</td>
<td align="right">1047</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_187</td>
<td align="right">1042</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_206</td>
<td align="right">1040</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_129</td>
<td align="right">1036</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_203</td>
<td align="right">1028</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_296</td>
<td align="right">1028</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_029</td>
<td align="right">1026</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_377</td>
<td align="right">1023</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_081</td>
<td align="right">1022</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_080</td>
<td align="right">1021</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_221</td>
<td align="right">1006</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_154</td>
<td align="right">1002</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_415</td>
<td align="right">998</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_394</td>
<td align="right">995</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_325</td>
<td align="right">992</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_115</td>
<td align="right">991</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_321</td>
<td align="right">988</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_085</td>
<td align="right">987</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_184</td>
<td align="right">986</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_064</td>
<td align="right">982</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_370</td>
<td align="right">981</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_202</td>
<td align="right">979</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_299</td>
<td align="right">977</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_310</td>
<td align="right">976</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_201</td>
<td align="right">974</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_420</td>
<td align="right">963</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_021</td>
<td align="right">956</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_114</td>
<td align="right">954</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_241</td>
<td align="right">954</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_194</td>
<td align="right">944</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_316</td>
<td align="right">943</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_397</td>
<td align="right">943</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_059</td>
<td align="right">942</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_053</td>
<td align="right">941</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_049</td>
<td align="right">939</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_143</td>
<td align="right">934</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_075</td>
<td align="right">932</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_168</td>
<td align="right">926</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_298</td>
<td align="right">925</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_349</td>
<td align="right">915</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_381</td>
<td align="right">910</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_197</td>
<td align="right">908</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_166</td>
<td align="right">904</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_372</td>
<td align="right">904</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_123</td>
<td align="right">890</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_083</td>
<td align="right">889</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_288</td>
<td align="right">885</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_010</td>
<td align="right">882</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_068</td>
<td align="right">882</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_017</td>
<td align="right">875</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_207</td>
<td align="right">873</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_127</td>
<td align="right">872</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_337</td>
<td align="right">868</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_283</td>
<td align="right">866</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_327</td>
<td align="right">861</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_393</td>
<td align="right">858</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_107</td>
<td align="right">856</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_140</td>
<td align="right">854</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_116</td>
<td align="right">853</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_390</td>
<td align="right">853</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_131</td>
<td align="right">851</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_348</td>
<td align="right">849</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_132</td>
<td align="right">845</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_354</td>
<td align="right">845</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_164</td>
<td align="right">844</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_095</td>
<td align="right">843</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_209</td>
<td align="right">838</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_359</td>
<td align="right">831</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_248</td>
<td align="right">820</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_169</td>
<td align="right">819</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_058</td>
<td align="right">816</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_076</td>
<td align="right">816</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_198</td>
<td align="right">815</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_181</td>
<td align="right">810</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_378</td>
<td align="right">810</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_003</td>
<td align="right">806</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_023</td>
<td align="right">797</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_025</td>
<td align="right">796</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_069</td>
<td align="right">796</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_234</td>
<td align="right">795</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_267</td>
<td align="right">791</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_144</td>
<td align="right">785</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_322</td>
<td align="right">783</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_130</td>
<td align="right">776</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_224</td>
<td align="right">766</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_416</td>
<td align="right">766</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_329</td>
<td align="right">764</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_005</td>
<td align="right">762</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_352</td>
<td align="right">762</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_142</td>
<td align="right">761</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_012</td>
<td align="right">759</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_120</td>
<td align="right">757</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_314</td>
<td align="right">748</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_102</td>
<td align="right">743</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_009</td>
<td align="right">742</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_250</td>
<td align="right">738</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_013</td>
<td align="right">737</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_024</td>
<td align="right">734</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_108</td>
<td align="right">734</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_057</td>
<td align="right">733</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_113</td>
<td align="right">732</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_228</td>
<td align="right">731</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_149</td>
<td align="right">728</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_391</td>
<td align="right">727</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_073</td>
<td align="right">724</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_071</td>
<td align="right">708</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_231</td>
<td align="right">701</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_185</td>
<td align="right">691</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_034</td>
<td align="right">682</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_138</td>
<td align="right">682</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_145</td>
<td align="right">682</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_304</td>
<td align="right">680</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_006</td>
<td align="right">676</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_369</td>
<td align="right">669</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_172</td>
<td align="right">663</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_030</td>
<td align="right">662</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_183</td>
<td align="right">660</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_155</td>
<td align="right">652</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_001</td>
<td align="right">648</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_233</td>
<td align="right">648</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_243</td>
<td align="right">643</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_188</td>
<td align="right">639</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_364</td>
<td align="right">638</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_028</td>
<td align="right">633</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_111</td>
<td align="right">621</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_212</td>
<td align="right">621</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_213</td>
<td align="right">614</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_026</td>
<td align="right">604</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_060</td>
<td align="right">601</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_094</td>
<td align="right">592</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_170</td>
<td align="right">585</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_208</td>
<td align="right">581</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_223</td>
<td align="right">581</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_344</td>
<td align="right">580</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_141</td>
<td align="right">578</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_350</td>
<td align="right">573</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_063</td>
<td align="right">571</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_182</td>
<td align="right">571</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_122</td>
<td align="right">570</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_086</td>
<td align="right">565</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_273</td>
<td align="right">562</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_252</td>
<td align="right">560</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_388</td>
<td align="right">556</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_278</td>
<td align="right">555</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_151</td>
<td align="right">553</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_368</td>
<td align="right">552</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_384</td>
<td align="right">547</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_343</td>
<td align="right">546</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_186</td>
<td align="right">543</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_409</td>
<td align="right">540</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_087</td>
<td align="right">536</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_259</td>
<td align="right">530</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_249</td>
<td align="right">528</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_240</td>
<td align="right">527</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_289</td>
<td align="right">520</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_287</td>
<td align="right">513</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_347</td>
<td align="right">511</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_311</td>
<td align="right">504</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_072</td>
<td align="right">498</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_407</td>
<td align="right">493</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_192</td>
<td align="right">490</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_104</td>
<td align="right">489</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_295</td>
<td align="right">482</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_214</td>
<td align="right">479</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_245</td>
<td align="right">478</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_305</td>
<td align="right">477</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_247</td>
<td align="right">473</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_103</td>
<td align="right">469</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_004</td>
<td align="right">466</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_366</td>
<td align="right">463</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_226</td>
<td align="right">462</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_147</td>
<td align="right">459</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_402</td>
<td align="right">459</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_162</td>
<td align="right">457</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_284</td>
<td align="right">454</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_019</td>
<td align="right">444</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_293</td>
<td align="right">443</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_156</td>
<td align="right">441</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_152</td>
<td align="right">439</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_077</td>
<td align="right">429</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_100</td>
<td align="right">415</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_279</td>
<td align="right">412</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_135</td>
<td align="right">406</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_165</td>
<td align="right">404</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_099</td>
<td align="right">403</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_090</td>
<td align="right">397</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_264</td>
<td align="right">397</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_218</td>
<td align="right">396</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_276</td>
<td align="right">393</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_413</td>
<td align="right">386</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_383</td>
<td align="right">385</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_338</td>
<td align="right">373</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_361</td>
<td align="right">371</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_362</td>
<td align="right">367</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_405</td>
<td align="right">363</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_190</td>
<td align="right">362</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_418</td>
<td align="right">362</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_373</td>
<td align="right">359</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_040</td>
<td align="right">356</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_093</td>
<td align="right">348</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_392</td>
<td align="right">342</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_400</td>
<td align="right">339</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_173</td>
<td align="right">333</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_379</td>
<td align="right">324</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_082</td>
<td align="right">321</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_163</td>
<td align="right">320</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_285</td>
<td align="right">320</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_232</td>
<td align="right">313</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_286</td>
<td align="right">296</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_277</td>
<td align="right">295</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_222</td>
<td align="right">288</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_301</td>
<td align="right">284</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_275</td>
<td align="right">280</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_291</td>
<td align="right">279</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_238</td>
<td align="right">274</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_385</td>
<td align="right">265</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_389</td>
<td align="right">259</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_002</td>
<td align="right">257</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_357</td>
<td align="right">248</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_148</td>
<td align="right">244</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_380</td>
<td align="right">243</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_302</td>
<td align="right">241</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_342</td>
<td align="right">234</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_330</td>
<td align="right">232</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_417</td>
<td align="right">232</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_032</td>
<td align="right">227</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_268</td>
<td align="right">224</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_374</td>
<td align="right">220</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_363</td>
<td align="right">218</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_346</td>
<td align="right">213</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_300</td>
<td align="right">212</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_265</td>
<td align="right">207</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_334</td>
<td align="right">206</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_074</td>
<td align="right">190</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_043</td>
<td align="right">189</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_167</td>
<td align="right">187</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_205</td>
<td align="right">184</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_410</td>
<td align="right">184</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_401</td>
<td align="right">180</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_229</td>
<td align="right">179</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_089</td>
<td align="right">178</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_112</td>
<td align="right">171</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_365</td>
<td align="right">171</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_274</td>
<td align="right">169</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_326</td>
<td align="right">167</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_078</td>
<td align="right">150</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_244</td>
<td align="right">148</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_056</td>
<td align="right">143</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_061</td>
<td align="right">142</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_088</td>
<td align="right">140</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_171</td>
<td align="right">124</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_176</td>
<td align="right">124</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_292</td>
<td align="right">111</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_020</td>
<td align="right">109</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_091</td>
<td align="right">102</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_180</td>
<td align="right">101</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_261</td>
<td align="right">101</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_382</td>
<td align="right">101</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_272</td>
<td align="right">98</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_419</td>
<td align="right">89</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_042</td>
<td align="right">78</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_062</td>
<td align="right">75</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_189</td>
<td align="right">70</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_227</td>
<td align="right">70</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_403</td>
<td align="right">68</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_414</td>
<td align="right">68</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_031</td>
<td align="right">66</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_175</td>
<td align="right">64</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_355</td>
<td align="right">60</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_253</td>
<td align="right">58</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_101</td>
<td align="right">43</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_345</td>
<td align="right">42</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_411</td>
<td align="right">37</td>
</tr>
<tr class="odd">
<td align="left">PRECINCT_360</td>
<td align="right">11</td>
</tr>
<tr class="even">
<td align="left">PRECINCT_092</td>
<td align="right">2</td>
</tr>
</tbody>
</table>
<p>Many different R packages can be used to generate tables. Some of the
more commonly used options are listed in the table below:</p>
<table class="table">
<colgroup>
<col width="23%">
<col width="23%">
<col width="52%">
</colgroup>
<thead><tr class="header">
<th>Name</th>
<th>Creator(s)</th>
<th>Description</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><a href="https://condformat.sergioller.com/index.html" class="external-link">condformat</a></td>
<td><a href="https://cran.rstudio.com/web/packages/condformat/index.html" class="external-link">Oller
Moreno (2022)</a></td>
<td>Allows for the application and visualization of conditional
formatting to data frames using defined criteria.</td>
</tr>
<tr class="even">
<td><a href="https://rstudio.github.io/DT/" class="external-link">DT</a></td>
<td><a href="https://cran.r-project.org/web/packages/DT/index.html" class="external-link">Xie
et al. (2023)</a></td>
<td>By using the JavaScript library ‘DataTables’ (included within the
library), data objects can be rendered as HTML tables via R Markdown or
Shiny.</td>
</tr>
<tr class="odd">
<td><a href="https://github.com/renkun-ken/formattable" class="external-link">formattable</a></td>
<td><a href="https://cran.r-project.org/web/packages/formattable/index.html" class="external-link">Ren
and Russell (2021)</a></td>
<td>Provides functions that create “formattable” vectors and data
frames. Formattable vectors are displayed with text formatting, while
formattable data frames use HTML to enhance the readability when
rendered on web pages.</td>
</tr>
<tr class="even">
<td><a href="https://davidgohel.github.io/flextable/" class="external-link">flextable</a></td>
<td><a href="https://cran.r-project.org/web/packages/flextable/index.html" class="external-link">Gohel
and Skintzos (2023)</a></td>
<td>Assists in the creation and customization of tables for reporting
and publication purposes. The following formats are supported: ‘HTML’,
‘PDF’, ‘RTF’, ‘Microsoft Word’, ‘Microsoft PowerPoint’ and R ‘Grid
Graphics’. ‘R Markdown’, ‘Quarto’, and the package ‘officer’ can be used
to produce files with results.</td>
</tr>
<tr class="odd">
<td><a href="https://gt.rstudio.com/" class="external-link">gt</a></td>
<td><a href="https://cloud.r-project.org/web/packages/gt/index.html" class="external-link">Iannone et
al. (2022)</a></td>
<td>Builds display tables from tabular data. Within this package, tables
are constructed using a set of cohesive table parts. Table values can be
formatted using any of the included formatting functions.</td>
</tr>
<tr class="even">
<td><a href="https://hughjonesd.github.io/huxtable/" class="external-link">huxtable</a></td>
<td><a href="https://cran.r-project.org/web/packages/huxtable/index.html" class="external-link">Hugh-Jones
(2022)</a></td>
<td>Creates styled tables for data presentation. These tables can be
exported to HTML, LaTeX, RTF, ‘Word’, ‘Excel’, and ‘PowerPoint’. Using
this package, you can manipulate borders, size, position, captions,
colors, text styles and number formatting.</td>
</tr>
<tr class="odd">
<td><a href="https://rapporter.github.io/pander/" class="external-link">pander</a></td>
<td><a href="https://cran.r-project.org/web/packages/pander/index.html" class="external-link">Daróczi
and Tsegelskyi (2022)</a></td>
<td>Includes functions that catch all messages, ‘stdout’ and other
useful information while evaluating R code. It also provides helpers to
return user-specified text elements (e.g., header, paragraph, table,
image, lists, etc.), or several types of R objects similarly
automatically transformed to markdown format, in ‘pandoc’ markdown.</td>
</tr>
<tr class="even">
<td><a href="https://pixiedust.github.io/pixiedust/" class="external-link">pixiedust</a></td>
<td><a href="https://cran.rstudio.com/web/packages/pixiedust/index.html" class="external-link">Nutter
and Kretch (2021)</a></td>
<td>Provides tidy data frames with a programming interface intended to
be similar to ’ggplot2’s system of layers, allowing fine-tuned control
over each cell of the table.</td>
</tr>
<tr class="odd">
<td><a href="https://glin.github.io/reactable/" class="external-link">reactable</a></td>
<td><a href="https://cran.r-project.org/web/packages/reactable/index.html" class="external-link">Lin
et al. (2023)</a></td>
<td>Creates interactive data tables for R based on the ‘React Table’
JavaScript library. Provides an HTML widget that can be used in ‘R
Markdown’ or ‘Quarto’ documents, ‘Shiny’ applications, or viewed from an
R console.</td>
</tr>
<tr class="even">
<td><a href="https://jrowen.github.io/rhandsontable/" class="external-link">rhandsontable</a></td>
<td><a href="https://cran.r-project.org/web/packages/rhandsontable/index.html" class="external-link">Owen
et al. (2021)</a></td>
<td>Provides an R interface to the ‘Handsontable’ JavaScript library (a
minimalist Excel-like data grid editor).</td>
</tr>
<tr class="odd">
<td><a href="https://github.com/cran/stargazer" class="external-link">stargazer</a></td>
<td><a href="https://cran.r-project.org/web/packages/stargazer/index.html" class="external-link">Hlavac
(2022)</a></td>
<td>Generates LaTeX code, HTML/CSS code and ASCII text for
well-formatted tables that display regression analysis results from
multiple models side-by-side, along with summary statistics.</td>
</tr>
<tr class="even">
<td><a href="https://github.com/dmurdoch/tables" class="external-link">tables</a></td>
<td><a href="https://cran.r-project.org/web/packages/tables/index.html" class="external-link">Murdoch
(2022)</a></td>
<td>Computes and displays complex tables of summary statistics. Output
can be in LaTeX, HTML, plain text, or an R matrix for further
processing.</td>
</tr>
<tr class="odd">
<td><a href="https://github.com/spgarbet/tangram" class="external-link">tangram</a></td>
<td><a href="https://cran.r-project.org/web/packages/tangram/index.html" class="external-link">Garbett
et al. (2023)</a></td>
<td>Provides a flexible formula system to create production quality
tables quickly and easily. The processing steps include a formula
parser, statistical content generation from data defined by a formula,
and table rendering.</td>
</tr>
<tr class="even">
<td><a href="https://github.com/cran/xtable" class="external-link">xtable</a></td>
<td><a href="https://cran.r-project.org/web/packages/xtable/index.html" class="external-link">Dahl et
al. (2019)</a></td>
<td>Coerces data to LaTeX and HTML tables.</td>
</tr>
<tr class="odd">
<td><a href="https://github.com/cardiomoon/ztable" class="external-link">ztable</a></td>
<td><a href="https://cran.r-project.org/web/packages/ztable/index.html" class="external-link">Moon
(2021)</a></td>
<td>Makes zebra-striped tables (tables with alternating row colors) in
LaTeX and HTML formats using data.frame, matrix, lm, aov, anova, glm,
coxph, nls, fitdistr, mytable and cbind.mytable objects.</td>
</tr>
</tbody>
</table></section><section><h2 class="section-heading" id="customizing-chunk-output">Customizing Chunk Output<a class="anchor" aria-label="anchor" href="#customizing-chunk-output"></a>
</h2>
<hr class="half-width">
<p>Earlier, we mentioned using <code>include = FALSE</code> in a code
chunk to prevent the code and output from printing in the knitted
document. There are additional options available to customize how the
code-chunks are presented in the output document. The options are
entered in the code chunk after <code>chunk-name</code> and separated by
commas, e.g. <code>{r chunk-name, eval = FALSE, echo = TRUE}</code>.</p>
<table class="table">
<colgroup>
<col width="18%">
<col width="18%">
<col width="63%">
</colgroup>
<thead><tr class="header">
<th>Option</th>
<th>Options</th>
<th>Output</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code>eval</code></td>
<td>
<code>TRUE</code> or <code>FALSE</code>
</td>
<td>Whether or not the code within the code chunk should be run.</td>
</tr>
<tr class="even">
<td><code>echo</code></td>
<td>
<code>TRUE</code> or <code>FALSE</code>
</td>
<td>Choose if you want to show your code chunk in the output document.
<code>echo = TRUE</code> will show the code chunk.</td>
</tr>
<tr class="odd">
<td><code>include</code></td>
<td>
<code>TRUE</code> or <code>FALSE</code>
</td>
<td>Choose if the output of a code chunk should be included in the
document. <code>FALSE</code> means that your code will run, but will not
show up in the document.</td>
</tr>
<tr class="even">
<td><code>warning</code></td>
<td>
<code>TRUE</code> or <code>FALSE</code>
</td>
<td>Whether or not you want your output document to display potential
warning messages produced by your code.</td>
</tr>
<tr class="odd">
<td><code>message</code></td>
<td>
<code>TRUE</code> or <code>FALSE</code>
</td>
<td>Whether or not you want your output document to display potential
messages produced by your code.</td>
</tr>
<tr class="even">
<td><code>fig.align</code></td>
<td>
<code>default</code>, <code>left</code>, <code>right</code>,
<code>center</code>
</td>
<td>Where the figure from your R code chunk should be output on the
page</td>
</tr>
</tbody>
</table>
<div id="tip" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<span class="callout-header">Callout</span>
<div id="tip" class="callout-inner">
<h3 class="callout-title">Tip</h3>
<div class="callout-content">
<ul>
<li>The default settings for the above chunk options are all
<code>TRUE</code>.</li>
<li>The default settings can be modified per chunk, or with
<code>knitr::opts_chunk$set()</code> (i.e., entering
<code>knitr::opts_chunk$set(echo = FALSE)</code> will change the default
of value of <code>echo</code> to <code>FALSE</code> for
<strong>every</strong> code chunk in the document).</li>
</ul>
</div>
</div>
</div>
<div id="exercise" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="exercise" class="callout-inner">
<h3 class="callout-title">Exercise</h3>
<div class="callout-content">
<p>Play around with the different options in the chunk with the code for
the table, and re-<strong>Knit</strong> to see what each option does to
the output.</p>
<p>What happens if you use <code>eval = FALSE</code> and
<code>echo = FALSE</code>? What is the difference between this and
<code>include = FALSE</code>?</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Solution to Exercise </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<p>Chunk 1:</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">MARKDOWN<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode markdown" tabindex="0"><code class="sourceCode markdown"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="in">```{r eval = FALSE, echo = FALSE}</span></span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a><span class="in">data %&gt;%</span></span>
<span id="cb11-3"><a href="#cb11-3" tabindex="-1"></a><span class="in">  group_by(precinct) %&gt;%</span></span>
<span id="cb11-4"><a href="#cb11-4" tabindex="-1"></a><span class="in">  summarize(total_checkins = n()) %&gt;%</span></span>
<span id="cb11-5"><a href="#cb11-5" tabindex="-1"></a><span class="in">  arrange(desc(total_checkins)) %&gt;%</span></span>
<span id="cb11-6"><a href="#cb11-6" tabindex="-1"></a><span class="in">  knitr::kable(caption = "We can also add a caption.", </span></span>
<span id="cb11-7"><a href="#cb11-7" tabindex="-1"></a><span class="in">               col.names = c("Precinct", </span></span>
<span id="cb11-8"><a href="#cb11-8" tabindex="-1"></a><span class="in">                             "Total Check-Ins"))</span></span>
<span id="cb11-9"><a href="#cb11-9" tabindex="-1"></a><span class="in">```</span></span></code></pre>
</div>
<p>Chunk 2:</p>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">MARKDOWN<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode markdown" tabindex="0"><code class="sourceCode markdown"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a><span class="in">```{r include = FALSE}</span></span>
<span id="cb12-2"><a href="#cb12-2" tabindex="-1"></a><span class="in">data %&gt;%</span></span>
<span id="cb12-3"><a href="#cb12-3" tabindex="-1"></a><span class="in">  group_by(precinct) %&gt;%</span></span>
<span id="cb12-4"><a href="#cb12-4" tabindex="-1"></a><span class="in">  summarize(total_checkins = n()) %&gt;%</span></span>
<span id="cb12-5"><a href="#cb12-5" tabindex="-1"></a><span class="in">  arrange(desc(total_checkins)) %&gt;%</span></span>
<span id="cb12-6"><a href="#cb12-6" tabindex="-1"></a><span class="in">  knitr::kable(caption = "We can also add a caption.", </span></span>
<span id="cb12-7"><a href="#cb12-7" tabindex="-1"></a><span class="in">               col.names = c("Precinct", </span></span>
<span id="cb12-8"><a href="#cb12-8" tabindex="-1"></a><span class="in">                             "Total Check-Ins"))</span></span>
<span id="cb12-9"><a href="#cb12-9" tabindex="-1"></a><span class="in">```</span></span></code></pre>
</div>
<ul>
<li>
<code>eval = FALSE</code> and <code>echo = FALSE</code> will neither
run the code in the chunk, nor show the code in the knitted document.
The code chunk essentially doesn’t exist in the knitted document!</li>
<li>
<code>include = FALSE</code> will not display the code nor the
output, but it <em>will</em> be ran, with the output stored for later
use!</li>
</ul>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="in-line-r-code">In-Line R Code<a class="anchor" aria-label="anchor" href="#in-line-r-code"></a>
</h2>
<hr class="half-width">
<p>Now we will use some in-line R code to present some descriptive
statistics. To use in-line R-code, we use the same back-ticks that we
used in the Markdown section, with an <code>r</code> to specify that we
are generating R-code. The difference between in-line code and a code
chunk is the number of back-ticks. In-line R code uses one back-tick
(<code>`r`</code>), whereas code chunks use three back-ticks
(<code>```r```</code>).</p>
<p>For example, today’s date is <code>`r Sys.Date()`</code>, will be
rendered as: today’s date is 2025-11-11. The code will display today’s
date in the output document (or, technically, the date the document was
last knitted).</p>
<p>The best way to use in-line R code is by preparing the output in code
chunks, minimizing the code needed to produce the output. For example,
let’s say we’re interested in presenting the total check-ins for a
specific precinct.</p>
<p>We can run the below code to create the total_2866 object, making
future in-line R code much easier to write:</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#create a summary tibble with the total check-ins per precinct</span></span>
<span><span class="va">df</span> <span class="op">&lt;-</span> <span class="va">data</span> <span class="op">%&gt;%</span></span>
<span>      <span class="fu">group_by</span><span class="op">(</span><span class="va">precinct</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>      <span class="fu">summarize</span><span class="op">(</span>total_checkins <span class="op">=</span> <span class="fu">n</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#select the precinct we want to use</span></span>
<span><span class="va">total_2866</span> <span class="op">&lt;-</span> <span class="va">df</span> <span class="op">%&gt;%</span></span>
<span>              <span class="fu">filter</span><span class="op">(</span><span class="va">precinct</span> <span class="op">==</span> <span class="st">"2866"</span><span class="op">)</span></span></code></pre>
</div>
<p>Now we can make an informative statement on the counts of each
precinct, and include the total values as in-line R-code. For
example:</p>
<p>The total check-ins at precinct 2866 is
<code>`r total_2866$total_checkins`</code></p>
<p>becomes…</p>
<p>The total check-ins at precinct 2866 is .</p>
<p>Because we are using in-line R code instead of the actual values, we
have created a dynamic document that will automatically update if we
make changes to the data set and/or code chunks.</p>
</section><section><h2 class="section-heading" id="plots">Plots<a class="anchor" aria-label="anchor" href="#plots"></a>
</h2>
<hr class="half-width">
<p>Finally, our last addition to our document will be a plot from the
Data Visualization lesson!</p>
<div id="exercise-1" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="exercise-1" class="callout-inner">
<h3 class="callout-title">Exercise</h3>
<div class="callout-content">
<p>Create a new code chunk for the plot, and copy the code from any of
the plots we created in the previous episode to produce a plot in the
chunk.</p>
<p>If you are feeling adventurous, you can also create a new plot using
the <code>data</code> tibble.</p>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Solution to Exercise </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" aria-labelledby="headingSolution2" data-bs-parent="#accordionSolution2">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#retrieve top devices</span></span>
<span><span class="va">top_devices</span> <span class="op">&lt;-</span> <span class="va">data</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">count</span><span class="op">(</span><span class="va">device</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">top_n</span><span class="op">(</span><span class="fl">10</span>, <span class="va">n</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">pull</span><span class="op">(</span><span class="va">device</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#create plot</span></span>
<span><span class="va">data</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">filter</span><span class="op">(</span><span class="va">device</span> <span class="op">%in%</span> <span class="va">top_devices</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>device <span class="op">=</span> <span class="fu">str_remove</span><span class="op">(</span><span class="va">device</span>, <span class="st">"DEVICE_"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">device</span>, fill <span class="op">=</span> <span class="va">device</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_bar</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">labs</span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Top 10 Devices by Number of Check-ins"</span>,</span>
<span>       x <span class="op">=</span> <span class="st">"Device"</span>,</span>
<span>       y <span class="op">=</span> <span class="st">"Count"</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu">theme_classic</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu">theme</span><span class="op">(</span>legend.position <span class="op">=</span> <span class="st">"none"</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="fig/06-rmarkdown-rendered-my-fancy-plot-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure>
</div>
</div>
</div>
</div>
<p>We can also create a caption with the chunk option
<code>fig.cap</code>.</p>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">MARKDOWN<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode markdown" tabindex="0"><code class="sourceCode markdown"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a><span class="in">```{r chunk-name, fig.cap = "I made this plot while attending an</span></span>
<span id="cb15-2"><a href="#cb15-2" tabindex="-1"></a><span class="in">awesome workshop where I learned a ton of cool stuff!"}</span></span>
<span id="cb15-3"><a href="#cb15-3" tabindex="-1"></a><span class="in">"Insert the code for the plot here"</span></span>
<span id="cb15-4"><a href="#cb15-4" tabindex="-1"></a><span class="in">```</span></span></code></pre>
</div>
<p>…or, ideally, something more informative.</p>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#retrieve top devices</span></span>
<span><span class="va">top_devices</span> <span class="op">&lt;-</span> <span class="va">data</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">count</span><span class="op">(</span><span class="va">device</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">top_n</span><span class="op">(</span><span class="fl">10</span>, <span class="va">n</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">pull</span><span class="op">(</span><span class="va">device</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#create plot</span></span>
<span><span class="va">data</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">filter</span><span class="op">(</span><span class="va">device</span> <span class="op">%in%</span> <span class="va">top_devices</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>device <span class="op">=</span> <span class="fu">str_remove</span><span class="op">(</span><span class="va">device</span>, <span class="st">"DEVICE_"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">device</span>, fill <span class="op">=</span> <span class="va">device</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_bar</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">labs</span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Top 10 Devices by Number of Check-ins"</span>,</span>
<span>       x <span class="op">=</span> <span class="st">"Device"</span>,</span>
<span>       y <span class="op">=</span> <span class="st">"Count"</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu">theme_classic</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu">theme</span><span class="op">(</span>legend.position <span class="op">=</span> <span class="st">"none"</span><span class="op">)</span></span></code></pre>
</div>
<figure style="text-align: center"><img src="fig/06-rmarkdown-rendered-caption-plot-1.png" alt="I made this plot while attending an awesome workshop where I learned a ton of cool stuff!" class="figure mx-auto d-block"><figcaption>
I made this plot while attending an awesome workshop where I learned a
ton of cool stuff!
</figcaption></figure></section><section><h2 class="section-heading" id="other-output-options">Other Output Options<a class="anchor" aria-label="anchor" href="#other-output-options"></a>
</h2>
<hr class="half-width">
<p>To convert an R Markdown file to a PDF or Word Document, you can
either click the little triangle next to the <strong>Knit</strong>
button to get a drop-down menu or put <code>pdf_document</code> or
<code>word_document</code> in the initial header of the file.</p>
<p>For example, to output to a <code>word_document</code>:</p>
<pre><code>---
title: "My Awesome Report"
author: "Emmet Brickowski"
date: ""
output: word_document
---</code></pre>
<div id="note-creating-pdf-documents" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<span class="callout-header">Callout</span>
<div id="note-creating-pdf-documents" class="callout-inner">
<h3 class="callout-title">Note: Creating PDF Documents</h3>
<div class="callout-content">
<p>Creating .pdf documents may require installation of some extra
software. The R package <code>tinytex</code> provides some tools to help
make this process easier for R users. With <code>tinytex</code>
installed, run <code>tinytex::install_tinytex()</code> to install the
required software (you’ll only need to do this once) and then when you
<strong>Knit</strong> to pdf <code>tinytex</code> will automatically
detect and install any additional LaTeX packages that are needed to
produce the pdf document. For more information, visit the <a href="https://yihui.org/tinytex/" class="external-link">tinytex website</a>.</p>
</div>
</div>
</div>
<div id="note-inserting-citations-into-an-r-markdown-file" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<span class="callout-header">Callout</span>
<div id="note-inserting-citations-into-an-r-markdown-file" class="callout-inner">
<h3 class="callout-title">Note: Inserting Citations into an R Markdown
File</h3>
<div class="callout-content">
<p>It is possible to insert citations into an R Markdown file using the
editor toolbar. The editor toolbar includes commonly seen formatting
buttons generally seen in text editors (e.g., bold and italic buttons)
and is accessible by using the settings drop-down menu (next to the
‘Knit’ drop-down menu) to select ‘Use Visual Editor’. You can also use
the keyboard shortcuts <kbd>Ctrl</kbd>+<kbd>Shift</kbd>+<kbd>F4</kbd>
for Windows and Linux or <kbd>Cmd</kbd>+<kbd>Shift</kbd>+<kbd>F4</kbd>
for Mac. From here, clicking ‘Insert’ allows ‘Citation’ to be
selected.</p>
<p>Using this menu, you can search various sources for citations and
insert the appropriate citation necessary. For example, searching
‘10.1007/978-3-319-24277-4’ in ‘From DOI’ and inserting will provide the
citation for <code>ggplot2</code> <span class="citation">[@wickham2016]</span>. This will also save the
citation(s) in ‘references.bib’ in the current working directory. Visit
the <a href="https://rstudio.github.io/visual-markdown-editing/" class="external-link">R
Studio website</a> for more information.</p>
<p>Additionally, you can obtain citation information from relevant
packages by using <code>citation("package")</code>.</p>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="resources">Resources<a class="anchor" aria-label="anchor" href="#resources"></a>
</h2>
<hr class="half-width">
<ul>
<li><a href="https://kbroman.org/knitr_knutshell" class="external-link">Knitr in a knutshell
tutorial</a></li>
<li>
<a href="https://www.amazon.com/exec/obidos/ASIN/1482203537/7210-20" class="external-link">Dynamic
Documents with R and knitr</a> (book)</li>
<li><a href="https://rmarkdown.rstudio.com" class="external-link">R Markdown
documentation</a></li>
<li><a href="https://github.com/rstudio/cheatsheets/blob/master/rmarkdown-2.0.pdf" class="external-link">R
Markdown cheat sheet</a></li>
<li><a href="https://www.rstudio.com/resources/webinars/getting-started-with-r-markdown/" class="external-link">Getting
started with R Markdown</a></li>
<li><a href="https://commonmark.org/help/tutorial/" class="external-link">Markdown
tutorial</a></li>
<li>
<a href="https://bookdown.org/yihui/rmarkdown/" class="external-link">R Markdown: The
Definitive Guide</a> (book by Rstudio team)</li>
<li><a href="https://www.rstudio.com/resources/webinars/reproducible-reporting/" class="external-link">Reproducible
Reporting</a></li>
<li><a href="https://www.rstudio.com/resources/webinars/introducing-bookdown/" class="external-link">Introducing
Bookdown</a></li>
</ul>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<span class="callout-header">Key Points</span>
<div class="callout-inner">
<div class="callout-content">
<ul>
<li>R Markdown is a useful language for creating reproducible documents
combining text and executable R-code.</li>
<li>You can specify chunk options to control formatting of the output
document.</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></section>
</div>
    </main>
</div>
<!-- END  : inst/pkgdown/templates/content-extra.html -->

      </div>
<!--/div.row-->
      		<footer class="row footer mx-md-3"><hr>
<div class="col-md-6">
        <p>This lesson is subject to the <a href="CODE_OF_CONDUCT.html">Code of Conduct</a></p>
        <p>

        <a href="https://github.com/EngineeringForDemocracy/r-election-workers/edit/main/README.md" class="external-link">Edit on GitHub</a>

	
        | <a href="https://github.com/EngineeringForDemocracy/r-election-workers/blob/main/CONTRIBUTING.md" class="external-link">Contributing</a>
        | <a href="https://github.com/EngineeringForDemocracy/r-election-workers/" class="external-link">Source</a></p>
				<p><a href="https://github.com/EngineeringForDemocracy/r-election-workers/blob/main/CITATION.cff" class="external-link">Cite</a> | <a href="mailto:brownsarahm@uri.edu">Contact</a> | <a href="https://carpentries.org/about/" class="external-link">About</a></p>
			</div>
			<div class="col-md-6">

        <p>Materials licensed under <a href="LICENSE.html">CC-BY 4.0</a> by the authors</p>

        <p>Template licensed under <a href="https://creativecommons.org/licenses/by-sa/4.0/" class="external-link">CC-BY 4.0</a> by <a href="https://carpentries.org/" class="external-link">The Carpentries</a></p>
        <p>Built with <a href="https://github.com/carpentries/sandpaper/tree/0.17.1" class="external-link">sandpaper (0.17.1)</a>, <a href="https://github.com/carpentries/pegboard/tree/0.7.9" class="external-link">pegboard (0.7.9)</a>, and <a href="https://github.com/EngineeringForDemocracy/varnish/tree/6ac3eaac4a59239c73c7a278964f1b9076933e28" class="external-link">varnish (1.0.7)</a></p>
			</div>
		</footer>
</div> <!-- / div.container -->
	<div id="to-top">
		<a href="#top">
      <i class="search-icon" data-feather="arrow-up" role="img" aria-label="Back To Top"></i><br><!-- <span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top --><span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top
		</a>
	</div>
  <script type="application/ld+json">
    {
  "@context": "https://schema.org",
  "@type": "LearningResource",
  "@id": "https://EngineeringForDemocracy.github.io/r-election-workers/aio.html",
  "inLanguage": "en",
  "dct:conformsTo": "https://bioschemas.org/profiles/LearningResource/1.0-RELEASE",
  "description": "A Carpentries Lesson teaching foundational data and coding skills to researchers worldwide",
  "keywords": "software, data, lesson, The Carpentries",
  "name": "All in One View",
  "creativeWorkStatus": "active",
  "url": "https://EngineeringForDemocracy.github.io/r-election-workers/aio.html",
  "identifier": "https://EngineeringForDemocracy.github.io/r-election-workers/aio.html",
  "dateCreated": "2025-11-10",
  "dateModified": "2025-11-11",
  "datePublished": "2025-11-11"
}

  </script><script>
		feather.replace();
	</script>
</body>
</html><!-- END:   inst/pkgdown/templates/layout.html-->

